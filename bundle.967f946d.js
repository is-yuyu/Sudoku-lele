var app=function(){"use strict";function l(){}const n=l=>l;function t(l){return l()}function e(){return Object.create(null)}function u(l){l.forEach(t)}function i(l){return"function"==typeof l}function s(l,n){return l!=l?n==n:l!==n||l&&"object"==typeof l||"function"==typeof l}let r;function o(n,...t){if(null==n)return l;const e=n.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function a(l){let n;return o(l,l=>n=l)(),n}function c(l,n,t){l.$$.on_destroy.push(o(n,t))}function d(l,n,t,e){if(l){const u=f(l,n,t,e);return l[0](u)}}function f(l,n,t,e){return l[1]&&e?function(l,n){for(const t in n)l[t]=n[t];return l}(t.ctx.slice(),l[1](e(n))):t.ctx}function h(l,n,t,e){if(l[2]&&e){const u=l[2](e(t));if(void 0===n.dirty)return u;if("object"==typeof u){const l=[],t=Math.max(n.dirty.length,u.length);for(let e=0;e<t;e+=1)l[e]=n.dirty[e]|u[e];return l}return n.dirty|u}return n.dirty}function g(l,n,t,e,u,i){if(u){const s=f(n,t,e,i);l.p(s,u)}}function p(l){if(l.ctx.length>32){const n=[],t=l.ctx.length/32;for(let l=0;l<t;l++)n[l]=-1;return n}return-1}const m="undefined"!=typeof window;let v=m?()=>window.performance.now():()=>Date.now(),b=m?l=>requestAnimationFrame(l):l;const w=new Set;function x(l){w.forEach(n=>{n.c(l)||(w.delete(n),n.f())}),0!==w.size&&b(x)}function y(l,n){l.appendChild(n)}function k(l){if(!l)return document;const n=l.getRootNode?l.getRootNode():l.ownerDocument;return n&&n.host?n:l.ownerDocument}function $(l){const n=z("style");return function(l,n){y(l.head||l,n)}(k(l),n),n.sheet}function S(l,n,t){l.insertBefore(n,t||null)}function C(l){l.parentNode.removeChild(l)}function M(l,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].d(n)}function z(l){return document.createElement(l)}function H(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function N(l){return document.createTextNode(l)}function P(){return N(" ")}function T(){return N("")}function j(l,n,t,e){return l.addEventListener(n,t,e),()=>l.removeEventListener(n,t,e)}function E(l){return function(n){return n.preventDefault(),l.call(this,n)}}function B(l,n,t){null==t?l.removeAttribute(n):l.getAttribute(n)!==t&&l.setAttribute(n,t)}function O(l){return""===l?null:+l}function _(l,n){n=""+n,l.wholeText!==n&&(l.data=n)}function L(l,n){l.value=null==n?"":n}function R(l,n,t,e){null===t?l.style.removeProperty(n):l.style.setProperty(n,t,e?"important":"")}function A(l,n){for(let t=0;t<l.options.length;t+=1){const e=l.options[t];if(e.__value===n)return void(e.selected=!0)}l.selectedIndex=-1}function V(l,n,t){l.classList[t?"add":"remove"](n)}function I(l,n,{bubbles:t=!1,cancelable:e=!1}={}){const u=document.createEvent("CustomEvent");return u.initCustomEvent(l,t,e,n),u}const D=new Map;let q,U=0;function F(l,n,t,e,u,i,s,r=0){const o=16.666/e;let a="{\n";for(let l=0;l<=1;l+=o){const e=n+(t-n)*i(l);a+=100*l+`%{${s(e,1-e)}}\n`}const c=a+`100% {${s(t,1-t)}}\n}`,d=`__svelte_${function(l){let n=5381,t=l.length;for(;t--;)n=(n<<5)-n^l.charCodeAt(t);return n>>>0}(c)}_${r}`,f=k(l),{stylesheet:h,rules:g}=D.get(f)||function(l,n){const t={stylesheet:$(n),rules:{}};return D.set(l,t),t}(f,l);g[d]||(g[d]=!0,h.insertRule(`@keyframes ${d} ${c}`,h.cssRules.length));const p=l.style.animation||"";return l.style.animation=`${p?`${p}, `:""}${d} ${e}ms linear ${u}ms 1 both`,U+=1,d}function J(l,n){const t=(l.style.animation||"").split(", "),e=t.filter(n?l=>l.indexOf(n)<0:l=>-1===l.indexOf("__svelte")),u=t.length-e.length;u&&(l.style.animation=e.join(", "),U-=u,U||b(()=>{U||(D.forEach(l=>{const{stylesheet:n}=l;let t=n.cssRules.length;for(;t--;)n.deleteRule(t);l.rules={}}),D.clear())}))}function W(l){q=l}function X(){if(!q)throw new Error("Function called outside component initialization");return q}function G(l){X().$$.on_mount.push(l)}function Y(){const l=X();return(n,t,{cancelable:e=!1}={})=>{const u=l.$$.callbacks[n];if(u){const i=I(n,t,{cancelable:e});return u.slice().forEach(n=>{n.call(l,i)}),!i.defaultPrevented}return!0}}const Z=[],Q=[],K=[],ll=[],nl=Promise.resolve();let tl=!1;function el(l){K.push(l)}function ul(l){ll.push(l)}const il=new Set;let sl,rl=0;function ol(){const l=q;do{for(;rl<Z.length;){const l=Z[rl];rl++,W(l),al(l.$$)}for(W(null),Z.length=0,rl=0;Q.length;)Q.pop()();for(let l=0;l<K.length;l+=1){const n=K[l];il.has(n)||(il.add(n),n())}K.length=0}while(Z.length);for(;ll.length;)ll.pop()();tl=!1,il.clear(),W(l)}function al(l){if(null!==l.fragment){l.update(),u(l.before_update);const n=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,n),l.after_update.forEach(el)}}function cl(l,n,t){l.dispatchEvent(I(`${n?"intro":"outro"}${t}`))}const dl=new Set;let fl;function hl(){fl={r:0,c:[],p:fl}}function gl(){fl.r||u(fl.c),fl=fl.p}function pl(l,n){l&&l.i&&(dl.delete(l),l.i(n))}function ml(l,n,t,e){if(l&&l.o){if(dl.has(l))return;dl.add(l),fl.c.push(()=>{dl.delete(l),e&&(t&&l.d(1),e())}),l.o(n)}else e&&e()}const vl={duration:0};function bl(t,e,s,r){let o=e(t,s),a=r?0:1,c=null,d=null,f=null;function h(){f&&J(t,f)}function g(l,n){const t=l.b-a;return n*=Math.abs(t),{a:a,b:l.b,d:t,duration:n,start:l.start,end:l.start+n,group:l.group}}function p(e){const{delay:i=0,duration:s=300,easing:r=n,tick:p=l,css:m}=o||vl,y={start:v()+i,b:e};e||(y.group=fl,fl.r+=1),c||d?d=y:(m&&(h(),f=F(t,a,e,s,i,r,m)),e&&p(0,1),c=g(y,s),el(()=>cl(t,e,"start")),function(l){let n;0===w.size&&b(x),new Promise(t=>{w.add(n={c:l,f:t})})}(l=>{if(d&&l>d.start&&(c=g(d,s),d=null,cl(t,c.b,"start"),m&&(h(),f=F(t,a,c.b,c.duration,0,r,o.css))),c)if(l>=c.end)p(a=c.b,1-a),cl(t,c.b,"end"),d||(c.b?h():--c.group.r||u(c.group.c)),c=null;else if(l>=c.start){const n=l-c.start;a=c.a+c.d*r(n/c.duration),p(a,1-a)}return!(!c&&!d)}))}return{run(l){i(o)?(sl||(sl=Promise.resolve(),sl.then(()=>{sl=null})),sl).then(()=>{o=o(),p(l)}):p(l)},end(){h(),c=d=null}}}function wl(l,n,t){const e=l.$$.props[n];void 0!==e&&(l.$$.bound[e]=t,t(l.$$.ctx[e]))}function xl(l){l&&l.c()}function yl(l,n,e,s){const{fragment:r,on_mount:o,on_destroy:a,after_update:c}=l.$$;r&&r.m(n,e),s||el(()=>{const n=o.map(t).filter(i);a?a.push(...n):u(n),l.$$.on_mount=[]}),c.forEach(el)}function kl(l,n){const t=l.$$;null!==t.fragment&&(u(t.on_destroy),t.fragment&&t.fragment.d(n),t.on_destroy=t.fragment=null,t.ctx=[])}function $l(l,n){-1===l.$$.dirty[0]&&(Z.push(l),tl||(tl=!0,nl.then(ol)),l.$$.dirty.fill(0)),l.$$.dirty[n/31|0]|=1<<n%31}function Sl(n,t,i,s,r,o,a,c=[-1]){const d=q;W(n);const f=n.$$={fragment:null,ctx:null,props:o,update:l,not_equal:r,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(d?d.$$.context:[])),callbacks:e(),dirty:c,skip_bound:!1,root:t.target||d.$$.root};a&&a(f.root);let h=!1;if(f.ctx=i?i(n,t.props||{},(l,t,...e)=>{const u=e.length?e[0]:t;return f.ctx&&r(f.ctx[l],f.ctx[l]=u)&&(!f.skip_bound&&f.bound[l]&&f.bound[l](u),h&&$l(n,l)),t}):[],f.update(),h=!0,u(f.before_update),f.fragment=!!s&&s(f.ctx),t.target){if(t.hydrate){const l=function(l){return Array.from(l.childNodes)}(t.target);f.fragment&&f.fragment.l(l),l.forEach(C)}else f.fragment&&f.fragment.c();t.intro&&pl(n.$$.fragment),yl(n,t.target,t.anchor,t.customElement),ol()}W(d)}class Cl{$destroy(){kl(this,1),this.$destroy=l}$on(l,n){const t=this.$$.callbacks[l]||(this.$$.callbacks[l]=[]);return t.push(n),()=>{const l=t.indexOf(n);-1!==l&&t.splice(l,1)}}$set(l){var n;this.$$set&&(n=l,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(l),this.$$.skip_bound=!1)}}const Ml="custom",zl={veryeasy:"Very Easy",easy:"Easy",medium:"Medium",hard:"Hard"},Hl={darkTheme:!1,displayTimer:!0,hintsLimited:!0,hints:5,highlightCells:!0,highlightSame:!0,highlightConflicting:!0,showErrors:!1},Nl=81,Pl=[[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8],[1,0],[1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[2,0],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[3,0],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[3,7],[3,8],[4,0],[4,1],[4,2],[4,3],[4,4],[4,5],[4,6],[4,7],[4,8],[5,0],[5,1],[5,2],[5,3],[5,4],[5,5],[5,6],[5,7],[5,8],[6,0],[6,1],[6,2],[6,3],[6,4],[6,5],[6,6],[6,7],[6,8],[7,0],[7,1],[7,2],[7,3],[7,4],[7,5],[7,6],[7,7],[7,8],[8,0],[8,1],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8]],Tl=[[1,1],[1,2],[1,3],[2,1],[2,2],[2,3],[3,1],[3,2],[3,3]],jl="_",El=new RegExp("^[a-zA-Z0-9]+[-_][a-zA-Z0-9]+$"),Bl="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",Ol="none",_l=400,Ll=_l,Rl=["Excellent!","Wow!","Congratulations!","Oh yeah!","Impressive!","Good work!","You did great!","Applause!","Great!"];class Al{static encode(l){let n=BigInt(62),t="";for(;0<l;)t=Bl.charAt(Number(l%n))+t,l/=n;return t||"0"}static decode(l){let n=BigInt(62),t=0n;for(let e=0;e<l.length;e++)t=t*n+BigInt(Bl.indexOf(l[e]));return t}}function Vl(l){const n=l.flat(),t=function(l){for(let n=0;n<Nl;n++){if(0!==l[80-n])return!1;if(0!==l[n])return!0}return!1}(n);t&&n.reverse();let e="",u="";for(let l=0;l<Nl;l++)e+=0===n[l]?"0":"1",n[l]>0&&(u+=n[l]-1);return Al.encode(BigInt("0b"+e))+(t?jl:"-")+Al.encode(BigInt(u))}function Il(l){return l&&0!==l.trim().length&&El.test(l)}const Dl=[];function ql(n,t=l){let e;const u=new Set;function i(l){if(s(n,l)&&(n=l,e)){const l=!Dl.length;for(const l of u)l[1](),Dl.push(l,n);if(l){for(let l=0;l<Dl.length;l+=2)Dl[l][0](Dl[l+1]);Dl.length=0}}}return{set:i,update:function(l){i(l(n))},subscribe:function(s,r=l){const o=[s,r];return u.add(o),1===u.size&&(e=t(i)||l),s(n),()=>{u.delete(o),0===u.size&&(e(),e=null)}}}}function Ul(n,t,e){const s=!Array.isArray(n),r=s?[n]:n,a=t.length<2;return c=n=>{let e=!1;const c=[];let d=0,f=l;const h=()=>{if(d)return;f();const e=t(s?c[0]:c,n);a?n(e):f=i(e)?e:l},g=r.map((l,n)=>o(l,l=>{c[n]=l,d&=~(1<<n),e&&h()},()=>{d|=1<<n}));return e=!0,h(),function(){u(g),f()}},{subscribe:ql(e,c).subscribe};var c}const Fl=function(){const l=ql({x:null,y:null});return{subscribe:l.subscribe,set(n,t){l.set({x:n,y:t})},move(n=0,t=0){l.update(l=>{let e=l.x+n,u=l.y+t;return e<0&&(e=8),e>=9&&(e=0),u<0&&(u=8),u>=9&&(u=0),{x:e,y:u}})},reset(){this.set(null,null)}}}();const Jl=function(){const l=ql((()=>{const l=localStorage.getItem("difficulty");return zl.hasOwnProperty(l)?l:Object.keys(zl)[0]})());return{subscribe:l.subscribe,set(n){zl.hasOwnProperty(n)&&(l.set(n),localStorage.setItem("difficulty",n))},setCustom(){l.set(Ml)}}}();function Wl(l,n,t){return function(l,n,t){for(var e=9*Math.floor(t/9),u=0;u<9;u+=1)if(l[e+u]===n)return!1;return!0}(l,n,t)&&function(l,n,t){for(var e=t%9,u=0;u<9;u+=1)if(l[e+9*u]===n)return!1;return!0}(l,n,t)&&function(l,n,t){for(var e=t-t%9%3-Math.floor(t/9)%3*9,u=0;u<9;u+=1)if(l[e+9*Math.floor(u/3)+u%3]===n)return!1;return!0}(l,n,t)}var Xl=0;function Gl(l,n,t){if(0!==t&&++Xl>t)throw new Error("Max iterations reached. No solution found.");if(n>=81)return!0;if(0!==l[n])return Gl(l,n+1,t);for(var e=1;e<=9;e+=1)if(Wl(l,e,n)&&(l[n]=e,Gl(l,n+1,t)))return!0;return l[n]=0,!1}var Yl=function(l,n){var t={emptyValue:"0",hintCheck:!0,outputArray:!1,maxIterations:1<<20};if(void 0!==n&&Object.assign(t,n),"string"==typeof l&&(l=l.split("")),!Array.isArray(l))throw new TypeError("Puzzle must be string or array.");if(81!==l.length)throw new Error("Puzzle is an invalid size.");var e=0;if(l=l.map(function(l){if(l===t.emptyValue||l===parseInt(t.emptyValue,10))return 0;e++;var n=parseInt(l,10);if(isNaN(n)||n>9||n<1)throw new TypeError("Invalid puzzle value: "+l);return n}),t.hintCheck&&e<17)throw new Error("A valid puzzle must have at least 17 hints.");if(!Gl(l,0,t.maxIterations))throw new Error("Puzzle could not be solved.");return t.outputArray?l:l.join("")};function Zl(l,n,t){return l(t={path:n,exports:{},require:function(l,n){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==n&&t.path)}},t.exports),t.exports}var Ql=Zl(function(l,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRandomIntBetween=function(l,n){return Math.floor(Math.random()*(n-l))+l}}),Kl=Zl(function(l,n){Object.defineProperty(n,"__esModule",{value:!0});var t=[[[null,8,null,null,null,null,null,null,null],[null,6,null,null,1,null,null,null,5],[null,null,5,8,null,2,null,4,7],[null,null,8,4,null,null,null,9,1],[null,9,null,null,null,null,null,8,null],[null,null,null,6,null,null,7,null,null],[null,null,null,null,5,null,null,3,null],[null,null,null,null,null,null,null,null,null],[2,1,null,null,6,null,null,null,9]],[[5,null,2,null,null,null,null,1,null],[null,null,7,null,8,4,6,null,null],[null,null,null,3,null,null,null,2,null],[null,3,null,null,null,7,null,null,null],[8,null,5,null,null,6,2,null,null],[null,null,null,1,4,null,null,null,null],[null,9,8,null,null,null,5,null,null],[1,null,null,6,null,null,4,null,null],[null,4,null,null,5,null,null,null,null]],[[null,null,null,null,null,null,1,null,null],[null,2,null,1,7,null,null,null,4],[null,7,null,null,null,null,8,null,9],[5,null,null,null,null,3,null,null,7],[null,null,null,8,4,null,null,null,null],[7,null,2,null,null,9,4,null,null],[null,null,8,null,3,null,null,null,null],[4,null,null,5,null,null,9,null,3],[null,1,null,null,null,8,null,null,null]],[[null,4,null,null,6,null,null,9,null],[null,null,null,null,7,null,8,null,1],[null,null,null,5,null,8,2,null,null],[2,null,null,null,8,null,null,null,5],[null,null,8,null,null,null,null,1,2],[7,null,null,9,null,3,null,null,null],[null,null,null,null,5,4,6,null,null],[null,null,null,null,null,null,null,null,3],[null,null,null,7,null,null,null,null,4]],[[null,null,null,null,null,null,null,7,2],[null,null,null,null,4,null,6,null,null],[null,null,null,null,null,null,5,null,null],[null,null,6,4,null,3,null,5,null],[null,8,null,null,null,6,1,null,null],[3,9,1,2,null,null,null,4,null],[7,null,null,null,8,null,null,null,null],[null,null,null,1,null,null,null,null,null],[null,null,4,9,6,null,null,null,8]],[[null,null,9,null,1,4,null,null,null],[null,null,null,null,null,null,null,null,null],[3,6,null,null,null,null,7,null,4],[8,null,1,null,null,5,9,null,null],[4,2,7,null,null,null,6,null,null],[null,null,null,null,7,null,null,null,null],[null,null,4,null,9,1,null,8,null],[7,null,null,null,null,null,null,null,6],[null,null,null,5,null,null,null,3,null]],[[null,6,null,null,null,5,null,3,2],[null,5,null,null,4,null,1,null,null],[null,null,null,null,7,null,null,6,null],[null,1,3,null,null,null,null,null,null],[5,null,null,null,null,4,null,null,3],[2,null,null,null,null,null,null,null,null],[null,8,null,null,1,2,4,7,null],[null,4,null,7,null,null,null,null,6],[null,null,null,null,6,null,8,9,null]],[[null,1,null,null,null,null,3,4,null],[null,null,2,null,4,null,null,null,null],[null,null,null,null,null,1,7,null,2],[9,null,null,1,null,null,null,null,5],[null,null,null,6,null,2,null,3,9],[1,null,null,3,null,null,null,null,4],[null,null,null,5,2,7,null,null,null],[null,9,null,null,8,6,null,null,null],[null,null,null,null,null,null,2,null,null]],[[3,null,null,null,null,null,5,null,null],[8,null,2,null,null,null,null,7,null],[7,9,null,null,null,5,null,null,2],[null,null,null,3,null,4,7,null,null],[null,null,null,null,null,6,null,4,3],[null,1,null,null,5,8,null,9,null],[null,null,null,6,2,null,null,5,null],[null,3,null,null,null,null,8,null,null],[null,null,null,null,null,null,null,1,null]]],e=[[[null,null,null,null,null,null,2,null,null],[9,7,6,null,null,null,null,5,null],[null,null,null,null,8,3,null,null,null],[8,null,1,null,null,null,null,null,null],[5,null,7,null,null,null,6,4,1],[null,null,null,2,null,null,null,null,null],[null,null,null,8,null,null,null,null,4],[null,4,null,null,9,5,3,null,2],[7,null,5,null,null,null,null,null,null]],[[6,null,null,null,null,null,3,null,null],[null,null,5,null,3,7,null,null,null],[null,null,null,5,null,null,null,null,null],[null,7,null,3,8,null,null,4,null],[null,2,null,null,1,null,null,null,null],[null,null,8,null,null,6,null,9,null],[8,null,null,6,null,9,null,null,null],[null,null,4,null,null,8,7,null,null],[null,9,2,7,null,null,null,null,6]],[[null,null,1,null,null,9,null,4,null],[6,null,null,null,4,null,null,null,null],[null,2,8,null,null,null,9,3,null],[null,null,null,null,null,null,6,7,null],[null,null,null,8,null,null,null,null,4],[null,null,null,5,2,4,3,null,null],[null,null,null,1,null,null,5,6,null],[null,null,6,null,null,null,null,null,2],[1,null,5,9,null,null,null,null,null]],[[8,7,null,null,null,null,null,null,null],[9,null,null,null,4,null,null,5,null],[4,null,null,null,2,9,7,null,null],[null,6,null,null,7,5,null,null,3],[null,null,null,null,3,null,null,null,9],[null,null,null,null,null,null,2,null,null],[null,null,null,null,null,7,null,null,null],[null,null,3,4,null,null,9,null,null],[2,8,5,null,null,null,null,null,null]],[[null,null,null,null,null,null,7,null,null],[null,4,null,null,5,null,1,null,null],[6,9,2,null,null,null,null,3,null],[null,null,1,null,null,9,null,null,null],[null,5,null,null,null,6,null,8,null],[null,2,null,7,null,4,null,9,null],[7,null,9,null,null,null,null,null,3],[null,null,null,null,null,null,null,7,null],[null,8,null,null,6,null,null,null,null]],[[5,null,null,null,1,null,9,null,4],[null,9,null,6,null,null,7,null,null],[6,null,null,null,null,null,null,1,null],[null,null,null,null,null,3,5,null,null],[2,null,null,null,null,null,null,null,3],[null,5,9,8,null,null,null,null,null],[null,null,null,null,null,null,1,null,null],[null,4,null,3,null,8,null,null,6],[null,3,null,9,null,null,null,4,null]],[[null,3,null,null,null,null,null,null,4],[null,null,null,6,null,null,1,null,null],[4,null,null,null,2,7,null,null,null],[null,null,null,null,4,null,null,2,5],[null,null,7,null,null,null,null,null,null],[6,null,8,null,null,1,null,null,null],[null,null,null,null,8,null,7,null,null],[null,1,null,null,null,null,null,6,null],[null,null,3,null,null,5,null,null,8]],[[null,null,3,6,null,2,null,9,null],[null,null,null,9,null,null,null,null,null],[null,null,6,1,7,null,2,null,null],[7,null,null,null,null,null,null,8,null],[null,null,null,null,8,5,3,null,null],[null,null,9,null,null,null,null,null,null],[4,null,null,7,null,9,1,null,null],[null,null,null,null,4,null,null,null,2],[null,null,null,null,null,1,7,5,null]],[[8,null,4,1,null,null,null,null,null],[null,null,1,9,3,2,null,null,4],[null,null,null,null,null,null,1,null,null],[1,5,null,null,null,null,null,7,null],[null,null,null,null,null,7,null,1,6],[2,null,null,null,null,5,null,null,null],[6,null,null,null,null,1,null,5,null],[null,null,null,3,null,null,2,null,null],[null,null,null,4,null,null,null,null,7]],[[4,null,null,null,null,1,8,null,null],[null,null,null,null,6,null,null,null,5],[null,5,1,null,null,null,null,null,null],[9,null,3,8,5,null,null,2,null],[null,null,null,null,null,7,null,6,null],[null,null,null,null,null,null,null,null,9],[6,7,null,null,null,3,null,4,null],[null,null,null,4,null,8,2,null,null],[null,3,null,null,null,null,null,null,null]]],u=[[[null,null,null,null,null,null,null,null,null],[null,null,8,null,2,6,null,null,null],[3,null,null,null,null,null,1,8,9],[null,null,null,9,5,null,null,null,3],[7,null,9,null,null,null,null,null,null],[4,null,null,null,6,1,5,null,null],[1,null,null,3,null,null,2,null,5],[null,null,null,null,null,null,null,null,null],[null,null,null,5,8,null,null,null,null]],[[null,null,9,null,5,null,2,null,7],[null,null,null,1,null,null,null,null,null],[2,1,null,null,6,null,4,null,5],[1,4,null,null,7,null,null,null,null],[null,6,2,null,null,null,null,null,null],[null,null,null,5,2,9,null,null,null],[null,null,null,7,null,null,null,null,8],[null,null,1,null,null,null,null,3,null],[5,8,null,null,null,null,null,null,null]],[[1,null,null,null,7,null,null,2,null],[null,null,5,null,null,null,null,null,null],[null,8,null,null,null,3,6,null,null],[6,5,null,null,3,1,null,null,null],[null,null,null,5,null,null,null,6,null],[3,null,9,null,6,null,7,null,1],[5,null,2,null,null,4,null,null,null],[null,null,null,null,null,null,null,9,null],[9,null,4,null,null,null,8,null,null]],[[9,5,null,1,null,null,2,null,null],[null,7,null,3,null,null,null,null,null],[null,null,null,null,null,2,null,6,9],[null,null,null,null,null,null,null,null,null],[null,null,null,5,null,null,null,null,null],[null,null,4,null,3,9,null,null,8],[7,null,6,null,null,null,null,null,3],[8,null,null,null,null,null,1,4,6],[3,null,null,null,null,null,null,9,5]],[[null,4,null,null,8,null,null,null,null],[null,null,null,null,9,1,6,null,null],[null,null,null,null,null,null,3,5,null],[5,null,null,null,null,null,null,null,null],[null,null,6,3,null,8,null,null,1],[null,null,7,9,null,null,null,null,null],[7,3,9,1,null,4,null,8,null],[2,8,null,null,null,null,null,null,null],[null,null,null,null,null,null,1,2,null]],[[null,8,null,5,4,null,null,null,null],[null,null,null,null,null,6,null,1,3],[null,null,null,null,null,null,8,6,null],[null,2,null,null,null,null,null,null,7],[null,null,4,null,null,null,9,null,null],[9,3,null,null,6,null,null,null,null],[null,6,null,2,null,null,7,null,null],[5,null,null,3,null,null,4,2,null],[null,null,7,null,5,1,null,null,null]],[[null,null,null,null,null,null,null,null,null],[null,8,null,7,9,1,null,null,null],[1,null,null,null,null,null,7,5,null],[null,null,null,null,3,null,null,null,null],[9,null,7,5,null,null,null,4,2],[5,null,2,9,7,4,null,null,null],[8,null,null,1,null,null,null,null,null],[null,null,null,null,2,null,null,null,9],[null,null,4,null,5,9,null,2,null]],[[null,null,null,null,null,null,null,null,null],[1,null,5,null,null,null,2,8,null],[null,null,6,null,7,8,null,null,null],[3,null,null,null,null,null,7,null,null],[null,null,8,7,1,3,null,null,4],[null,null,null,8,null,null,null,null,null],[8,null,3,null,null,null,null,4,null],[2,null,null,6,null,null,5,1,null],[null,null,null,null,null,4,null,null,7]],[[6,9,null,1,null,null,null,null,null],[null,null,null,null,3,null,null,8,null],[3,null,null,2,null,9,null,null,null],[null,null,8,null,1,null,null,3,null],[4,null,null,null,null,null,null,null,null],[5,null,null,null,null,6,8,null,null],[null,null,2,3,null,8,4,null,null],[null,null,7,null,9,4,2,null,null],[null,null,null,null,null,null,null,5,null]],[[null,null,null,null,7,null,null,1,null],[4,6,null,null,1,null,3,null,null],[null,null,5,4,null,null,null,7,null],[7,null,null,null,null,3,4,null,null],[null,null,null,null,null,null,null,null,9],[6,null,2,9,null,null,null,null,5],[null,8,null,null,2,null,5,null,null],[null,null,null,null,null,null,null,2,null],[null,5,null,null,null,null,null,9,1]]],i=[[[null,null,null,null,null,9,5,null,null],[null,4,null,null,null,2,null,null,8],[null,null,null,1,null,3,null,null,9],[null,null,6,null,null,5,null,null,null],[null,null,4,9,null,null,null,null,null],[null,null,null,2,7,6,null,3,null],[5,3,null,null,null,null,1,null,null],[null,1,null,null,null,null,null,4,5],[null,null,null,6,null,null,8,null,null]],[[null,null,3,2,null,9,5,null,null],[8,null,null,null,5,null,null,null,null],[null,null,null,null,null,null,null,null,2],[null,3,null,null,null,8,null,null,null],[null,null,null,null,null,null,6,1,null],[null,9,null,1,null,null,null,null,7],[null,null,null,null,null,6,null,null,9],[null,6,1,3,null,null,null,8,null],[null,8,5,7,null,null,3,null,null]],[[5,null,null,null,null,null,null,null,null],[null,3,null,9,6,null,null,7,null],[2,null,null,null,null,4,8,null,null],[null,null,5,null,null,null,null,8,1],[null,null,9,null,7,null,null,null,null],[1,6,null,5,null,null,null,null,7],[3,8,7,null,2,5,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,8,null,6,null]],[[2,null,null,null,8,null,null,null,null],[null,4,null,null,null,9,6,null,null],[null,null,6,2,null,null,null,null,null],[5,null,null,1,null,null,null,6,null],[6,null,null,null,null,null,3,null,null],[1,null,9,7,null,8,null,null,2],[null,null,8,null,null,null,4,3,null],[3,null,null,null,7,null,null,null,null],[null,1,null,3,null,5,null,null,null]],[[3,null,null,null,null,9,1,null,2],[null,5,8,null,null,null,9,7,null],[7,null,null,null,null,null,null,null,null],[null,null,null,null,4,3,null,null,null],[null,null,3,9,null,null,null,null,null],[9,null,null,7,null,null,null,null,null],[null,9,null,null,6,null,5,1,3],[null,null,2,null,8,null,4,null,null],[null,null,5,null,null,4,2,null,null]],[[null,null,null,1,5,null,8,3,null],[null,null,9,null,7,4,null,null,null],[null,null,null,null,null,null,null,null,6],[null,9,null,null,4,1,null,null,2],[null,null,null,null,null,3,6,5,null],[3,null,2,null,null,null,null,null,4],[null,5,null,9,null,null,null,8,3],[6,null,null,null,null,null,4,null,null],[null,2,null,null,null,null,null,null,null]],[[null,null,5,null,null,4,8,null,null],[null,1,null,null,9,2,null,null,3],[9,null,2,null,null,null,null,5,null],[null,6,null,null,null,null,null,3,9],[null,null,3,null,null,1,7,null,null],[null,null,null,null,null,null,null,null,null],[5,null,null,4,null,null,null,8,null],[6,null,null,null,3,5,null,null,null],[null,null,9,1,null,null,null,null,7]],[[8,null,null,7,null,5,9,null,null],[7,null,6,2,null,null,null,null,null],[null,9,null,null,null,null,null,7,null],[null,null,null,null,null,null,null,null,null],[null,null,null,6,null,4,null,null,3],[null,null,null,5,2,null,null,1,4],[null,null,null,null,8,null,null,null,1],[4,null,null,null,null,1,null,3,6],[null,3,8,null,null,null,2,null,null]],[[null,null,null,null,9,null,null,null,4],[null,4,null,1,null,null,null,6,null],[null,2,7,null,null,null,null,null,5],[null,9,null,null,null,null,null,null,null],[null,null,null,8,null,3,6,null,null],[null,null,6,null,null,4,1,5,null],[null,5,2,null,null,null,null,7,null],[null,null,null,4,null,8,null,null,null],[null,null,3,null,null,5,null,4,null]],[[null,null,null,null,null,null,9,null,2],[null,null,3,null,null,null,null,7,null],[null,null,2,4,8,null,null,null,null],[null,9,null,2,null,6,5,null,3],[null,null,null,null,null,1,4,null,6],[8,null,null,5,null,null,null,null,null],[null,7,null,null,null,null,null,null,null],[null,2,null,9,1,8,null,null,null],[1,6,null,null,2,null,null,null,null]]];n.getRandomVeryEasy=function(){var l=[];return t[Ql.getRandomIntBetween(0,t.length)].forEach(function(n){return l.push(n.slice())}),l},n.getRandomEasy=function(){var l=[];return e[Ql.getRandomIntBetween(0,e.length)].forEach(function(n){return l.push(n.slice())}),l},n.getRandomMedium=function(){var l=[];return u[Ql.getRandomIntBetween(0,u.length)].forEach(function(n){return l.push(n.slice())}),l},n.getRandomHard=function(){var l=[];return i[Ql.getRandomIntBetween(0,i.length)].forEach(function(n){return l.push(n.slice())}),l}}),ln=Zl(function(l,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shuffleColumns=function(l){return l=u(l),l=t(l),l=u(l)};var t=function(l){var n=[],t=[],u=[];l.forEach(function(l,e){e<3?n.push(l.slice()):e<6?t.push(l.slice()):u.push(l.slice())}),n=e(n),t=e(t),u=e(u);var i=[n,t,u],s=i.splice(Ql.getRandomIntBetween(0,i.length),1)[0],r=i.splice(Ql.getRandomIntBetween(0,i.length),1)[0],o=i[0];return l=s.concat(r,o)};n.shuffleRows=function(l){return t(l)};var e=function(l){var n=[l[0],l[1],l[2]];return l=[n.splice(Ql.getRandomIntBetween(0,n.length),1)[0],n.splice(Ql.getRandomIntBetween(0,n.length),1)[0],n[0]]},u=function(l){var n=[];l.forEach(function(l){return n.push(l.slice())});for(var t=0;t<9;t++)for(var e=0;e<9;e++)l[e][t]=n[t][e];return l};n.transponseTable=function(l){return u(l)};var i=function(l){var n=[];l.forEach(function(l){return n.push(l.slice())});for(var t=0;t<9;t++)for(var e=0;e<9;e++)l[e][t]=n[t][8-e];return l};n.rotateTable=function(l,n){for(var t=null!=n?n%4:1,e=0;e<t;e++)l=i(l);return l};var s=function(l){var n=[];l.forEach(function(l){return n.push(l.slice())});for(var t=0;t<4;t++)l[t]=n[8-t],l[8-t]=n[t];return l};n.horizontallyMirrorTable=function(l){return l=s(l)},n.verticallyMirrorTable=function(l){return l=u(l),l=s(l),l=u(l)},n.randomizeTableNumbers=function(l){var n=[1,2,3,4,5,6,7,8,9],t={1:n.splice(Ql.getRandomIntBetween(0,n.length),1)[0],2:n.splice(Ql.getRandomIntBetween(0,n.length),1)[0],3:n.splice(Ql.getRandomIntBetween(0,n.length),1)[0],4:n.splice(Ql.getRandomIntBetween(0,n.length),1)[0],5:n.splice(Ql.getRandomIntBetween(0,n.length),1)[0],6:n.splice(Ql.getRandomIntBetween(0,n.length),1)[0],7:n.splice(Ql.getRandomIntBetween(0,n.length),1)[0],8:n.splice(Ql.getRandomIntBetween(0,n.length),1)[0],9:n[0]};return l.forEach(function(n,e){n.forEach(function(n,u){n&&(l[e][u]=t[n])})}),l}}),nn=Zl(function(l,n){Object.defineProperty(n,"__esModule",{value:!0});var t=function(l){return l=ln.shuffleColumns(l),l=ln.shuffleRows(l),l=ln.rotateTable(l,Ql.getRandomIntBetween(0,4)),Ql.getRandomIntBetween(0,2)&&(l=ln.transponseTable(l)),Ql.getRandomIntBetween(0,2)&&(l=ln.horizontallyMirrorTable(l)),Ql.getRandomIntBetween(0,2)&&(l=ln.verticallyMirrorTable(l)),l=ln.randomizeTableNumbers(l)};n.getVeryEasySudoku=function(){var l=Kl.getRandomVeryEasy();return l=t(l)},n.getEasySudoku=function(){var l=Kl.getRandomEasy();return l=t(l)},n.getMediumSudoku=function(){var l=Kl.getRandomMedium();return l=t(l)},n.getHardSudoku=function(){var l=Kl.getRandomHard();return l=t(l)},n.getSudoku=function(l){switch(l+"".toLowerCase()){case"veryeasy":default:return n.getVeryEasySudoku();case"easy":return n.getEasySudoku();case"medium":return n.getMediumSudoku();case"hard":return n.getHardSudoku()}}});function tn(l){let n=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];const t=Yl(l.flat().join(""),{outputArray:!0,hintCheck:!1});for(let l=0;l<Nl;l++){const[e,u]=Pl[l];n[e][u]=t[l]}return n}const en=function(){const l=ql((()=>{const l=localStorage.getItem("settings");return l?JSON.parse(l):Hl})());return{subscribe:l.subscribe,set(n){l.set(n),localStorage.setItem("settings",JSON.stringify(n))}}}(),un=ql(0);const sn=function(){let l=1/0;const n=ql(1/0);return en.subscribe(t=>{t.hintsLimited?(l=t.hints,n.update(l=>l>t.hints?t.hints:l)):(l=1/0,n.set(1/0))}),{subscribe:n.subscribe,useHint(){n.update(l=>l>0?(un.update(l=>l+1),l-1):0)},reset(){n.set(l),un.set(0)}}}();const rn=function(){const l=ql([[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]]);return{subscribe:l.subscribe,generate(n){l.set(function(l="easy"){const n=nn.getSudoku(l);for(let l=0;l<9;l++)for(let t=0;t<9;t++)null===n[l][t]&&(n[l][t]=0);return n}(n))},decodeSencode(n){l.set(function(l){let n=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];const t=-1!==l.indexOf(jl),[e,u]=l.split(t?jl:"-"),i=Al.decode(e).toString(2).padStart(Nl,"0");let s=0;for(let l=0;l<Nl;l++)"1"===i[l]&&s++;let r=Al.decode(u).toString().padStart(s,"0").split("");for(let l=0;l<Nl;l++)if("1"===i[l]){const[t,e]=Pl[l];n[t][e]=1*r.shift()+1}return t&&(n=n.reverse().map(l=>l.reverse())),n}(n))},get:(l,n,t)=>l[t][n],getSencode:l=>Vl(l)}}();const on=function(){const l=ql([[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]]);return rn.subscribe(n=>{let t=[];for(let l=0;l<9;l++){t[l]=[];for(let e=0;e<9;e++)t[l][e]=n[l][e]}l.set(t)}),{subscribe:l.subscribe,set:(n,t)=>{l.update(l=>{const e=l.map(l=>[...l]);return e[n.y][n.x]=t,e})},applyHint:n=>{sn.useHint(),l.update(l=>{const t=tn(l);return l[n.y][n.x]=t[n.y][n.x],l})}}}(),an=Ul(on,l=>{const n=[],t=(l,t)=>{const e=l+","+t;n.includes(e)||n.push(e)};for(let n=0;n<9;n++)for(let e=0;e<9;e++){const u=l[n][e];if(u){for(let i=0;i<9;i++)i!==e&&l[n][i]===u&&t(e,n),i!==n&&l[i][e]===u&&t(e,i);const i=3*Math.floor(n/3),s=i+3,r=3*Math.floor(e/3),o=r+3;for(let a=i;a<s;a++)for(let i=r;i<o;i++)a!==n&&i!==e&&l[a][i]===u&&t(i,a)}}return n},[]),cn=ql(!0),dn=Ul([on,an],([l,n])=>{for(let n=0;n<9;n++)for(let t=0;t<9;t++)if(0===l[n][t])return!1;return 0===n.length},!1);const fn=function(){let l=null,n=null,t=null,e=0,u=!1;const i=ql("00:00");return{subscribe:i.subscribe,start(){u||(null===n&&(this.reset(),n=Date.now()),null!==t&&(e+=Date.now()-t),l=setInterval(()=>{const l=Date.now()-n-e,t=new Date(l).toISOString().substr(11,8);"00"!==t.substr(0,2)?i.set(t):i.set(t.substr(3))},10),u=!0)},stop(){u=!1,t=Date.now(),clearInterval(l)},reset(){u=!1,clearInterval(l),e=0,n=null,t=null,i.set("00:00")}}}();function hn(l){Jl.set(l),rn.generate(l),Fl.reset(),fn.reset(),sn.reset(),location.hash=""}function gn(l){Jl.setCustom(),rn.decodeSencode(l),Fl.reset(),fn.reset(),sn.reset()}function pn(){fn.stop(),cn.set(!0)}function mn(){fn.start(),cn.set(!1)}var vn={startNew:hn,startCustom:gn,pause:pn,resume:mn};const bn=ql({});const wn=function(){const l=ql(Ol);let n=!1,t=!1;return{subscribe:l.subscribe,show(e,u={}){l.set(e),bn.set(u),n=u.onHide||!1,t=u.onHideReplace||!1},hide(){t&&n?n():(l.set(Ol),n&&setTimeout(n,_l))}}}();const xn=function(){const l=ql({});return{subscribe:l.subscribe,add(n,t){l.update(l=>{const e=n.x+","+n.y,u={...l};return u.hasOwnProperty(e)?u[e].includes(t)?u[e]=u[e].filter(l=>l!==t):u[e]=[...u[e],t]:u[e]=[t],u})},clear(n){l.update(l=>{const t={...l};return delete t[n.x+","+n.y],t})}}}();const yn=function(){const l=ql([[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]]);let n=!1;return{subscribe:l.subscribe,setSolution(t){if(n)console.log("正在计算中，跳过重复计算");else try{if(n=!0,console.log("开始计算正确答案..."),!t||!Array.isArray(t)||9!==t.length)return void console.error("无效的puzzle数据");const e=new Promise((l,n)=>{setTimeout(()=>n(new Error("计算超时")),5e3)}),u=new Promise(l=>{l(tn(t))});Promise.race([u,e]).then(n=>{n&&Array.isArray(n)?(l.set(n),console.log("正确答案计算完成")):console.error("solveSudoku返回无效结果")}).catch(l=>{console.error("计算正确答案时出错:",l)}).finally(()=>{n=!1})}catch(l){console.error("setSolution执行出错:",l),n=!1}},getCorrectValue(l,n,t){if(!l||!Array.isArray(l)||t>=l.length)return 0;const e=l[t];return!Array.isArray(e)||n>=e.length?0:e[n]||0},isCorrect(l,n,t,e){if(0===n)return!0;return n===this.getCorrectValue(l,t,e)}}}();function kn(l,n,t){const e=l.slice();return e[2]=n[t][0],e[3]=n[t][1],e[5]=t,e}function $n(l){let n,t,e,u,i=l[5]+1+"";return{c(){n=z("div"),t=N(i),e=P(),B(n,"class",u="candidate row-start-"+l[2]+" col-start-"+l[3]+" svelte-11wrjqn"),V(n,"invisible",!l[0].includes(l[5]+1)),V(n,"visible",l[0].includes(l[5]+1)),V(n,"eliminate",l[1]&&l[1].includes(l[5]+1))},m(l,u){S(l,n,u),y(n,t),y(n,e)},p(l,t){1&t&&V(n,"invisible",!l[0].includes(l[5]+1)),1&t&&V(n,"visible",l[0].includes(l[5]+1)),2&t&&V(n,"eliminate",l[1]&&l[1].includes(l[5]+1))},d(l){l&&C(n)}}}function Sn(n){let t,e=Tl,u=[];for(let l=0;l<e.length;l+=1)u[l]=$n(kn(n,e,l));return{c(){t=z("div");for(let l=0;l<u.length;l+=1)u[l].c();B(t,"class","candidate-grid svelte-11wrjqn")},m(l,n){S(l,t,n);for(let l=0;l<u.length;l+=1)u[l].m(t,null)},p(l,[n]){if(3&n){let i;for(e=Tl,i=0;i<e.length;i+=1){const s=kn(l,e,i);u[i]?u[i].p(s,n):(u[i]=$n(s),u[i].c(),u[i].m(t,null))}for(;i<u.length;i+=1)u[i].d(1);u.length=e.length}},i:l,o:l,d(l){l&&C(t),M(u,l)}}}function Cn(l,n,t){let{candidates:e=[]}=n,{eliminateNums:u=[]}=n;return l.$$set=l=>{"candidates"in l&&t(0,e=l.candidates),"eliminateNums"in l&&t(1,u=l.eliminateNums)},[e,u]}class Mn extends Cl{constructor(l){super(),Sl(this,l,Cn,Sn,s,{candidates:0,eliminateNums:1})}}function zn(l){const n=l-1;return n*n*n+1}function Hn(l,{delay:t=0,duration:e=400,easing:u=n}={}){const i=+getComputedStyle(l).opacity;return{delay:t,duration:e,easing:u,css:l=>"opacity: "+l*i}}function Nn(l,{delay:n=0,duration:t=400,easing:e=zn}={}){const u=getComputedStyle(l),i=+u.opacity,s=parseFloat(u.height),r=parseFloat(u.paddingTop),o=parseFloat(u.paddingBottom),a=parseFloat(u.marginTop),c=parseFloat(u.marginBottom),d=parseFloat(u.borderTopWidth),f=parseFloat(u.borderBottomWidth);return{delay:n,duration:t,easing:e,css:l=>`overflow: hidden;opacity: ${Math.min(20*l,1)*i};height: ${l*s}px;padding-top: ${l*r}px;padding-bottom: ${l*o}px;margin-top: ${l*a}px;margin-bottom: ${l*c}px;border-top-width: ${l*d}px;border-bottom-width: ${l*f}px;`}}function Pn(l,{delay:n=0,duration:t=400,easing:e=zn,start:u=0,opacity:i=0}={}){const s=getComputedStyle(l),r=+s.opacity,o="none"===s.transform?"":s.transform,a=1-u,c=r*(1-i);return{delay:n,duration:t,easing:e,css:(l,n)=>`\n\t\t\ttransform: ${o} scale(${1-a*n});\n\t\t\topacity: ${r-c*n}\n\t\t`}}function Tn(l){let n,t,e,u,i,s,r;const o=[En,jn],a=[];function c(l,n){return l[3]?0:1}return e=c(l),u=a[e]=o[e](l),{c(){n=z("div"),t=z("button"),u.c(),B(t,"class","cell-btn svelte-1sw6xr5"),B(n,"class","cell-inner svelte-1sw6xr5"),V(n,"user-number",l[6]),V(n,"selected",l[7]),V(n,"same-area",l[8]),V(n,"same-number",l[9]),V(n,"conflicting-number",l[5]),V(n,"wrong-number",l[10])},m(u,o){S(u,n,o),y(n,t),a[e].m(t,null),i=!0,s||(r=j(t,"click",l[20]),s=!0)},p(l,i){let s=e;e=c(l),e===s?a[e].p(l,i):(hl(),ml(a[s],1,1,()=>{a[s]=null}),gl(),u=a[e],u?u.p(l,i):(u=a[e]=o[e](l),u.c()),pl(u,1),u.m(t,null)),64&i&&V(n,"user-number",l[6]),128&i&&V(n,"selected",l[7]),256&i&&V(n,"same-area",l[8]),512&i&&V(n,"same-number",l[9]),32&i&&V(n,"conflicting-number",l[5]),1024&i&&V(n,"wrong-number",l[10])},i(l){i||(pl(u),i=!0)},o(l){ml(u),i=!1},d(l){l&&C(n),a[e].d(),s=!1,r()}}}function jn(n){let t,e,u=(n[0]||"")+"";return{c(){t=z("span"),e=N(u),B(t,"class","cell-text svelte-1sw6xr5")},m(l,n){S(l,t,n),y(t,e)},p(l,n){1&n&&u!==(u=(l[0]||"")+"")&&_(e,u)},i:l,o:l,d(l){l&&C(t)}}}function En(l){let n,t;return n=new Mn({props:{candidates:l[3],eliminateNums:l[13]}}),{c(){xl(n.$$.fragment)},m(l,e){yl(n,l,e),t=!0},p(l,t){const e={};8&t&&(e.candidates=l[3]),8192&t&&(e.eliminateNums=l[13]),n.$set(e)},i(l){t||(pl(n.$$.fragment,l),t=!0)},o(l){ml(n.$$.fragment,l),t=!1},d(l){kl(n,l)}}}function Bn(l){let n,t,e,u=!l[4]&&Tn(l);return{c(){n=z("div"),u&&u.c(),B(n,"class",t="cell row-start-"+l[2]+" col-start-"+l[1]+" svelte-1sw6xr5"),V(n,"border-r",l[16]),V(n,"border-r-4",l[17]),V(n,"border-b",l[18]),V(n,"border-b-4",l[19]),V(n,"highlight-main",l[14]),V(n,"highlight-trail",l[15]),V(n,"highlight-pair",l[11]),V(n,"highlight-eliminate",l[12])},m(l,t){S(l,n,t),u&&u.m(n,null),e=!0},p(l,[i]){l[4]?u&&(hl(),ml(u,1,1,()=>{u=null}),gl()):u?(u.p(l,i),16&i&&pl(u,1)):(u=Tn(l),u.c(),pl(u,1),u.m(n,null)),(!e||6&i&&t!==(t="cell row-start-"+l[2]+" col-start-"+l[1]+" svelte-1sw6xr5"))&&B(n,"class",t),65542&i&&V(n,"border-r",l[16]),131078&i&&V(n,"border-r-4",l[17]),262150&i&&V(n,"border-b",l[18]),524294&i&&V(n,"border-b-4",l[19]),16390&i&&V(n,"highlight-main",l[14]),32774&i&&V(n,"highlight-trail",l[15]),2054&i&&V(n,"highlight-pair",l[11]),4102&i&&V(n,"highlight-eliminate",l[12])},i(l){e||(pl(u),e=!0)},o(l){ml(u),e=!1},d(l){l&&C(n),u&&u.d()}}}function On(l,n,t){let{value:e}=n,{cellX:u}=n,{cellY:i}=n,{candidates:s}=n,{disabled:r}=n,{conflictingNumber:o}=n,{userNumber:a}=n,{selected:c}=n,{sameArea:d}=n,{sameNumber:f}=n,{wrongNumber:h=!1}=n,{highlightPair:g=!1}=n,{highlightEliminate:p=!1}=n,{eliminateNums:m=[]}=n,{highlightMain:v=!1}=n,{highlightTrail:b=!1}=n;const w=9!==u&&u%3!=0,x=9!==u&&u%3==0,y=9!==i&&i%3!=0,k=9!==i&&i%3==0;return l.$$set=l=>{"value"in l&&t(0,e=l.value),"cellX"in l&&t(1,u=l.cellX),"cellY"in l&&t(2,i=l.cellY),"candidates"in l&&t(3,s=l.candidates),"disabled"in l&&t(4,r=l.disabled),"conflictingNumber"in l&&t(5,o=l.conflictingNumber),"userNumber"in l&&t(6,a=l.userNumber),"selected"in l&&t(7,c=l.selected),"sameArea"in l&&t(8,d=l.sameArea),"sameNumber"in l&&t(9,f=l.sameNumber),"wrongNumber"in l&&t(10,h=l.wrongNumber),"highlightPair"in l&&t(11,g=l.highlightPair),"highlightEliminate"in l&&t(12,p=l.highlightEliminate),"eliminateNums"in l&&t(13,m=l.eliminateNums),"highlightMain"in l&&t(14,v=l.highlightMain),"highlightTrail"in l&&t(15,b=l.highlightTrail)},[e,u,i,s,r,o,a,c,d,f,h,g,p,m,v,b,w,x,y,k,()=>{Fl.set(u-1,i-1),dispatch("click")}]}class _n extends Cl{constructor(l){super(),Sl(this,l,On,Bn,s,{value:0,cellX:1,cellY:2,candidates:3,disabled:4,conflictingNumber:5,userNumber:6,selected:7,sameArea:8,sameNumber:9,wrongNumber:10,highlightPair:11,highlightEliminate:12,eliminateNums:13,highlightMain:14,highlightTrail:15})}}function Ln(l,n,t){const e=l.slice();return e[21]=n[t],e[23]=t,e}function Rn(l,n,t){const e=l.slice();return e[24]=n[t],e[26]=t,e}function An(l){let n,t;function e(...n){return l[13](l[23],l[26],...n)}function u(...n){return l[14](l[23],l[26],...n)}function i(...n){return l[15](l[23],l[26],...n)}function s(...n){return l[16](l[23],l[26],...n)}function r(...n){return l[17](l[23],l[26],...n)}return n=new _n({props:{value:l[24],cellY:l[23]+1,cellX:l[26]+1,candidates:l[6][l[26]+","+l[23]],disabled:l[4],selected:Dn(l[7],l[26],l[23]),userNumber:0===l[2][l[23]][l[26]],sameArea:l[3].highlightCells&&!Dn(l[7],l[26],l[23])&&l[10](l[7],l[26],l[23]),sameNumber:l[3].highlightSame&&l[24]&&!Dn(l[7],l[26],l[23])&&qn(l[5],l[7])===l[24],conflictingNumber:l[3].highlightConflicting&&0===l[2][l[23]][l[26]]&&l[8].includes(l[26]+","+l[23]),wrongNumber:l[11](l[24],l[26],l[23]),highlightMain:l[1]&&l[0]&&l[0].cell&&l[0].cell.row===l[23]&&l[0].cell.col===l[26],highlightTrail:l[1]&&l[0]&&l[0].trail&&l[0].trail.some(e),highlightPair:l[0]&&l[0].cells&&l[0].cells.some(u),highlightEliminate:l[0]&&l[0].eliminate&&l[0].eliminate.find(i),eliminateNums:l[0]&&l[0].eliminate&&l[0].eliminate.find(s)?l[0].eliminate.find(r).remove:[]}}),n.$on("click",l[18]),{c(){xl(n.$$.fragment)},m(l,e){yl(n,l,e),t=!0},p(t,o){l=t;const a={};32&o&&(a.value=l[24]),64&o&&(a.candidates=l[6][l[26]+","+l[23]]),16&o&&(a.disabled=l[4]),128&o&&(a.selected=Dn(l[7],l[26],l[23])),4&o&&(a.userNumber=0===l[2][l[23]][l[26]]),136&o&&(a.sameArea=l[3].highlightCells&&!Dn(l[7],l[26],l[23])&&l[10](l[7],l[26],l[23])),168&o&&(a.sameNumber=l[3].highlightSame&&l[24]&&!Dn(l[7],l[26],l[23])&&qn(l[5],l[7])===l[24]),268&o&&(a.conflictingNumber=l[3].highlightConflicting&&0===l[2][l[23]][l[26]]&&l[8].includes(l[26]+","+l[23])),32&o&&(a.wrongNumber=l[11](l[24],l[26],l[23])),3&o&&(a.highlightMain=l[1]&&l[0]&&l[0].cell&&l[0].cell.row===l[23]&&l[0].cell.col===l[26]),3&o&&(a.highlightTrail=l[1]&&l[0]&&l[0].trail&&l[0].trail.some(e)),1&o&&(a.highlightPair=l[0]&&l[0].cells&&l[0].cells.some(u)),1&o&&(a.highlightEliminate=l[0]&&l[0].eliminate&&l[0].eliminate.find(i)),1&o&&(a.eliminateNums=l[0]&&l[0].eliminate&&l[0].eliminate.find(s)?l[0].eliminate.find(r).remove:[]),n.$set(a)},i(l){t||(pl(n.$$.fragment,l),t=!0)},o(l){ml(n.$$.fragment,l),t=!1},d(l){kl(n,l)}}}function Vn(l){let n,t,e=l[21],u=[];for(let n=0;n<e.length;n+=1)u[n]=An(Rn(l,e,n));const i=l=>ml(u[l],1,1,()=>{u[l]=null});return{c(){for(let l=0;l<u.length;l+=1)u[l].c();n=T()},m(l,e){for(let n=0;n<u.length;n+=1)u[n].m(l,e);S(l,n,e),t=!0},p(l,t){if(4095&t){let s;for(e=l[21],s=0;s<e.length;s+=1){const i=Rn(l,e,s);u[s]?(u[s].p(i,t),pl(u[s],1)):(u[s]=An(i),u[s].c(),pl(u[s],1),u[s].m(n.parentNode,n))}for(hl(),s=e.length;s<u.length;s+=1)i(s);gl()}},i(l){if(!t){for(let l=0;l<e.length;l+=1)pl(u[l]);t=!0}},o(l){u=u.filter(Boolean);for(let l=0;l<u.length;l+=1)ml(u[l]);t=!1},d(l){M(u,l),l&&C(n)}}}function In(l){let n,t,e,u,i,s,r,o,a=l[5],c=[];for(let n=0;n<a.length;n+=1)c[n]=Vn(Ln(l,a,n));const d=l=>ml(c[l],1,1,()=>{c[l]=null});return{c(){n=z("div"),t=z("div"),t.innerHTML='<div class="w-full" style="padding-top: 100%"></div>',e=P(),u=z("div"),i=z("div");for(let l=0;l<c.length;l+=1)c[l].c();B(t,"class","max-w-xl relative"),B(i,"class","bg-white shadow-2xl rounded-xl overflow-hidden w-full h-full max-w-xl grid"),V(i,"bg-gray-200",l[4]),B(u,"class","board-padding absolute inset-0 flex justify-center svelte-cdbgbq"),B(n,"class","board-padding relative z-10 svelte-cdbgbq")},m(a,d){S(a,n,d),y(n,t),y(n,e),y(n,u),y(u,i);for(let l=0;l<c.length;l+=1)c[l].m(i,null);s=!0,r||(o=j(n,"click",l[19]),r=!0)},p(l,[n]){if(4095&n){let t;for(a=l[5],t=0;t<a.length;t+=1){const e=Ln(l,a,t);c[t]?(c[t].p(e,n),pl(c[t],1)):(c[t]=Vn(e),c[t].c(),pl(c[t],1),c[t].m(i,null))}for(hl(),t=a.length;t<c.length;t+=1)d(t);gl()}16&n&&V(i,"bg-gray-200",l[4])},i(l){if(!s){for(let l=0;l<a.length;l+=1)pl(c[l]);s=!0}},o(l){c=c.filter(Boolean);for(let l=0;l<c.length;l+=1)ml(c[l]);s=!1},d(l){l&&C(n),M(c,l),r=!1,o()}}}function Dn(l,n,t){return l.x===n&&l.y===t}function qn(l,n){return null===n.x&&null===n.y?null:l[n.y][n.x]}function Un(l,n,t){let e,u,i,s,r,o,a,d;c(l,yn,l=>t(12,e=l)),c(l,rn,l=>t(2,u=l)),c(l,en,l=>t(3,i=l)),c(l,cn,l=>t(4,s=l)),c(l,on,l=>t(5,r=l)),c(l,xn,l=>t(6,o=l)),c(l,Fl,l=>t(7,a=l)),c(l,an,l=>t(8,d=l));const f=Y();let{hintDetail:h=null}=n,{highlightHint:g=!1}=n;let p=new Map;return l.$$set=l=>{"hintDetail"in l&&t(0,h=l.hintDetail),"highlightHint"in l&&t(1,g=l.highlightHint)},l.$$.update=()=>{4096&l.$$.dirty&&e&&p.clear()},[h,g,u,i,s,r,o,a,d,f,function(l,n,t){if(null===l.x&&null===l.y)return!1;if(l.x===n||l.y===t)return!0;const e=Math.floor(l.x/3),u=Math.floor(l.y/3),i=Math.floor(n/3),s=Math.floor(t/3);return e===i&&u===s},function(l,n,t){if(!i.showErrors||0===l)return!1;if(!(0===u[t][n]))return!1;const s=`${n},${t},${l}`;if(p.has(s))return p.get(s);const r=l!==(e[t]&&e[t][n]?e[t][n]:0);if(p.set(s,r),p.size>100){const l=p.keys().next().value;p.delete(l)}return r},e,(l,n,t)=>t.row===l&&t.col===n,(l,n,t)=>t.row===l&&t.col===n,(l,n,t)=>t.row===l&&t.col===n,(l,n,t)=>t.row===l&&t.col===n,(l,n,t)=>t.row===l&&t.col===n,()=>f("cellClick"),()=>f("cellClick")]}class Fn extends Cl{constructor(l){super(),Sl(this,l,Un,In,s,{hintDetail:0,highlightHint:1})}}function Jn(l,n,t){const e=l.slice();return e[8]=n[t],e}function Wn(l){let n,t,e,i,s,r,o,a,c,d,f,h,g,p,m,v=l[1]?"已定位":"定位",b=l[0].description+"",w=l[2]?"点击收起详细推理":"点击展开详细推理";function x(l,n){return l[0].strategyChain?Gn:l[0].type?Xn:void 0}let k=x(l),$=k&&k(l),M=l[2]&&l[0].reasoning&&Yn(l);return{c(){n=z("div"),t=z("div"),e=z("div"),$&&$.c(),i=P(),s=z("button"),r=N(v),o=P(),a=z("div"),c=N(b),d=P(),M&&M.c(),f=P(),h=z("div"),g=N(w),B(e,"class","strategy-chain svelte-11ffdgq"),R(e,"flex","1"),B(s,"class","locate-btn svelte-11ffdgq"),R(t,"display","flex"),R(t,"align-items","center"),R(t,"width","100%"),B(a,"class","desc svelte-11ffdgq"),B(h,"class","expand-tip svelte-11ffdgq"),B(n,"class","hint-bar svelte-11ffdgq"),R(n,"cursor","pointer")},m(u,v){S(u,n,v),y(n,t),y(t,e),$&&$.m(e,null),y(t,i),y(t,s),y(s,r),y(n,o),y(n,a),y(a,c),y(n,d),M&&M.m(n,null),y(n,f),y(n,h),y(h,g),p||(m=[j(s,"click",l[4]),j(n,"click",l[3])],p=!0)},p(l,t){k===(k=x(l))&&$?$.p(l,t):($&&$.d(1),$=k&&k(l),$&&($.c(),$.m(e,null))),2&t&&v!==(v=l[1]?"已定位":"定位")&&_(r,v),1&t&&b!==(b=l[0].description+"")&&_(c,b),l[2]&&l[0].reasoning?M?M.p(l,t):(M=Yn(l),M.c(),M.m(n,f)):M&&(M.d(1),M=null),4&t&&w!==(w=l[2]?"点击收起详细推理":"点击展开详细推理")&&_(g,w)},d(l){l&&C(n),$&&$.d(),M&&M.d(),p=!1,u(m)}}}function Xn(l){let n,t=l[0].type+"";return{c(){n=N(t)},m(l,t){S(l,n,t)},p(l,e){1&e&&t!==(t=l[0].type+"")&&_(n,t)},d(l){l&&C(n)}}}function Gn(l){let n,t=l[0].strategyChain.join(" → ")+"";return{c(){n=N(t)},m(l,t){S(l,n,t)},p(l,e){1&e&&t!==(t=l[0].strategyChain.join(" → ")+"")&&_(n,t)},d(l){l&&C(n)}}}function Yn(l){let n,t=l[0].reasoning.split("\n"),e=[];for(let n=0;n<t.length;n+=1)e[n]=Zn(Jn(l,t,n));return{c(){n=z("div");for(let l=0;l<e.length;l+=1)e[l].c();B(n,"class","reasoning svelte-11ffdgq")},m(l,t){S(l,n,t);for(let l=0;l<e.length;l+=1)e[l].m(n,null)},p(l,u){if(1&u){let i;for(t=l[0].reasoning.split("\n"),i=0;i<t.length;i+=1){const s=Jn(l,t,i);e[i]?e[i].p(s,u):(e[i]=Zn(s),e[i].c(),e[i].m(n,null))}for(;i<e.length;i+=1)e[i].d(1);e.length=t.length}},d(l){l&&C(n),M(e,l)}}}function Zn(l){let n,t,e=l[8]+"";return{c(){n=z("div"),t=N(e)},m(l,e){S(l,n,e),y(n,t)},p(l,n){1&n&&e!==(e=l[8]+"")&&_(t,e)},d(l){l&&C(n)}}}function Qn(l){let n,t,e,u=l[0]&&Wn(l);const i=l[6].default,s=d(i,l,l[5],null);return{c(){u&&u.c(),n=P(),t=z("div"),s&&s.c(),B(t,"class","actionbar-row svelte-11ffdgq")},m(l,i){u&&u.m(l,i),S(l,n,i),S(l,t,i),s&&s.m(t,null),e=!0},p(l,[t]){l[0]?u?u.p(l,t):(u=Wn(l),u.c(),u.m(n.parentNode,n)):u&&(u.d(1),u=null),s&&s.p&&(!e||32&t)&&g(s,i,l,l[5],e?h(i,l[5],t,null):p(l[5]),null)},i(l){e||(pl(s,l),e=!0)},o(l){ml(s,l),e=!1},d(l){u&&u.d(l),l&&C(n),l&&C(t),s&&s.d(l)}}}function Kn(l,n,t){let{$$slots:e={},$$scope:u}=n,{hintDetail:i=null}=n,{highlightHint:s=!1}=n,r=!1;const o=Y();return l.$$set=l=>{"hintDetail"in l&&t(0,i=l.hintDetail),"highlightHint"in l&&t(1,s=l.highlightHint),"$$scope"in l&&t(5,u=l.$$scope)},[i,s,r,function(){t(2,r=!r)},function(l){l.stopPropagation(),o("locate")},u,e]}class lt extends Cl{constructor(l){super(),Sl(this,l,Kn,Qn,s,{hintDetail:0,highlightHint:1})}}const nt=function(){const l=ql(!1);return{subscribe:l.subscribe,toggle(){l.update(l=>!l)}}}();class tt{constructor(l,n,t,e,u){this.id=l,this.name=n,this.timestamp=t,this.boardData=e,this.steps=u}save(){const l=`branchpoint_${this.id}`;localStorage.setItem(l,JSON.stringify(this))}static restore(l){const n=`branchpoint_${l}`,t=localStorage.getItem(n);if(t){const l=JSON.parse(t);return new tt(l.id,l.name,l.timestamp,l.boardData,l.steps)}return null}delete(){const l=`branchpoint_${this.id}`;localStorage.removeItem(l)}}function et(){const l=[];for(let n=0;n<localStorage.length;n++){const t=localStorage.key(n);if(t&&t.startsWith("branchpoint_")){const n=localStorage.getItem(t);if(n)try{const t=JSON.parse(n);l.push(new tt(t.id,t.name,t.timestamp,t.boardData,t.steps))}catch(l){}}}return l.sort((l,n)=>n.timestamp-l.timestamp),l}const ut=function(){const{subscribe:l,set:n,update:t}=ql(et());return{subscribe:l,add:l=>{l.save(),t(n=>{const t=[l,...n];if(t.length>10){t.pop().delete()}return t})},remove:l=>{tt.restore(l)?.delete(),t(n=>n.filter(n=>n.id!==l))},restore:l=>tt.restore(l),refresh:()=>n(et())}}();function it(l){if(!l||!l.grid)return;const n=l.grid;for(let l=0;l<n.length;l++)for(let t=0;t<n[l].length;t++)on.set({x:t,y:l},n[l][t]);if(l.candidates){for(let l=0;l<9;l++)for(let n=0;n<9;n++)xn.clear({x:n,y:l});for(const n in l.candidates){const[t,e]=n.split(",").map(Number);for(const u of l.candidates[n])xn.add({x:t,y:e},u)}}}let st=[],rt=[];const ot=ql(0),at=ql(0);function ct(){ot.set(st.length),at.set(rt.length)}function dt(){if(0===st.length)return;const l=st.pop(),n=JSON.parse(JSON.stringify(a(on))),t=JSON.parse(JSON.stringify(a(xn)));rt.push({grid:n,candidates:t}),it(l),ct()}function ft(){if(0===rt.length)return;const l=rt.pop(),n=JSON.parse(JSON.stringify(a(on))),t=JSON.parse(JSON.stringify(a(xn)));st.push({grid:n,candidates:t}),it(l),ct()}Ul([],()=>st.length>0),Ul([],()=>rt.length>0);const ht=Ul([Fl,rn,cn],([l,n,t])=>null===l.x&&null===l.y||0!==n[l.y][l.x]||t,!1);function gt(l,n,t){const e=l.slice();return e[8]=n[t],e[10]=t,e}function pt(l){let n,t,e,u,i,s,r=l[10]+1+"";function o(){return l[4](l[10])}return{c(){n=z("button"),t=N(r),e=P(),B(n,"class","btn btn-key svelte-3vbyal"),n.disabled=l[0],B(n,"title",u="Insert "+(l[10]+1))},m(l,u){S(l,n,u),y(n,t),y(n,e),i||(s=j(n,"click",o),i=!0)},p(t,e){l=t,1&e&&(n.disabled=l[0])},d(l){l&&C(n),i=!1,s()}}}function mt(l){let n,t,e,u,i,s;return{c(){n=z("button"),t=H("svg"),e=H("path"),u=P(),B(e,"stroke-linecap","round"),B(e,"stroke-linejoin","round"),B(e,"stroke-width","2"),B(e,"d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"),B(t,"class","icon-outline"),B(t,"xmlns","http://www.w3.org/2000/svg"),B(t,"fill","none"),B(t,"viewBox","0 0 24 24"),B(t,"stroke","currentColor"),B(n,"class","btn btn-key svelte-3vbyal"),n.disabled=l[0],B(n,"title","Erase Field")},m(r,o){S(r,n,o),y(n,t),y(t,e),y(n,u),i||(s=j(n,"click",l[3]),i=!0)},p(l,t){1&t&&(n.disabled=l[0])},d(l){l&&C(n),i=!1,s()}}}function vt(l){let n;let t=function(l){return 9===l[10]?mt:pt}(l),e=t(l);return{c(){e.c(),n=T()},m(l,t){e.m(l,t),S(l,n,t)},p(l,n){e.p(l,n)},d(l){e.d(l),l&&C(n)}}}function bt(n){let t,e,u,i=Array(10),s=[];for(let l=0;l<i.length;l+=1)s[l]=vt(gt(n,i,l));return{c(){t=z("div");for(let l=0;l<s.length;l+=1)s[l].c();B(t,"class","keyboard-grid svelte-3vbyal")},m(l,i){S(l,t,i);for(let l=0;l<s.length;l+=1)s[l].m(t,null);e||(u=j(window,"keydown",n[2]),e=!0)},p(l,[n]){if(3&n){let e;for(i=Array(10),e=0;e<i.length;e+=1){const u=gt(l,i,e);s[e]?s[e].p(u,n):(s[e]=vt(u),s[e].c(),s[e].m(t,null))}for(;e<s.length;e+=1)s[e].d(1);s.length=i.length}},i:l,o:l,d(l){l&&C(t),M(s,l),e=!1,u()}}}function wt(l,n,t){let e,u,i,s;function r(l){!function(){const l=JSON.parse(JSON.stringify(a(on))),n=JSON.parse(JSON.stringify(a(xn)));st.push({grid:l,candidates:n}),st.length>50&&st.shift(),rt=[],ct()}(),s||(i?(0===l?xn.clear(e):xn.add(e,l),on.set(e,0)):(u.hasOwnProperty(e.x+","+e.y)&&xn.clear(e),on.set(e,l)))}c(l,Fl,l=>t(5,e=l)),c(l,xn,l=>t(6,u=l)),c(l,nt,l=>t(7,i=l)),c(l,ht,l=>t(0,s=l));return[s,r,function(l){switch(l.key||l.keyCode){case"ArrowUp":case 38:case"w":case 87:Fl.move(0,-1);break;case"ArrowDown":case 40:case"s":case 83:Fl.move(0,1);break;case"ArrowLeft":case 37:case"a":case 65:Fl.move(-1);break;case"ArrowRight":case 39:case"d":case 68:Fl.move(1);break;case"Backspace":case 8:case"Delete":case 46:r(0);break;default:l.key&&1*l.key>=0&&1*l.key<10?r(1*l.key):l.keyCode-48>=0&&l.keyCode-48<10&&r(l.keyCode-48)}},()=>r(0),l=>r(l+1)]}class xt extends Cl{constructor(l){super(),Sl(this,l,wt,bt,s,{})}}function yt(l){let n;return{c(){n=H("path"),B(n,"stroke-linecap","round"),B(n,"stroke-linejoin","round"),B(n,"stroke-width","2"),B(n,"d","M6 3v18M18 3v18")},m(l,t){S(l,n,t)},d(l){l&&C(n)}}}function kt(l){let n;return{c(){n=H("path"),B(n,"stroke-linecap","round"),B(n,"stroke-linejoin","round"),B(n,"stroke-width","2"),B(n,"d","M18.19 9.61L9.01 3.48A2.87 2.87 0 004.54 5.88v12.25a2.87 2.87 0 004.47 2.39l9.18-6.12a2.87 2.87 0 000-4.78v0z")},m(l,t){S(l,n,t)},d(l){l&&C(n)}}}function $t(l){let n,t;return{c(){n=z("span"),t=N(l[2]),B(n,"class","timer-text svelte-1hz202d"),B(n,"title","Time")},m(l,e){S(l,n,e),y(n,t)},p(l,n){4&n&&_(t,l[2])},d(l){l&&C(n)}}}function St(n){let t,e,u,i,s,r,o;function a(l,n){return l[0]?kt:yt}let c=a(n),d=c(n),f=n[1].displayTimer&&$t(n);return{c(){t=z("div"),e=z("button"),u=H("svg"),d.c(),s=P(),f&&f.c(),B(u,"class","icon-outline"),B(u,"xmlns","http://www.w3.org/2000/svg"),B(u,"fill","none"),B(u,"viewBox","0 0 24 24"),B(u,"stroke","currentColor"),B(e,"class","btn btn-round"),B(e,"title",i=n[0]?"Resume Game":"Pause Game"),B(t,"class","timer-container svelte-1hz202d")},m(l,i){S(l,t,i),y(t,e),y(e,u),d.m(u,null),y(t,s),f&&f.m(t,null),r||(o=j(e,"click",n[3]),r=!0)},p(l,[n]){c!==(c=a(l))&&(d.d(1),d=c(l),d&&(d.c(),d.m(u,null))),1&n&&i!==(i=l[0]?"Resume Game":"Pause Game")&&B(e,"title",i),l[1].displayTimer?f?f.p(l,n):(f=$t(l),f.c(),f.m(t,null)):f&&(f.d(1),f=null)},i:l,o:l,d(l){l&&C(t),d.d(),f&&f.d(),r=!1,o()}}}function Ct(l,n,t){let e,u,i;c(l,cn,l=>t(0,e=l)),c(l,en,l=>t(1,u=l)),c(l,fn,l=>t(2,i=l));return[e,u,i,()=>e?mn():pn()]}class Mt extends Cl{constructor(l){super(),Sl(this,l,Ct,St,s,{})}}class zt{constructor(l,n){this.name=l,this.description=n}analyze(l){throw new Error("analyze method must be implemented")}calculateCandidates(l,n,t){const e=[];if(0!==l.cells[n][t].value)return e;for(let u=1;u<=9;u++)this.isValidPlacement(l,n,t,u)&&e.push(u);return e}isValidPlacement(l,n,t,e){for(let u=0;u<9;u++)if(u!==t&&l.cells[n][u].value===e)return!1;for(let u=0;u<9;u++)if(u!==n&&l.cells[u][t].value===e)return!1;const u=3*Math.floor(n/3),i=3*Math.floor(t/3);for(let s=u;s<u+3;s++)for(let u=i;u<i+3;u++)if((s!==n||u!==t)&&l.cells[s][u].value===e)return!1;return!0}}class Ht extends zt{constructor(){super("Naked Single","某个格子只有一个候选数")}analyze(l){for(let n=0;n<9;n++)for(let t=0;t<9;t++)if(0===l.cells[n][t].value){const e=this.calculateCandidates(l,n,t);if(1===e.length){const u=e[0];if(this.isValidPlacement(l,n,t,u))return{type:"Naked Single",cell:{row:n,col:t},value:u,description:`位置 (${n+1}, ${t+1}) 的候选数只有 ${u}，其他数字都已被排除`,reasoning:this.generateReasoning(l,n,t,u)}}}return null}generateReasoning(l,n,t,e){const u=[];for(let i=1;i<=9;i++)i===e||this.isValidPlacement(l,n,t,i)||u.push(i);let i="推理过程：\n";if(i+=`1. 检查位置 (${n+1}, ${t+1}) 的所有可能数字\n`,u.length>0){i+=`2. 数字 ${u.join("、")} 因为以下原因被排除：\n`;for(const e of u){i+=`   - 数字 ${e}：${this.findConflicts(l,n,t,e)}\n`}}return i+=`3. 因此，位置 (${n+1}, ${t+1}) 只能填入数字 ${e}`,i}findConflicts(l,n,t,e){const u=[];for(let i=0;i<9;i++)i!==t&&l.cells[n][i].value===e&&u.push(`第${n+1}行第${i+1}列已有${e}`);for(let i=0;i<9;i++)i!==n&&l.cells[i][t].value===e&&u.push(`第${i+1}行第${t+1}列已有${e}`);const i=3*Math.floor(n/3),s=3*Math.floor(t/3);for(let r=i;r<i+3;r++)for(let i=s;i<s+3;i++)r===n&&i===t||l.cells[r][i].value!==e||u.push(`第${r+1}行第${i+1}列已有${e}`);return u.join("，")}}class Nt extends zt{constructor(){super("Hidden Single","某行/列/宫中某个数字只能放在一个位置")}analyze(l){for(let n=0;n<9;n++){const t=this.checkUnit(l,n,"row");if(t)return t}for(let n=0;n<9;n++){const t=this.checkUnit(l,n,"col");if(t)return t}for(let n=0;n<9;n++){const t=this.checkUnit(l,n,"box");if(t)return t}return null}checkUnit(l,n,t){for(let e=1;e<=9;e++){const u=[];if("row"===t)for(let t=0;t<9;t++)0===l.cells[n][t].value&&this.isValidPlacement(l,n,t,e)&&u.push({row:n,col:t});else if("col"===t)for(let t=0;t<9;t++)0===l.cells[t][n].value&&this.isValidPlacement(l,t,n,e)&&u.push({row:t,col:n});else if("box"===t){const t=3*Math.floor(n/3),i=n%3*3;for(let n=t;n<t+3;n++)for(let t=i;t<i+3;t++)0===l.cells[n][t].value&&this.isValidPlacement(l,n,t,e)&&u.push({row:n,col:t})}if(1===u.length){const{row:i,col:s}=u[0];if(0===this.findOtherPositionsForValue(l,i,s,e).length)return{type:"Hidden Single",cell:{row:i,col:s},value:e,description:`在${"row"===t?"第"+(n+1)+"行":"col"===t?"第"+(n+1)+"列":"第"+(n+1)+"宫"}中，数字 ${e} 只能放在位置 (${i+1}, ${s+1})`,reasoning:this.generateHiddenSingleReasoning(l,n,t,e,i,s)}}}return null}findOtherPositionsForValue(l,n,t,e){const u=[];for(let i=0;i<9;i++)for(let s=0;s<9;s++)i===n&&s===t||0!==l.cells[i][s].value||!this.isValidPlacement(l,i,s,e)||u.push({row:i,col:s});return u}generateHiddenSingleReasoning(l,n,t,e,u,i){let s="推理过程：\n";s+=`1. 检查${"row"===t?"第"+(n+1)+"行":"col"===t?"第"+(n+1)+"列":"第"+(n+1)+"宫"}中数字 ${e} 的所有可能位置\n`;const r=[];if("row"===t)for(let t=0;t<9;t++)t!==i&&0===l.cells[n][t].value&&(this.isValidPlacement(l,n,t,e)||r.push(`第${n+1}行第${t+1}列`));else if("col"===t)for(let t=0;t<9;t++)t!==u&&0===l.cells[t][n].value&&(this.isValidPlacement(l,t,n,e)||r.push(`第${t+1}行第${n+1}列`));else if("box"===t){const t=3*Math.floor(n/3),s=n%3*3;for(let n=t;n<t+3;n++)for(let t=s;t<s+3;t++)n===u&&t===i||0!==l.cells[n][t].value||this.isValidPlacement(l,n,t,e)||r.push(`第${n+1}行第${t+1}列`)}return r.length>0&&(s+=`2. 以下位置不能放置数字 ${e}：${r.join("、")}\n`),s+=`3. 因此，数字 ${e} 只能放在位置 (${u+1}, ${i+1})`,s}}class Pt extends zt{constructor(){super("Pointing Pairs","某个宫中的某个数字只能放在一行或一列中，可以排除该行/列其他宫中的该数字")}analyze(l){for(let n=0;n<9;n++){const t=3*Math.floor(n/3),e=n%3*3;for(let u=1;u<=9;u++){const i=[];for(let n=t;n<t+3;n++)for(let t=e;t<e+3;t++)0===l.cells[n][t].value&&this.isValidPlacement(l,n,t,u)&&i.push({row:n,col:t});if(i.length>=2){const s=[...new Set(i.map(l=>l.row))];if(1===s.length){const t=s[0],r=this.findEliminatePositions(l,t,"row",e,u);if(r.length>0){const e=i[0];if(this.isValidPlacement(l,e.row,e.col,u))return{type:"Pointing Pairs",cell:e,value:u,eliminate:r,description:`第${n+1}宫中的数字 ${u} 只能放在第${t+1}行，可以排除该行其他宫中的数字 ${u}`,reasoning:this.generatePointingPairsReasoning(l,n,u,t,"row",r)}}}const r=[...new Set(i.map(l=>l.col))];if(1===r.length){const e=r[0],s=this.findEliminatePositions(l,e,"col",t,u);if(s.length>0){const t=i[0];if(this.isValidPlacement(l,t.row,t.col,u))return{type:"Pointing Pairs",cell:t,value:u,eliminate:s,description:`第${n+1}宫中的数字 ${u} 只能放在第${e+1}列，可以排除该列其他宫中的数字 ${u}`,reasoning:this.generatePointingPairsReasoning(l,n,u,e,"col",s)}}}}}}return null}findEliminatePositions(l,n,t,e,u){const i=[];if("row"===t)for(let t=0;t<9;t++){Math.floor(t/3)!==Math.floor(e/3)&&0===l.cells[n][t].value&&this.isValidPlacement(l,n,t,u)&&i.push({row:n,col:t})}else if("col"===t)for(let t=0;t<9;t++){Math.floor(t/3)!==Math.floor(e/3)&&0===l.cells[t][n].value&&this.isValidPlacement(l,t,n,u)&&i.push({row:t,col:n})}return i}generatePointingPairsReasoning(l,n,t,e,u,i){const s=3*Math.floor(n/3),r=n%3*3;let o="推理过程：\n";o+=`1. 检查第${n+1}宫（位置${s+1}-${s+3}行，${r+1}-${r+3}列）中数字 ${t} 的所有可能位置\n`;const a=[];for(let n=s;n<s+3;n++)for(let e=r;e<r+3;e++)0===l.cells[n][e].value&&this.isValidPlacement(l,n,e,t)&&a.push(`(${n+1}, ${e+1})`);if(o+=`2. 数字 ${t} 在该宫中的可能位置：${a.join("、")}\n`,o+=`3. 这些位置都在第${e+1}${"row"===u?"行":"列"}中\n`,o+="4. 根据数独规则，如果某个宫中的数字只能放在一行或一列中，那么该行/列的其他宫中就不能再放置该数字\n",i.length>0){o+=`5. 因此可以排除第${e+1}${"row"===u?"行":"列"}其他宫中的数字 ${t}：${i.map(l=>`(${l.row+1}, ${l.col+1})`).join("、")}\n`}return o+=`6. 数字 ${t} 只能放在位置 (${s+1}, ${r+1})`,o}}class Tt{constructor(){this.strategies=[new Ht,new Nt,new Pt]}getNextHint(l){if(!this.validateBoard(l))return console.error("棋盘状态不合法，无法提供提示"),null;for(const n of this.strategies){console.log(`Trying strategy: ${n.constructor.name}`);const t=n.analyze(l);if(t){if(this.strictValidateHint(l,t))return t.strategy=n.constructor.name,console.log(`Found valid hint with strategy: ${n.constructor.name}`,t),t;console.log("Invalid hint found, skipping:",t)}}return console.log("No valid hints found"),null}validateBoard(l){if(!l||!l.cells||!Array.isArray(l.cells))return!1;for(let n=0;n<9;n++)for(let t=0;t<9;t++){if(0!==l.cells[n][t].value){const e=l.cells[n][t].value;l.cells[n][t].value=0;const u=this.isValidPlacement(l,n,t,e);if(l.cells[n][t].value=e,!u)return console.error(`棋盘冲突：位置 (${n+1}, ${t+1}) 的数字 ${e} 与现有数字冲突`),!1}}return!0}strictValidateHint(l,n){try{return"Naked Single"===n.type||"Hidden Single"===n.type?this.validateSingleHint(l,n):"Pointing Pairs"===n.type&&this.validatePointingPairsHint(l,n)}catch(l){return console.error("验证提示时出错:",l),!1}}validateSingleHint(l,n){const{row:t,col:e}=n.cell,u=n.value;if(0!==l.cells[t][e].value)return console.error(`位置 (${t+1}, ${e+1}) 已有数字 ${l.cells[t][e].value}`),!1;if(!this.isValidPlacement(l,t,e,u))return console.error(`数字 ${u} 不能放在位置 (${t+1}, ${e+1})`),!1;const i=this.calculateCandidates(l,t,e);if("Naked Single"===n.type){if(1!==i.length||i[0]!==u)return console.error(`Naked Single验证失败：候选数为 [${i.join(",")}]，但提示值为 ${u}`),!1}else if("Hidden Single"===n.type){const n=this.findOtherPositionsForValue(l,t,e,u);if(n.length>0)return console.error(`Hidden Single验证失败：数字 ${u} 还可以放在其他位置:`,n),!1}return!0}validatePointingPairsHint(l,n){const{row:t,col:e}=n.cell,u=n.value;if(0!==l.cells[t][e].value)return console.error(`主要格子 (${t+1}, ${e+1}) 已有数字`),!1;if(!this.isValidPlacement(l,t,e,u))return console.error(`数字 ${u} 不能放在主要格子 (${t+1}, ${e+1})`),!1;if(!n.eliminate||0===n.eliminate.length)return console.error("Pointing Pairs没有提供排除位置"),!1;for(const t of n.eliminate){if(0!==l.cells[t.row][t.col].value)return console.error(`排除位置 (${t.row+1}, ${t.col+1}) 已有数字`),!1;if(!this.isValidPlacement(l,t.row,t.col,u))return console.error(`排除位置 (${t.row+1}, ${t.col+1}) 本来就不能放数字 ${u}`),!1}return!0}calculateCandidates(l,n,t){const e=[];if(0!==l.cells[n][t].value)return e;for(let u=1;u<=9;u++)this.isValidPlacement(l,n,t,u)&&e.push(u);return e}findOtherPositionsForValue(l,n,t,e){const u=[];for(let i=0;i<9;i++)for(let s=0;s<9;s++)i===n&&s===t||0!==l.cells[i][s].value||!this.isValidPlacement(l,i,s,e)||u.push({row:i,col:s});return u}isValidPlacement(l,n,t,e){for(let u=0;u<9;u++)if(u!==t&&l.cells[n][u].value===e)return!1;for(let u=0;u<9;u++)if(u!==n&&l.cells[u][t].value===e)return!1;const u=3*Math.floor(n/3),i=3*Math.floor(t/3);for(let s=u;s<u+3;s++)for(let u=i;u<i+3;u++)if((s!==n||u!==t)&&l.cells[s][u].value===e)return!1;return!0}}class jt{constructor(l,n,t=0,e=!1,u=!1,i=[]){this.row=l,this.col=n,this.value=t,this.isFixed=e,this.isOriginal=u,this.candidates=i}updateValue(l){this.value=l}addCandidate(l){this.candidates.includes(l)||this.candidates.push(l)}removeCandidate(l){this.candidates=this.candidates.filter(n=>n!==l)}}class Et{constructor(l=null,n="未知",t="未开始"){this.cells=l||Et.createEmptyCells(),this.difficulty=n,this.status=t}static createEmptyCells(){const l=[];for(let n=0;n<9;n++){const t=[];for(let l=0;l<9;l++)t.push(new jt(n,l));l.push(t)}return l}validate(){const l=l=>{const n=l.filter(l=>0!==l.value).map(l=>l.value);return new Set(n).size===n.length};for(let n=0;n<9;n++)if(!l(this.cells[n]))return!1;for(let n=0;n<9;n++){const t=[];for(let l=0;l<9;l++)t.push(this.cells[l][n]);if(!l(t))return!1}for(let n=0;n<3;n++)for(let t=0;t<3;t++){const e=[];for(let l=0;l<3;l++)for(let u=0;u<3;u++)e.push(this.cells[3*n+l][3*t+u]);if(!l(e))return!1}return!0}generateCandidates(){for(let l=0;l<9;l++)for(let n=0;n<9;n++){const t=this.cells[l][n];if(0===t.value){t.candidates=[];for(let l=1;l<=9;l++)t.value=l,this.validate()&&t.candidates.push(l),t.value=0}else t.candidates=[]}}async loadFromUrl(l){throw new Error("loadFromUrl方法待实现")}}function Bt(l,n,t){const e=l.slice();return e[44]=n[t],e}function Ot(l){let n,t;return{c(){n=z("span"),t=N(l[0]),B(n,"class","badge svelte-482f1g"),V(n,"badge-primary",l[10])},m(l,e){S(l,n,e),y(n,t)},p(l,e){1&e[0]&&_(t,l[0]),1024&e[0]&&V(n,"badge-primary",l[10])},d(l){l&&C(n)}}}function _t(l){let n,t;return{c(){n=H("svg"),t=H("path"),B(t,"stroke-linecap","round"),B(t,"stroke-linejoin","round"),B(t,"stroke-width","2"),B(t,"d","M13 16h-1v-4h-1m4 0h-1v-4h-1"),B(n,"class","icon-outline"),B(n,"xmlns","http://www.w3.org/2000/svg"),B(n,"fill","none"),B(n,"viewBox","0 0 24 24"),B(n,"stroke","currentColor")},m(l,e){S(l,n,e),y(n,t)},d(l){l&&C(n)}}}function Lt(l){let n,t;return{c(){n=H("svg"),t=H("path"),B(t,"stroke-linecap","round"),B(t,"stroke-linejoin","round"),B(t,"stroke-width","2"),B(t,"d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"),B(n,"class","icon-outline animate-spin"),B(n,"xmlns","http://www.w3.org/2000/svg"),B(n,"fill","none"),B(n,"viewBox","0 0 24 24"),B(n,"stroke","currentColor")},m(l,e){S(l,n,e),y(n,t)},d(l){l&&C(n)}}}function Rt(l){let n,t,e,i,s,r,o,a,c,d,f,h,g,p,m,v,b,w,x,k,$=l[4]&&At(l),H=l[12],N=[];for(let n=0;n<H.length;n+=1)N[n]=Dt(Bt(l,H,n));let T=0===l[12].length&&qt();return{c(){n=z("div"),t=z("div"),e=P(),i=z("div"),s=z("h2"),s.textContent="分支点管理",r=P(),o=z("div"),a=z("input"),c=P(),d=z("button"),d.textContent="标记分支点",f=P(),$&&$.c(),h=P(),g=z("div"),g.textContent="最多保存10个分支点，按时间排序",p=P(),m=z("ul");for(let l=0;l<N.length;l+=1)N[l].c();v=P(),T&&T.c(),b=P(),w=z("button"),w.textContent="关闭",B(t,"class","absolute inset-0 bg-black bg-opacity-30"),B(s,"class","text-lg font-bold mb-2"),B(a,"class","input input-bordered flex-1 mr-2"),B(a,"placeholder","分支点名称（可选）"),B(d,"class","btn btn-primary"),B(o,"class","mb-2 flex"),B(g,"class","text-xs text-gray-500 mb-2"),B(m,"class","divide-y max-h-60 overflow-y-auto"),B(w,"class","btn btn-block mt-4"),B(i,"class","fixed top-0 right-0 h-full w-80 bg-white shadow-2xl p-6 z-50 flex flex-col"),B(n,"class","fixed inset-0 z-40")},m(u,C){S(u,n,C),y(n,t),y(n,e),y(n,i),y(i,s),y(i,r),y(i,o),y(o,a),L(a,l[3]),y(o,c),y(o,d),y(i,f),$&&$.m(i,null),y(i,h),y(i,g),y(i,p),y(i,m);for(let l=0;l<N.length;l+=1)N[l].m(m,null);y(i,v),T&&T.m(i,null),y(i,b),y(i,w),x||(k=[j(t,"click",l[33]),j(a,"input",l[34]),j(d,"click",l[22]),j(w,"click",l[39])],x=!0)},p(l,n){if(8&n[0]&&a.value!==l[3]&&L(a,l[3]),l[4]?$?$.p(l,n):($=At(l),$.c(),$.m(i,h)):$&&($.d(1),$=null),1686114400&n[0]|1&n[1]){let t;for(H=l[12],t=0;t<H.length;t+=1){const e=Bt(l,H,t);N[t]?N[t].p(e,n):(N[t]=Dt(e),N[t].c(),N[t].m(m,null))}for(;t<N.length;t+=1)N[t].d(1);N.length=H.length}0===l[12].length?T||(T=qt(),T.c(),T.m(i,b)):T&&(T.d(1),T=null)},d(l){l&&C(n),$&&$.d(),M(N,l),T&&T.d(),x=!1,u(k)}}}function At(l){let n,t;return{c(){n=z("div"),t=N(l[4]),B(n,"class","text-red-500 mb-2")},m(l,e){S(l,n,e),y(n,t)},p(l,n){16&n[0]&&_(t,l[4])},d(l){l&&C(n)}}}function Vt(l){let n,t,e,i,s,r,o,a,c,d,f,h,g,p,m,v,b,w,x=l[44].name+"",k=new Date(l[44].timestamp).toLocaleString()+"",$=l[44].steps+"";function M(){return l[36](l[44])}function H(){return l[37](l[44])}function T(){return l[38](l[44])}return{c(){n=z("div"),t=z("div"),e=z("div"),i=N(x),s=P(),r=z("div"),o=N(k),a=N(" | 步数: "),c=N($),d=P(),f=z("div"),h=z("button"),h.textContent="✏️",g=P(),p=z("button"),p.textContent="↩️",m=P(),v=z("button"),v.textContent="🗑️",B(e,"class","font-semibold text-sm"),B(r,"class","text-xs text-gray-500"),B(t,"class","flex-1"),B(h,"class","btn btn-xs btn-info"),B(h,"title","重命名"),B(p,"class","btn btn-xs btn-success"),B(p,"title","回溯"),B(v,"class","btn btn-xs btn-error"),B(v,"title","删除"),B(f,"class","flex space-x-1"),B(n,"class","flex items-center justify-between")},m(l,u){S(l,n,u),y(n,t),y(t,e),y(e,i),y(t,s),y(t,r),y(r,o),y(r,a),y(r,c),y(n,d),y(n,f),y(f,h),y(f,g),y(f,p),y(f,m),y(f,v),b||(w=[j(h,"click",M),j(p,"click",H),j(v,"click",T)],b=!0)},p(n,t){l=n,4096&t[0]&&x!==(x=l[44].name+"")&&_(i,x),4096&t[0]&&k!==(k=new Date(l[44].timestamp).toLocaleString()+"")&&_(o,k),4096&t[0]&&$!==($=l[44].steps+"")&&_(c,$)},d(l){l&&C(n),b=!1,u(w)}}}function It(l){let n,t,e,i,s,r,o,a;return{c(){n=z("div"),t=z("input"),e=P(),i=z("button"),i.textContent="保存",s=P(),r=z("button"),r.textContent="取消",B(t,"class","input input-bordered flex-1 text-sm"),B(i,"class","btn btn-xs btn-success"),B(r,"class","btn btn-xs"),B(n,"class","flex items-center space-x-2")},m(u,c){S(u,n,c),y(n,t),L(t,l[6]),y(n,e),y(n,i),y(n,s),y(n,r),o||(a=[j(t,"input",l[35]),j(i,"click",l[30]),j(r,"click",l[31])],o=!0)},p(l,n){64&n[0]&&t.value!==l[6]&&L(t,l[6])},d(l){l&&C(n),o=!1,u(a)}}}function Dt(l){let n,t;function e(l,n){return l[5]===l[44].id?It:Vt}let u=e(l),i=u(l);return{c(){n=z("li"),i.c(),t=P(),B(n,"class","py-2")},m(l,e){S(l,n,e),i.m(n,null),y(n,t)},p(l,s){u===(u=e(l))&&i?i.p(l,s):(i.d(1),i=u(l),i&&(i.c(),i.m(n,t)))},d(l){l&&C(n),i.d()}}}function qt(l){let n;return{c(){n=z("div"),n.textContent="暂无分支点",B(n,"class","text-center text-gray-500 py-4")},m(l,t){S(l,n,t)},d(l){l&&C(n)}}}function Ut(n){let t,e,i,s,r,o,a,c,d;return{c(){t=z("div"),e=z("div"),i=z("div"),i.textContent="确定回溯至该分支点？当前操作将被覆盖。",s=P(),r=z("button"),r.textContent="确认",o=P(),a=z("button"),a.textContent="取消",B(i,"class","mb-4"),B(r,"class","btn btn-primary w-full mb-2"),B(a,"class","btn w-full"),B(e,"class","bg-white p-6 rounded shadow-xl max-w-xs"),B(t,"class","fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-30")},m(l,u){S(l,t,u),y(t,e),y(e,i),y(e,s),y(e,r),y(e,o),y(e,a),c||(d=[j(r,"click",n[27]),j(a,"click",n[28])],c=!0)},p:l,d(l){l&&C(t),c=!1,u(d)}}}function Ft(l){let n,t,e,i,s,r,o,a,c,d,f,h;return{c(){n=z("div"),t=z("div"),e=z("div"),i=N("确定删除分支点“"),s=N(l[9]),r=N("”？此操作不可逆。"),o=P(),a=z("button"),a.textContent="确认",c=P(),d=z("button"),d.textContent="取消",B(e,"class","mb-4"),B(a,"class","btn btn-primary w-full mb-2"),B(d,"class","btn w-full"),B(t,"class","bg-white p-6 rounded shadow-xl max-w-xs"),B(n,"class","fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-30")},m(u,g){S(u,n,g),y(n,t),y(t,e),y(e,i),y(e,s),y(e,r),y(t,o),y(t,a),y(t,c),y(t,d),f||(h=[j(a,"click",l[24]),j(d,"click",l[25])],f=!0)},p(l,n){512&n[0]&&_(s,l[9])},d(l){l&&C(n),f=!1,u(h)}}}function Jt(n){let t,e,i,s,r,o,a,c,d,f,h,g,p,m,v,b,w,x,k,$,M,E,O,L,R,A,I,D,q,U,F,J,W,X,G,Y,Z,Q,K,ll=n[1]?"...":"?",nl=n[19]?"ON":"OFF",tl=n[18].hintsLimited&&Ot(n);function el(l,n){return l[1]?Lt:_t}let ul=el(n),il=ul(n),sl=n[2]&&Rt(n),rl=n[7]&&Ut(n),ol=n[8]&&Ft(n);return{c(){t=z("div"),e=z("button"),e.innerHTML='<svg class="icon-outline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 12h6m0 0l-3-3m3 3l-3 3m6-6v12"></path></svg>',i=P(),s=z("button"),r=H("svg"),o=H("path"),c=P(),d=z("button"),f=H("svg"),h=H("path"),p=P(),m=z("button"),v=H("svg"),b=H("path"),w=P(),tl&&tl.c(),$=P(),M=z("button"),il.c(),E=P(),O=z("span"),L=N(ll),A=P(),I=z("button"),D=H("svg"),q=H("path"),U=P(),F=z("span"),J=N(nl),X=P(),sl&&sl.c(),G=P(),rl&&rl.c(),Y=P(),ol&&ol.c(),Z=T(),B(e,"class","btn btn-round"),B(e,"title","分支点"),B(o,"stroke-linecap","round"),B(o,"stroke-linejoin","round"),B(o,"stroke-width","2"),B(o,"d","M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"),B(r,"class","icon-outline"),B(r,"xmlns","http://www.w3.org/2000/svg"),B(r,"fill","none"),B(r,"viewBox","0 0 24 24"),B(r,"stroke","currentColor"),B(s,"class","btn btn-round"),s.disabled=a=n[15]||0===n[11],B(s,"title","Undo"),B(h,"stroke-linecap","round"),B(h,"stroke-linejoin","round"),B(h,"stroke-width","2"),B(h,"d","M21 10h-10a8 8 90 00-8 8v2M21 10l-6 6m6-6l-6-6"),B(f,"class","icon-outline"),B(f,"xmlns","http://www.w3.org/2000/svg"),B(f,"fill","none"),B(f,"viewBox","0 0 24 24"),B(f,"stroke","currentColor"),B(d,"class","btn btn-round"),d.disabled=g=n[15]||0===n[16],B(d,"title","Redo"),B(b,"stroke-linecap","round"),B(b,"stroke-linejoin","round"),B(b,"stroke-width","2"),B(b,"d","M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"),B(v,"class","icon-outline"),B(v,"xmlns","http://www.w3.org/2000/svg"),B(v,"fill","none"),B(v,"viewBox","0 0 24 24"),B(v,"stroke","currentColor"),B(m,"class","btn btn-round btn-badge svelte-482f1g"),m.disabled=x=n[17]||!n[10]||0!==n[13][n[14].y][n[14].x],B(m,"title",k="Hints ("+n[0]+")"),B(O,"class","badge svelte-482f1g"),B(M,"class","btn btn-round btn-badge svelte-482f1g"),M.disabled=n[1],B(M,"title",R=n[1]?"正在计算...":"下一步提示"),B(q,"stroke-linecap","round"),B(q,"stroke-linejoin","round"),B(q,"stroke-width","2"),B(q,"d","M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"),B(D,"class","icon-outline"),B(D,"xmlns","http://www.w3.org/2000/svg"),B(D,"fill","none"),B(D,"viewBox","0 0 24 24"),B(D,"stroke","currentColor"),B(F,"class","badge tracking-tighter svelte-482f1g"),V(F,"badge-primary",n[19]),B(I,"class","btn btn-round btn-badge svelte-482f1g"),B(I,"title",W="Notes ("+(n[19]?"ON":"OFF")+")"),B(t,"class","action-buttons space-x-3 svelte-482f1g")},m(l,u){S(l,t,u),y(t,e),y(t,i),y(t,s),y(s,r),y(r,o),y(t,c),y(t,d),y(d,f),y(f,h),y(t,p),y(t,m),y(m,v),y(v,b),y(m,w),tl&&tl.m(m,null),y(t,$),y(t,M),il.m(M,null),y(M,E),y(M,O),y(O,L),y(t,A),y(t,I),y(I,D),y(D,q),y(I,U),y(I,F),y(F,J),S(l,X,u),sl&&sl.m(l,u),S(l,G,u),rl&&rl.m(l,u),S(l,Y,u),ol&&ol.m(l,u),S(l,Z,u),Q||(K=[j(e,"click",n[32]),j(s,"click",dt),j(d,"click",ft),j(m,"click",n[20]),j(M,"click",n[21]),j(I,"click",nt.toggle)],Q=!0)},p(l,n){34816&n[0]&&a!==(a=l[15]||0===l[11])&&(s.disabled=a),98304&n[0]&&g!==(g=l[15]||0===l[16])&&(d.disabled=g),l[18].hintsLimited?tl?tl.p(l,n):(tl=Ot(l),tl.c(),tl.m(m,null)):tl&&(tl.d(1),tl=null),156672&n[0]&&x!==(x=l[17]||!l[10]||0!==l[13][l[14].y][l[14].x])&&(m.disabled=x),1&n[0]&&k!==(k="Hints ("+l[0]+")")&&B(m,"title",k),ul!==(ul=el(l))&&(il.d(1),il=ul(l),il&&(il.c(),il.m(M,E))),2&n[0]&&ll!==(ll=l[1]?"...":"?")&&_(L,ll),2&n[0]&&(M.disabled=l[1]),2&n[0]&&R!==(R=l[1]?"正在计算...":"下一步提示")&&B(M,"title",R),524288&n[0]&&nl!==(nl=l[19]?"ON":"OFF")&&_(J,nl),524288&n[0]&&V(F,"badge-primary",l[19]),524288&n[0]&&W!==(W="Notes ("+(l[19]?"ON":"OFF")+")")&&B(I,"title",W),l[2]?sl?sl.p(l,n):(sl=Rt(l),sl.c(),sl.m(G.parentNode,G)):sl&&(sl.d(1),sl=null),l[7]?rl?rl.p(l,n):(rl=Ut(l),rl.c(),rl.m(Y.parentNode,Y)):rl&&(rl.d(1),rl=null),l[8]?ol?ol.p(l,n):(ol=Ft(l),ol.c(),ol.m(Z.parentNode,Z)):ol&&(ol.d(1),ol=null)},i:l,o:l,d(l){l&&C(t),tl&&tl.d(),il.d(),l&&C(X),sl&&sl.d(l),l&&C(G),rl&&rl.d(l),l&&C(Y),ol&&ol.d(l),l&&C(Z),Q=!1,u(K)}}}function Wt(l,n,t){let e,u,i,s,r,o,d,f,h,g,p,m;c(l,ot,l=>t(11,u=l)),c(l,ut,l=>t(12,i=l)),c(l,on,l=>t(13,s=l)),c(l,Fl,l=>t(14,r=l)),c(l,xn,l=>t(40,o=l)),c(l,sn,l=>t(0,d=l)),c(l,cn,l=>t(15,f=l)),c(l,at,l=>t(16,h=l)),c(l,ht,l=>t(17,g=l)),c(l,en,l=>t(18,p=l)),c(l,nt,l=>t(19,m=l));const v=Y();let b=!1,w=!1,x="",y="",k=null,$="",S=null,C=null,M="";function z(l,n){t(8,C=l),t(9,M=n)}function H(l){t(7,S=l)}function N(l,n){t(5,k=l),t(6,$=n)}return l.$$.update=()=>{1&l.$$.dirty[0]&&t(10,e=d>0)},[d,b,w,x,y,k,$,S,C,M,e,u,i,s,r,f,h,g,p,m,function(){e&&(o.hasOwnProperty(r.x+","+r.y)&&xn.clear(r),on.applyHint(r))},async function(){if(!b)try{if(t(1,b=!0),console.log("Getting next hint..."),!s)throw new Error("userGrid store is not available");console.log("UserGrid state:",s);const l=new Et;console.log("Board created:",l);for(let n=0;n<9;n++)for(let t=0;t<9;t++){const e=s[n][t];if(0!==e){l.cells[n][t].value=e;const u=a(rn);l.cells[n][t].isOriginal=0!==u[n][t]}}console.log("Board state after filling:",l.cells);const n=new Tt;console.log("StrategyEngine created:",n);const e=n.getNextHint(l);console.log("StrategyEngine result:",e),e?v("updateHintDetail",e):(console.log("No hint found"),alert("当前没有可用的提示策略"))}catch(l){console.error("获取提示时出错:",l),console.error("Error stack:",l.stack),alert(`获取提示时出现错误：${l.message}`)}finally{t(1,b=!1)}},function(){if(ut&&i.length>=10)return void t(4,y="最多保存10个分支点，请先删除部分分支点");const l=x.trim()||`分支点 - ${(new Date).toLocaleTimeString()}`,n=Date.now().toString(),e=Date.now(),s=JSON.stringify({grid:JSON.parse(JSON.stringify(a(on))),candidates:JSON.parse(JSON.stringify(a(xn)))}),r=new tt(n,l,e,s,u);ut.add(r),t(3,x=""),t(4,y=""),t(2,w=!1)},z,function(){ut.remove(C),t(8,C=null),t(9,M="")},function(){t(8,C=null),t(9,M="")},H,function(){const l=ut.restore(S);l&&l.boardData&&it(JSON.parse(l.boardData)),t(7,S=null),t(2,w=!1)},function(){t(7,S=null)},N,function(){if(k&&$.trim()){const l=ut.restore(k);l&&(l.name=$.trim(),l.save(),ut.refresh())}t(5,k=null),t(6,$="")},function(){t(5,k=null),t(6,$="")},()=>t(2,w=!0),()=>t(2,w=!1),function(){x=this.value,t(3,x)},function(){$=this.value,t(6,$)},l=>N(l.id,l.name),l=>H(l.id),l=>z(l.id,l.name),()=>t(2,w=!1)]}class Xt extends Cl{constructor(l){super(),Sl(this,l,Wt,Jt,s,{},null,[-1,-1])}}function Gt(n){let t,e,u,i;return t=new Mt({}),u=new Xt({}),u.$on("updateHintDetail",n[2]),{c(){xl(t.$$.fragment),e=P(),xl(u.$$.fragment)},m(l,n){yl(t,l,n),S(l,e,n),yl(u,l,n),i=!0},p:l,i(l){i||(pl(t.$$.fragment,l),pl(u.$$.fragment,l),i=!0)},o(l){ml(t.$$.fragment,l),ml(u.$$.fragment,l),i=!1},d(l){kl(t,l),l&&C(e),kl(u,l)}}}function Yt(l){let n,t,e,u,i,s,r,o;return e=new Fn({props:{hintDetail:l[0],highlightHint:l[1]}}),e.$on("cellClick",l[3]),i=new lt({props:{hintDetail:l[0],highlightHint:l[1],$$slots:{default:[Gt]},$$scope:{ctx:l}}}),i.$on("locate",l[4]),r=new xt({}),{c(){n=z("div"),t=z("div"),xl(e.$$.fragment),u=P(),xl(i.$$.fragment),s=P(),xl(r.$$.fragment),B(t,"class","w-full max-w-xl"),B(n,"class","px-4 pb-5 flex justify-center")},m(l,a){S(l,n,a),y(n,t),yl(e,t,null),y(t,u),yl(i,t,null),y(t,s),yl(r,t,null),o=!0},p(l,[n]){const t={};1&n&&(t.hintDetail=l[0]),2&n&&(t.highlightHint=l[1]),e.$set(t);const u={};1&n&&(u.hintDetail=l[0]),2&n&&(u.highlightHint=l[1]),32&n&&(u.$$scope={dirty:n,ctx:l}),i.$set(u)},i(l){o||(pl(e.$$.fragment,l),pl(i.$$.fragment,l),pl(r.$$.fragment,l),o=!0)},o(l){ml(e.$$.fragment,l),ml(i.$$.fragment,l),ml(r.$$.fragment,l),o=!1},d(l){l&&C(n),kl(e),kl(i),kl(r)}}}function Zt(l,n,t){let e=null,u=!1;return[e,u,function(l){t(0,e=l.detail),t(1,u=!1)},function(){t(1,u=!1)},function(){t(1,u=!0)}]}class Qt extends Cl{constructor(l){super(),Sl(this,l,Zt,Yt,s,{})}}function Kt(n){let t,e,i,s,r,o,a,c;return{c(){t=z("div"),e=z("button"),e.innerHTML='<svg class="icon-outline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path></svg>',i=P(),s=z("button"),s.innerHTML='<svg class="icon-outline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>',r=P(),o=z("button"),o.innerHTML='<svg class="icon-outline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',B(e,"class","btn btn-header svelte-1nzzt95"),B(e,"title","Share this Sudoku puzzle"),B(s,"class","btn btn-header svelte-1nzzt95"),B(s,"title","Strategy Learning"),B(o,"class","btn btn-header svelte-1nzzt95"),B(o,"title","Open Settings"),B(t,"class","flex justify-evenly space-x-3")},m(l,u){S(l,t,u),y(t,e),y(t,i),y(t,s),y(t,r),y(t,o),a||(c=[j(e,"click",n[0]),j(s,"click",n[2]),j(o,"click",n[1])],a=!0)},p:l,i:l,o:l,d(l){l&&C(t),a=!1,u(c)}}}function le(l){return[function(){pn(),wn.show("share",{onHide:mn})},function(){pn(),wn.show("settings",{onHide:mn})},function(){pn(),wn.show("strategyLearning",{onHide:mn})}]}class ne extends Cl{constructor(l){super(),Sl(this,l,le,Kt,s,{})}}function te(l,n,t){const e=l.slice();return e[8]=n[t][0],e[9]=n[t][1],e}function ee(l){let n,t,e,i,s,r,o,a,c,d,f,h,g,p,m=Object.entries(zl),v=[];for(let n=0;n<m.length;n+=1)v[n]=ue(te(l,m,n));return{c(){n=z("button"),e=P(),i=z("div");for(let l=0;l<v.length;l+=1)v[l].c();s=P(),r=z("hr"),o=P(),a=z("a"),a.innerHTML='<svg class="icon-solid" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd"></path></svg> \n\n\t\t\t\t<span class="align-middle">Create Own</span>',c=P(),d=z("a"),d.innerHTML='<svg class="icon-solid" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"></path><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd"></path></svg> \n\n\t\t\t\t<span class="align-middle">Enter Code</span>',B(n,"class","dropdown-overlay svelte-e99nh3"),B(n,"tabindex","-1"),B(r,"class","my-1"),B(a,"class","dropdown-item svelte-e99nh3"),B(a,"href","/create"),B(a,"title","Create your own Sudoku puzzle"),B(d,"class","dropdown-item svelte-e99nh3"),B(d,"href","/enter-code"),B(d,"title","Enter a Sudoku puzzle code from a friend"),B(i,"class","dropdown-menu svelte-e99nh3")},m(t,u){S(t,n,u),S(t,e,u),S(t,i,u);for(let l=0;l<v.length;l+=1)v[l].m(i,null);y(i,s),y(i,r),y(i,o),y(i,a),y(i,c),y(i,d),h=!0,g||(p=[j(n,"click",l[6]),j(a,"click",E(l[3])),j(d,"click",E(l[4]))],g=!0)},p(n,t){if(l=n,4&t){let n;for(m=Object.entries(zl),n=0;n<m.length;n+=1){const e=te(l,m,n);v[n]?v[n].p(e,t):(v[n]=ue(e),v[n].c(),v[n].m(i,s))}for(;n<v.length;n+=1)v[n].d(1);v.length=m.length}},i(l){h||(el(()=>{t||(t=bl(n,Hn,{duration:Ll},!0)),t.run(1)}),el(()=>{f||(f=bl(i,Nn,{duration:Ll},!0)),f.run(1)}),h=!0)},o(l){t||(t=bl(n,Hn,{duration:Ll},!1)),t.run(0),f||(f=bl(i,Nn,{duration:Ll},!1)),f.run(0),h=!1},d(l){l&&C(n),l&&t&&t.end(),l&&C(e),l&&C(i),M(v,l),l&&f&&f.end(),g=!1,u(p)}}}function ue(l){let n,t,e,u,i,s,r,o,a,c,d=l[9]+"";function f(){return l[7](l[8])}return{c(){n=z("a"),t=H("svg"),e=H("path"),u=P(),i=z("span"),s=N(d),B(e,"fill-rule","evenodd"),B(e,"d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"),B(e,"clip-rule","evenodd"),B(t,"class","icon-solid"),B(t,"xmlns","http://www.w3.org/2000/svg"),B(t,"viewBox","0 0 20 20"),B(t,"fill","currentColor"),B(i,"class","align-middle"),B(n,"class","dropdown-item svelte-e99nh3"),B(n,"href",r="/difficulty-"+l[8]),B(n,"title",o="Set difficulty to '"+l[9]+"'")},m(l,r){S(l,n,r),y(n,t),y(t,e),y(n,u),y(n,i),y(i,s),a||(c=j(n,"click",E(f)),a=!0)},p(n,t){l=n},d(l){l&&C(n),a=!1,c()}}}function ie(l){let n,t,e,u,s,r,o,a,c,d,f,h,g=(l[1]===Ml?"Custom":zl[l[1]])+"",p=l[0]&&ee(l);return{c(){n=z("div"),t=z("button"),e=H("svg"),u=H("path"),s=P(),r=z("span"),o=N(g),c=P(),p&&p.c(),B(u,"stroke-linecap","round"),B(u,"stroke-linejoin","round"),B(u,"stroke-width","2"),B(u,"d","M4 8h16M4 16h12"),B(e,"class","icon-outline mr-3"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"fill","none"),B(e,"viewBox","0 0 24 24"),B(e,"stroke","currentColor"),B(r,"class","text-2xl tracking-wider"),B(t,"class","dropdown-button svelte-e99nh3"),B(t,"title",a=(l[0]?"Close":"Open")+" Menu"),B(n,"class","dropdown svelte-e99nh3")},m(a,g){S(a,n,g),y(n,t),y(t,e),y(e,u),y(t,s),y(t,r),y(r,o),y(n,c),p&&p.m(n,null),d=!0,f||(h=j(t,"click",function(){i(l[0]?l[6]:l[5])&&(l[0]?l[6]:l[5]).apply(this,arguments)}),f=!0)},p(e,[u]){l=e,(!d||2&u)&&g!==(g=(l[1]===Ml?"Custom":zl[l[1]])+"")&&_(o,g),(!d||1&u&&a!==(a=(l[0]?"Close":"Open")+" Menu"))&&B(t,"title",a),l[0]?p?(p.p(l,u),1&u&&pl(p,1)):(p=ee(l),p.c(),pl(p,1),p.m(n,null)):p&&(hl(),ml(p,1,1,()=>{p=null}),gl())},i(l){d||(pl(p),d=!0)},o(l){ml(p),d=!1},d(l){l&&C(n),p&&p.d(),f=!1,h()}}}function se(l,n,t){let e;c(l,Jl,l=>t(1,e=l));let u=!1;function i(l){t(0,u=!1),vn.pause(),wn.show("confirm",{title:"New Game",text:'Start new game with difficulty "'+zl[l]+'"?',button:"Continue",onHide:vn.resume,callback:()=>{vn.startNew(l)}})}return[u,e,i,function(){t(0,u=!1),vn.pause(),wn.show("confirm",{title:"Create Own",text:"Switch to the creator mode to create your own Sudoku puzzle?",button:"Continue",onHide:vn.resume,callback:()=>{}})},function(){t(0,u=!1),vn.pause(),wn.show("prompt",{title:"Enter Code",text:"Please enter the code of the Sudoku puzzle you want to play:",fontMono:!0,button:"Start",onHide:vn.resume,callback:l=>{vn.startCustom(l)},validate:Il})},function(){t(0,u=!0),vn.pause()},function(){t(0,u=!1),setTimeout(vn.resume,Ll)},l=>i(l)]}class re extends Cl{constructor(l){super(),Sl(this,l,se,ie,s,{})}}const oe=l=>({}),ae=l=>({});function ce(l){let n,t,e,u,i,s,r,o;u=new re({});const a=l[1].import,c=d(a,l,l[0],ae);return r=new ne({}),{c(){n=z("div"),t=z("div"),e=z("nav"),xl(u.$$.fragment),i=P(),c&&c.c(),s=P(),xl(r.$$.fragment),B(e,"class","flex flex-row items-center justify-between w-full gap-4"),B(t,"class","w-full max-w-xl"),B(n,"class","px-4 py-4 flex justify-center text-white")},m(l,a){S(l,n,a),y(n,t),y(t,e),yl(u,e,null),y(e,i),c&&c.m(e,null),y(e,s),yl(r,e,null),o=!0},p(l,[n]){c&&c.p&&(!o||1&n)&&g(c,a,l,l[0],o?h(a,l[0],n,oe):p(l[0]),ae)},i(l){o||(pl(u.$$.fragment,l),pl(c,l),pl(r.$$.fragment,l),o=!0)},o(l){ml(u.$$.fragment,l),ml(c,l),ml(r.$$.fragment,l),o=!1},d(l){l&&C(n),kl(u),c&&c.d(l),kl(r)}}}function de(l,n,t){let{$$slots:e={},$$scope:u}=n;return l.$$set=l=>{"$$scope"in l&&t(0,u=l.$$scope)},[u,e]}class fe extends Cl{constructor(l){super(),Sl(this,l,de,ce,s,{})}}function he(n){let t;return{c(){t=z("textarea"),t.readOnly="readonly",R(t,"position","absolute"),R(t,"left","-9999px")},m(l,e){S(l,t,e),n[2](t)},p:l,i:l,o:l,d(l){l&&C(t),n[2](null)}}}function ge(l,n,t){let e;return[e,function(l){if(navigator.clipboard)return navigator.clipboard.writeText(l);t(0,e.value=l,e);const n=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);e.select();let u=!1;try{u=document.execCommand("copy")}catch(l){}return n&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(n)),u?Promise.resolve():Promise.reject()},function(l){Q[l?"unshift":"push"](()=>{e=l,t(0,e)})}]}class pe extends Cl{constructor(l){super(),Sl(this,l,ge,he,s,{copyText:1})}get copyText(){return this.$$.ctx[1]}}function me(l){let n,t,e,s,r,o,a,c,d,f,h,g,p,m,v,b,w,x,k,$,M,N,T,O,_,L,R,A,V,I,D,q,U,F,J,W,X,G,Y,Z,K,ll,nl,tl;function el(n){l[11](n)}let il={};return void 0!==l[2]&&(il.copyText=l[2]),Z=new pe({props:il}),Q.push(()=>wl(Z,"copyText",el)),{c(){n=z("div"),t=z("h1"),t.textContent="Share Sudoku",e=P(),s=z("div"),s.innerHTML='<svg class="icon-outline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',r=P(),o=z("div"),a=z("input"),c=P(),d=z("button"),d.innerHTML='<svg class="icon-outline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"></path></svg>',f=P(),h=z("hr"),g=P(),p=z("div"),m=z("a"),v=H("svg"),b=H("path"),w=P(),x=z("span"),x.textContent="Copy Link",k=P(),$=z("a"),M=H("svg"),N=H("path"),T=P(),O=z("span"),O.textContent="Share on Twitter",_=P(),L=z("a"),R=H("svg"),A=H("path"),V=P(),I=z("span"),I.textContent="Share on Facebook",D=P(),q=z("a"),U=H("svg"),F=H("path"),J=P(),W=z("span"),W.textContent="Share by Email",X=P(),G=z("button"),G.innerHTML='<svg class="icon-outline mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"></path></svg> \n\n\t\t<span>Share QR Code</span>',Y=P(),xl(Z.$$.fragment),B(t,"class","text-3xl font-semibold leading-none"),B(s,"class","cursor-pointer"),B(n,"class","flex justify-between items-center mb-6"),B(a,"class","input code-field svelte-1vkhd2v"),B(a,"type","text"),a.readOnly=!0,a.value=l[3],B(d,"class","btn btn-copy svelte-1vkhd2v"),B(o,"class","code-container svelte-1vkhd2v"),B(h,"class","my-8"),B(b,"stroke-linecap","round"),B(b,"stroke-linejoin","round"),B(b,"stroke-width","2"),B(b,"d","M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"),B(v,"class","icon-outline mr-2"),B(v,"xmlns","http://www.w3.org/2000/svg"),B(v,"fill","none"),B(v,"viewBox","0 0 24 24"),B(v,"stroke","currentColor"),B(m,"href",l[4]),B(m,"class","btn btn-small"),B(N,"d","M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"),B(M,"class","icon-outline mr-2"),B(M,"xmlns","http://www.w3.org/2000/svg"),B(M,"fill","currentColor"),B(M,"viewBox","0 0 24 24"),B(M,"stroke","none"),B($,"href",l[7]),B($,"target","_blank"),B($,"class","btn btn-share btn-share-twitter btn-small svelte-1vkhd2v"),B(A,"d","M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"),B(R,"class","icon-outline mr-2"),B(R,"xmlns","http://www.w3.org/2000/svg"),B(R,"fill","currentColor"),B(R,"viewBox","0 0 24 24"),B(R,"stroke","none"),B(L,"href",l[6]),B(L,"target","_blank"),B(L,"class","btn btn-share btn-share-facebook btn-small svelte-1vkhd2v"),B(F,"stroke-linecap","round"),B(F,"stroke-linejoin","round"),B(F,"stroke-width","2"),B(F,"d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"),B(U,"class","icon-outline mr-2"),B(U,"xmlns","http://www.w3.org/2000/svg"),B(U,"fill","none"),B(U,"viewBox","0 0 24 24"),B(U,"stroke","currentColor"),B(q,"href",l[8]),B(q,"target","_blank"),B(q,"class","btn btn-small"),B(G,"class","btn btn-small"),B(p,"class","flex flex-col space-y-2")},m(u,C){S(u,n,C),y(n,t),y(n,e),y(n,s),S(u,r,C),S(u,o,C),y(o,a),y(o,c),y(o,d),S(u,f,C),S(u,h,C),S(u,g,C),S(u,p,C),y(p,m),y(m,v),y(v,b),y(m,w),y(m,x),y(p,k),y(p,$),y($,M),y(M,N),y($,T),y($,O),y(p,_),y(p,L),y(L,R),y(R,A),y(L,V),y(L,I),y(p,D),y(p,q),y(q,U),y(U,F),y(q,J),y(q,W),y(p,X),y(p,G),S(u,Y,C),yl(Z,u,C),ll=!0,nl||(tl=[j(s,"click",function(){i(l[1])&&l[1].apply(this,arguments)}),j(a,"click",l[9]),j(d,"click",function(){i(l[2](l[3]))&&l[2](l[3]).apply(this,arguments)}),j(m,"click",E(function(){i(l[2](l[4]))&&l[2](l[4]).apply(this,arguments)})),j(G,"click",l[10])],nl=!0)},p(n,[t]){l=n;const e={};!K&&4&t&&(K=!0,e.copyText=l[2],ul(()=>K=!1)),Z.$set(e)},i(l){ll||(pl(Z.$$.fragment,l),ll=!0)},o(l){ml(Z.$$.fragment,l),ll=!1},d(l){l&&C(n),l&&C(r),l&&C(o),l&&C(f),l&&C(h),l&&C(g),l&&C(p),l&&C(Y),kl(Z,l),nl=!1,u(tl)}}}function ve(l,n,t){let e;c(l,rn,l=>t(12,e=l));let{data:u={}}=n,{hideModal:i}=n;const s=rn.getSencode(e),r="https://sudoku.jonasgeiler.com/#"+s,o=encodeURIComponent(r),a="https://www.facebook.com/sharer/sharer.php?u="+o,d="https://twitter.com/intent/tweet?text=Check%20out%20this%20Sudoku%20puzzle!&url="+o,f="mailto:?subject=A%20Sudoku%20puzzle%20for%20you&body=Here%27s%20a%20link%20to%20a%20Sudoku%20puzzle%20on%20sudoku.jonasgeiler.com%3A%0A%0A"+o;let h;G(()=>{let l=!1;const n={url:r,title:"Sudoku",text:"Create & play Sudoku puzzles for free online on sudoku.jonasgeiler.com!"};"share"in navigator&&(l=!0),"canShare"in navigator&&(l=navigator.canShare(n)),l&&navigator.share(n)});return l.$$set=l=>{"data"in l&&t(0,u=l.data),"hideModal"in l&&t(1,i=l.hideModal)},[u,i,h,s,r,o,a,d,f,l=>function(l){l.select(),l.setSelectionRange(0,l.value.length)}(l.target),()=>wn.show("qrcode",{...u,encodedLink:o}),function(l){h=l,t(2,h)}]}function be(n){let t,e,u,i,s,o,a;return{c(){var l,o;t=z("img"),u=P(),i=z("div"),s=z("button"),s.innerHTML='<svg class="icon-outline mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg> \n\n\t\t<span>Back</span>',B(t,"class","h-full w-full"),l=t.src,o=e=n[1],r||(r=document.createElement("a")),r.href=o,l!==r.href&&B(t,"src",e),B(s,"class","btn btn-small w-full"),B(i,"class","mt-3")},m(l,e){S(l,t,e),S(l,u,e),S(l,i,e),y(i,s),o||(a=j(s,"click",n[2]),o=!0)},p:l,i:l,o:l,d(l){l&&C(t),l&&C(u),l&&C(i),o=!1,a()}}}function we(l,n,t){let{data:e={}}=n;const u="https://api.qrserver.com/v1/create-qr-code/?size=500x500&charset-source=UTF-8&charset-target=UTF-8&ecc=L&color=000&bgcolor=f7f9fc&margin=8&qzone=0&format=png&data="+e.encodedLink;return l.$$set=l=>{"data"in l&&t(0,e=l.data)},[e,u,()=>wn.show("share",e)]}function xe(n){let t,e,u,i,s,r,o,a,c,d,f,h;return{c(){t=z("label"),e=z("span"),u=N(n[2]),i=P(),s=z("span"),r=z("input"),o=P(),a=z("span"),c=P(),d=z("span"),B(e,"class","flex-grow cursor-pointer text-lg"),B(r,"id",n[1]),B(r,"name",n[1]),B(r,"type","checkbox"),B(r,"class","sr-only svelte-ikakva"),r.disabled=n[3],B(a,"class","track svelte-ikakva"),B(d,"class","thumb svelte-ikakva"),B(s,"class","switch svelte-ikakva"),B(t,"for",n[1]),B(t,"class","inline-flex items-center")},m(l,g){S(l,t,g),y(t,e),y(e,u),y(t,i),y(t,s),y(s,r),r.checked=n[0],y(s,o),y(s,a),y(s,c),y(s,d),f||(h=j(r,"change",n[4]),f=!0)},p(l,[n]){4&n&&_(u,l[2]),2&n&&B(r,"id",l[1]),2&n&&B(r,"name",l[1]),8&n&&(r.disabled=l[3]),1&n&&(r.checked=l[0]),2&n&&B(t,"for",l[1])},i:l,o:l,d(l){l&&C(t),f=!1,h()}}}function ye(l,n,t){let{id:e=""}=n,{text:u=""}=n,{checked:i=!1}=n,{disabled:s=!1}=n;return l.$$set=l=>{"id"in l&&t(1,e=l.id),"text"in l&&t(2,u=l.text),"checked"in l&&t(0,i=l.checked),"disabled"in l&&t(3,s=l.disabled)},[i,e,u,s,function(){i=this.checked,t(0,i)}]}class ke extends Cl{constructor(l){super(),Sl(this,l,ye,xe,s,{id:1,text:2,checked:0,disabled:3})}}function $e(l){let n,t,e,u,i,s,r,o;return{c(){n=z("div"),t=z("label"),t.textContent="Number of available hints",e=P(),u=z("input"),B(t,"for","hints"),B(t,"class","flex-grow text-lg"),B(u,"class","number-input svelte-1g1z144"),B(u,"id","hints"),B(u,"name","hints"),B(u,"type","number"),B(u,"min","0"),B(u,"max","81"),B(n,"class","inline-flex items-center")},m(i,a){S(i,n,a),y(n,t),y(n,e),y(n,u),L(u,l[1].hints),s=!0,r||(o=j(u,"input",l[7]),r=!0)},p(l,n){2&n&&O(u.value)!==l[1].hints&&L(u,l[1].hints)},i(l){s||(el(()=>{i||(i=bl(n,Nn,{},!0)),i.run(1)}),s=!0)},o(l){i||(i=bl(n,Nn,{},!1)),i.run(0),s=!1},d(l){l&&C(n),l&&i&&i.end(),r=!1,o()}}}function Se(l){let n,t,e,s,r,o,a,c,d,f,h,g,p,m,v,b,w,x,k,$,M,H,N,T,E,O,_,L,R;function A(n){l[5](n)}let V={text:"Display timer while playing",id:"display-timer"};function I(n){l[6](n)}void 0!==l[1].displayTimer&&(V.checked=l[1].displayTimer),s=new ke({props:V}),Q.push(()=>wl(s,"checked",A));let D={text:"Limit the number of hints available",id:"hints-limited"};void 0!==l[2]&&(D.checked=l[2]),a=new ke({props:D}),Q.push(()=>wl(a,"checked",I));let q=l[2]&&$e(l);function U(n){l[8](n)}let F={text:"Highlight cells in same row/column/box",id:"highlight-cells"};function J(n){l[9](n)}void 0!==l[1].highlightCells&&(F.checked=l[1].highlightCells),h=new ke({props:F}),Q.push(()=>wl(h,"checked",U));let W={text:"Highlight cells with the same number",id:"highlight-matching"};function X(n){l[10](n)}void 0!==l[1].highlightSame&&(W.checked=l[1].highlightSame),m=new ke({props:W}),Q.push(()=>wl(m,"checked",J));let G={text:"Highlight conflicting numbers",id:"highlight-conflicting"};function Y(n){l[11](n)}void 0!==l[1].highlightConflicting&&(G.checked=l[1].highlightConflicting),w=new ke({props:G}),Q.push(()=>wl(w,"checked",X));let Z={text:"Show errors when wrong numbers are entered",id:"show-errors"};return void 0!==l[1].showErrors&&(Z.checked=l[1].showErrors),$=new ke({props:Z}),Q.push(()=>wl($,"checked",Y)),{c(){n=z("h1"),n.textContent="Settings",t=P(),e=z("div"),xl(s.$$.fragment),o=P(),xl(a.$$.fragment),d=P(),q&&q.c(),f=P(),xl(h.$$.fragment),p=P(),xl(m.$$.fragment),b=P(),xl(w.$$.fragment),k=P(),xl($.$$.fragment),H=P(),N=z("div"),T=z("button"),T.textContent="Cancel",E=P(),O=z("button"),O.textContent="Save",B(n,"class","text-3xl font-semibold mb-6 leading-none"),B(e,"class","flex flex-col mb-6 space-y-3"),B(T,"class","btn btn-small mr-3"),B(O,"class","btn btn-small btn-primary"),B(N,"class","flex justify-end")},m(u,r){S(u,n,r),S(u,t,r),S(u,e,r),yl(s,e,null),y(e,o),yl(a,e,null),y(e,d),q&&q.m(e,null),y(e,f),yl(h,e,null),y(e,p),yl(m,e,null),y(e,b),yl(w,e,null),y(e,k),yl($,e,null),S(u,H,r),S(u,N,r),y(N,T),y(N,E),y(N,O),_=!0,L||(R=[j(T,"click",function(){i(l[0])&&l[0].apply(this,arguments)}),j(O,"click",l[3])],L=!0)},p(n,[t]){l=n;const u={};!r&&2&t&&(r=!0,u.checked=l[1].displayTimer,ul(()=>r=!1)),s.$set(u);const i={};!c&&4&t&&(c=!0,i.checked=l[2],ul(()=>c=!1)),a.$set(i),l[2]?q?(q.p(l,t),4&t&&pl(q,1)):(q=$e(l),q.c(),pl(q,1),q.m(e,f)):q&&(hl(),ml(q,1,1,()=>{q=null}),gl());const o={};!g&&2&t&&(g=!0,o.checked=l[1].highlightCells,ul(()=>g=!1)),h.$set(o);const d={};!v&&2&t&&(v=!0,d.checked=l[1].highlightSame,ul(()=>v=!1)),m.$set(d);const p={};!x&&2&t&&(x=!0,p.checked=l[1].highlightConflicting,ul(()=>x=!1)),w.$set(p);const b={};!M&&2&t&&(M=!0,b.checked=l[1].showErrors,ul(()=>M=!1)),$.$set(b)},i(l){_||(pl(s.$$.fragment,l),pl(a.$$.fragment,l),pl(q),pl(h.$$.fragment,l),pl(m.$$.fragment,l),pl(w.$$.fragment,l),pl($.$$.fragment,l),_=!0)},o(l){ml(s.$$.fragment,l),ml(a.$$.fragment,l),ml(q),ml(h.$$.fragment,l),ml(m.$$.fragment,l),ml(w.$$.fragment,l),ml($.$$.fragment,l),_=!1},d(l){l&&C(n),l&&C(t),l&&C(e),kl(s),kl(a),q&&q.d(),kl(h),kl(m),kl(w),kl($),l&&C(H),l&&C(N),L=!1,u(R)}}}function Ce(l,n,t){let e;c(l,en,l=>t(12,e=l));let{data:u={}}=n,{hideModal:i}=n,s={...e},r=s.hintsLimited;return l.$$set=l=>{"data"in l&&t(4,u=l.data),"hideModal"in l&&t(0,i=l.hideModal)},[i,s,r,function(){t(1,s.hintsLimited=r,s),s.hints<0&&t(1,s.hints=0,s),s.hints>99999&&t(1,s.hints=99999,s),en.set(s),i()},u,function(n){l.$$.not_equal(s.displayTimer,n)&&(s.displayTimer=n,t(1,s))},function(l){r=l,t(2,r)},function(){s.hints=O(this.value),t(1,s)},function(n){l.$$.not_equal(s.highlightCells,n)&&(s.highlightCells=n,t(1,s))},function(n){l.$$.not_equal(s.highlightSame,n)&&(s.highlightSame=n,t(1,s))},function(n){l.$$.not_equal(s.highlightConflicting,n)&&(s.highlightConflicting=n,t(1,s))},function(n){l.$$.not_equal(s.showErrors,n)&&(s.showErrors=n,t(1,s))}]}function Me(l){let n,t,e=l[0].text+"";return{c(){n=z("p"),t=N(e),B(n,"class","text-lg mb-5")},m(l,e){S(l,n,e),y(n,t)},p(l,n){1&n&&e!==(e=l[0].text+"")&&_(t,e)},d(l){l&&C(n)}}}function ze(n){let t,e,s,r,o,a,c,d,f,h,g,p=(n[0].title||"Confirm")+"",m=(n[0].button||"Okay")+"",v=n[0].text&&Me(n);return{c(){t=z("h1"),e=N(p),s=P(),v&&v.c(),r=P(),o=z("div"),a=z("button"),a.textContent="Cancel",c=P(),d=z("button"),f=N(m),B(t,"class","text-3xl font-semibold mb-5 leading-none"),B(a,"class","btn btn-small mr-3"),B(d,"class","btn btn-small btn-primary"),B(o,"class","flex justify-end")},m(l,u){S(l,t,u),y(t,e),S(l,s,u),v&&v.m(l,u),S(l,r,u),S(l,o,u),y(o,a),y(o,c),y(o,d),y(d,f),h||(g=[j(a,"click",function(){i(n[1])&&n[1].apply(this,arguments)}),j(d,"click",n[2])],h=!0)},p(l,[t]){n=l,1&t&&p!==(p=(n[0].title||"Confirm")+"")&&_(e,p),n[0].text?v?v.p(n,t):(v=Me(n),v.c(),v.m(r.parentNode,r)):v&&(v.d(1),v=null),1&t&&m!==(m=(n[0].button||"Okay")+"")&&_(f,m)},i:l,o:l,d(l){l&&C(t),l&&C(s),v&&v.d(l),l&&C(r),l&&C(o),h=!1,u(g)}}}function He(l,n,t){let{data:e={}}=n,{hideModal:u}=n;return l.$$set=l=>{"data"in l&&t(0,e=l.data),"hideModal"in l&&t(1,u=l.hideModal)},[e,u,function(){e.callback&&e.callback(),u()}]}function Ne(l){let n,t,e=l[0].text+"";return{c(){n=z("label"),t=N(e),B(n,"for","prompt-input"),B(n,"class","text-lg mb-4")},m(l,e){S(l,n,e),y(n,t)},p(l,n){1&n&&e!==(e=l[0].text+"")&&_(t,e)},d(l){l&&C(n)}}}function Pe(n){let t,e,s,r,o,a,c,d,f,h,g,p,m,v,b=(n[0].title||"Please enter something")+"",w=(n[0].button||"Okay")+"",x=n[0].text&&Ne(n);return{c(){t=z("h1"),e=N(b),s=P(),x&&x.c(),r=P(),o=z("input"),a=P(),c=z("div"),d=z("button"),d.textContent="Cancel",f=P(),h=z("button"),g=N(w),B(t,"class","text-3xl font-semibold mb-5 leading-none"),B(o,"class","input mb-5"),B(o,"id","prompt-input"),B(o,"name","prompt-input"),B(o,"type","text"),V(o,"font-mono",n[0].fontMono),B(d,"class","btn btn-small mr-3"),B(h,"class","btn btn-small btn-primary"),h.disabled=p=!!n[0].validate&&!n[0].validate(n[2]),B(c,"class","flex justify-end")},m(l,u){S(l,t,u),y(t,e),S(l,s,u),x&&x.m(l,u),S(l,r,u),S(l,o,u),L(o,n[2]),S(l,a,u),S(l,c,u),y(c,d),y(c,f),y(c,h),y(h,g),m||(v=[j(o,"input",n[4]),j(d,"click",function(){i(n[1])&&n[1].apply(this,arguments)}),j(h,"click",n[3])],m=!0)},p(l,[t]){n=l,1&t&&b!==(b=(n[0].title||"Please enter something")+"")&&_(e,b),n[0].text?x?x.p(n,t):(x=Ne(n),x.c(),x.m(r.parentNode,r)):x&&(x.d(1),x=null),4&t&&o.value!==n[2]&&L(o,n[2]),1&t&&V(o,"font-mono",n[0].fontMono),1&t&&w!==(w=(n[0].button||"Okay")+"")&&_(g,w),5&t&&p!==(p=!!n[0].validate&&!n[0].validate(n[2]))&&(h.disabled=p)},i:l,o:l,d(l){l&&C(t),l&&C(s),x&&x.d(l),l&&C(r),l&&C(o),l&&C(a),l&&C(c),m=!1,u(v)}}}function Te(l,n,t){let{data:e={}}=n,{hideModal:u}=n,i="";return l.$$set=l=>{"data"in l&&t(0,e=l.data),"hideModal"in l&&t(1,u=l.hideModal)},[e,u,i,function(){e.callback&&e.callback(i),u()},function(){i=this.value,t(2,i)}]}function je(l,n,t){const e=l.slice();return e[10]=n[t][0],e[11]=n[t][1],e}function Ee(l){let n;return{c(){n=z("div"),n.innerHTML="Someone shared a Sudoku puzzle with you!<br/>Just click start if you want to play it",B(n,"class","p-3 text-lg rounded bg-primary bg-opacity-25 border-l-8 border-primary border-opacity-75 mb-4")},m(l,t){S(l,n,t)},d(l){l&&C(n)}}}function Be(n){let t,e,u,i=n[11]+"";return{c(){t=z("option"),e=N(i),t.__value=u=n[10],t.value=t.__value},m(l,n){S(l,t,n),y(t,e)},p:l,d(l){l&&C(t)}}}function Oe(n){let t,e,i,s,r,o,a,c,d,f,h,g,p,m,v,b,w,x,k,$=n[0].sencode&&Ee(),H=Object.entries(zl),T=[];for(let l=0;l<H.length;l+=1)T[l]=Be(je(n,H,l));return{c(){t=z("h1"),t.textContent="Welcome!",e=P(),$&&$.c(),i=P(),s=z("label"),s.textContent="To start a game, choose a difficulty:",r=P(),o=z("div"),a=z("select");for(let l=0;l<T.length;l+=1)T[l].c();c=P(),d=z("div"),d.innerHTML='<svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"></path></svg>',f=P(),h=z("label"),h.textContent="Or, if you have a code for a custom Sudoku puzzle, enter it here:",g=P(),p=z("input"),m=P(),v=z("div"),b=z("button"),w=N("Start"),B(t,"class","text-3xl font-semibold mb-6 leading-none"),B(s,"for","difficulty"),B(s,"class","text-lg mb-3"),B(a,"id","difficulty"),B(a,"class","btn btn-small w-full appearance-none leading-normal"),a.disabled=n[3],void 0===n[1]&&el(()=>n[7].call(a)),B(d,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"),B(o,"class","inline-block relative mb-6"),B(h,"for","sencode"),B(h,"class","text-lg mb-3"),B(p,"id","sencode"),B(p,"class","input font-mono mb-5"),B(p,"type","text"),B(b,"class","btn btn-small btn-primary"),b.disabled=n[4],B(v,"class","flex justify-end")},m(l,u){S(l,t,u),S(l,e,u),$&&$.m(l,u),S(l,i,u),S(l,s,u),S(l,r,u),S(l,o,u),y(o,a);for(let l=0;l<T.length;l+=1)T[l].m(a,null);A(a,n[1]),y(o,c),y(o,d),S(l,f,u),S(l,h,u),S(l,g,u),S(l,p,u),L(p,n[2]),S(l,m,u),S(l,v,u),y(v,b),y(b,w),x||(k=[j(a,"change",n[7]),j(p,"input",n[8]),j(b,"click",n[5])],x=!0)},p(l,[n]){if(l[0].sencode?$||($=Ee(),$.c(),$.m(i.parentNode,i)):$&&($.d(1),$=null),0&n){let t;for(H=Object.entries(zl),t=0;t<H.length;t+=1){const e=je(l,H,t);T[t]?T[t].p(e,n):(T[t]=Be(e),T[t].c(),T[t].m(a,null))}for(;t<T.length;t+=1)T[t].d(1);T.length=H.length}8&n&&(a.disabled=l[3]),2&n&&A(a,l[1]),4&n&&p.value!==l[2]&&L(p,l[2]),16&n&&(b.disabled=l[4])},i:l,o:l,d(l){l&&C(t),l&&C(e),$&&$.d(l),l&&C(i),l&&C(s),l&&C(r),l&&C(o),M(T,l),l&&C(f),l&&C(h),l&&C(g),l&&C(p),l&&C(m),l&&C(v),x=!1,u(k)}}}function _e(l,n,t){let e,u,i;c(l,Jl,l=>t(9,i=l));let{data:s={}}=n,{hideModal:r}=n,o=i,a=s.sencode||"";return l.$$set=l=>{"data"in l&&t(0,s=l.data),"hideModal"in l&&t(6,r=l.hideModal)},l.$$.update=()=>{4&l.$$.dirty&&t(3,e=0!==a.trim().length),14&l.$$.dirty&&t(4,u=e?!Il(a):!zl.hasOwnProperty(o))},[s,o,a,e,u,function(){Il(a)?gn(a):hn(o),r()},r,function(){o=function(l){const n=l.querySelector(":checked")||l.options[0];return n&&n.__value}(this),t(1,o)},function(){a=this.value,t(2,a)}]}function Le(n){let t,e,i,s,r,o,a,c,d,f,h,g,p,m,v,b,w,x,k,$,M,T,E,O,L,R,A,V,I,D,q,U,F,J,W,X,G,Y,Z,Q=(n[1]===Ml?"Custom":zl[n[1]])+"";return{c(){t=z("div"),e=H("svg"),i=H("path"),s=P(),r=z("h1"),r.textContent=`${n[3]}`,o=P(),a=z("div"),c=z("div"),d=z("div"),d.innerHTML='<svg class="icon-outline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',f=P(),h=z("div"),g=z("div"),g.textContent="Time:",p=P(),m=z("div"),v=N(n[0]),b=P(),w=z("div"),x=z("div"),x.innerHTML='<svg class="icon-outline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>',k=P(),$=z("div"),M=z("div"),M.textContent="Difficulty:",T=P(),E=z("div"),O=N(Q),L=P(),R=z("div"),A=z("div"),A.innerHTML='<svg class="icon-outline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg>',V=P(),I=z("div"),D=z("div"),D.textContent="Hints used:",q=P(),U=z("div"),F=N(n[2]),J=P(),W=z("button"),W.textContent="Share this Sudoku puzzle",X=P(),G=z("button"),G.textContent="New Game",B(i,"d","M1 6.417c0-1.013.822-1.833 1.834-1.833 1.215 0 2.104 1.167 1.763 2.329-.559 1.915 5.827 3.731 6.771-1.471.239-1.323-.021-1.67-.668-2.321-.329-.329-.534-.783-.534-1.287 0-1.013.822-1.834 1.834-1.834 1.014 0 1.833.821 1.833 1.833 0 .504-.204.958-.533 1.287-.646.65-.905.998-.666 2.321.941 5.2 7.33 3.387 6.77 1.471-.339-1.162.548-2.329 1.764-2.329 1.012 0 1.832.821 1.832 1.834 0 1.118-.992 1.97-2.084 1.816-1.32-.187-3.03 4.554-3.417 6.716-1.765-.615-3.618-.942-5.493-.949-1.875.006-3.74.334-5.504.949-.388-2.162-2.098-6.903-3.418-6.717-1.092.155-2.084-.697-2.084-1.815zm-1 14.583h2.359l.566 3c.613-1.012 1.388-1.912 2.277-2.68l-2.342-3.335c-1.089.879-2.053 1.848-2.86 3.015zm24 0h-2.359l-.566 3c-.613-1.012-1.388-1.912-2.277-2.68l2.343-3.335c1.088.879 2.052 1.848 2.859 3.015zm-12-4.998c-2.845.009-5.491.825-7.757 2.211l2.334 3.322c1.603-.924 3.448-1.464 5.423-1.473 1.975.009 3.82.549 5.423 1.473l2.334-3.322c-2.266-1.386-4.912-2.202-7.757-2.211zm-3.022 3.498l-.65-.348-.651.348.131-.726-.531-.511.729-.101.321-.662.322.663.729.101-.53.511.13.725zm3.672-.5l-.65-.348-.65.348.131-.726-.531-.511.729-.101.321-.662.322.663.729.101-.53.511.129.725zm3.718.5l-.65-.348-.65.348.131-.726-.531-.511.729-.101.322-.663.322.663.729.101-.53.511.128.726z"),B(e,"class","h-32 w-32 fill-current"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"viewBox","0 0 24 24"),B(r,"class","text-4xl font-semibold"),B(t,"class","flex flex-col text-center items-center"),B(d,"class","item-icon svelte-68i9eu"),B(g,"class","item-data-label svelte-68i9eu"),B(m,"class","item-data-value svelte-68i9eu"),B(h,"class","item-data svelte-68i9eu"),B(c,"class","game-data-item svelte-68i9eu"),B(x,"class","item-icon svelte-68i9eu"),B(M,"class","item-data-label svelte-68i9eu"),B(E,"class","item-data-value svelte-68i9eu"),B($,"class","item-data svelte-68i9eu"),B(w,"class","game-data-item svelte-68i9eu"),B(A,"class","item-icon svelte-68i9eu"),B(D,"class","item-data-label svelte-68i9eu"),B(U,"class","item-data-value svelte-68i9eu"),B(I,"class","item-data svelte-68i9eu"),B(R,"class","game-data-item svelte-68i9eu"),B(a,"class","game-data space-y-2 svelte-68i9eu"),B(W,"class","btn btn-small w-full mb-2"),B(G,"class","btn btn-small btn-primary w-full")},m(l,u){S(l,t,u),y(t,e),y(e,i),y(t,s),y(t,r),S(l,o,u),S(l,a,u),y(a,c),y(c,d),y(c,f),y(c,h),y(h,g),y(h,p),y(h,m),y(m,v),y(a,b),y(a,w),y(w,x),y(w,k),y(w,$),y($,M),y($,T),y($,E),y(E,O),y(a,L),y(a,R),y(R,A),y(R,V),y(R,I),y(I,D),y(I,q),y(I,U),y(U,F),S(l,J,u),S(l,W,u),S(l,X,u),S(l,G,u),Y||(Z=[j(W,"click",n[4]),j(G,"click",n[5])],Y=!0)},p(l,[n]){1&n&&_(v,l[0]),2&n&&Q!==(Q=(l[1]===Ml?"Custom":zl[l[1]])+"")&&_(O,Q),4&n&&_(F,l[2])},i:l,o:l,d(l){l&&C(t),l&&C(o),l&&C(a),l&&C(J),l&&C(W),l&&C(X),l&&C(G),Y=!1,u(Z)}}}function Re(l,n,t){let e,u,i;c(l,fn,l=>t(0,e=l)),c(l,Jl,l=>t(1,u=l)),c(l,un,l=>t(2,i=l));const s=Rl[Math.floor(Math.random()*Rl.length)];return[e,u,i,s,function(){wn.show("share",{onHide:()=>wn.show("gameover"),onHideReplace:!0})},function(){wn.show("welcome",{onHide:mn})}]}function Ae(l,n,t){const e=l.slice();return e[4]=n[t],e}function Ve(l){let n,t,e,u,i,s,r,o,a,c,d,f,h,g,p,m,v,b=l[4].name+"",w=l[4].difficulty+"",x=l[4].description+"",k=l[4].example+"";function $(){return l[3](l[4])}return{c(){n=z("div"),t=z("div"),e=z("h3"),u=N(b),i=P(),s=z("span"),r=N(w),o=P(),a=z("p"),c=N(x),d=P(),f=z("p"),h=N("示例："),g=N(k),p=P(),B(e,"class","text-lg font-semibold text-blue-600 cursor-pointer hover:underline"),B(s,"class","text-xs px-2 py-1 rounded bg-gray-200"),B(t,"class","flex justify-between items-start mb-2"),B(a,"class","text-gray-700 mb-2"),B(f,"class","text-sm text-gray-600 italic"),B(n,"class","border rounded-lg p-4 hover:bg-gray-50")},m(l,b){S(l,n,b),y(n,t),y(t,e),y(e,u),y(t,i),y(t,s),y(s,r),y(n,o),y(n,a),y(a,c),y(n,d),y(n,f),y(f,h),y(f,g),y(n,p),m||(v=j(e,"click",$),m=!0)},p(n,t){l=n},d(l){l&&C(n),m=!1,v()}}}function Ie(n){let t,e,u,s,r,o,a,c,d,f,h,g,p=n[1],m=[];for(let l=0;l<p.length;l+=1)m[l]=Ve(Ae(n,p,l));return{c(){t=z("div"),e=z("h1"),e.textContent="策略学习",u=P(),s=z("div"),s.innerHTML='<svg class="icon-outline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',r=P(),o=z("div"),o.innerHTML='<p class="text-gray-600 mb-4">学习数独解题策略，提升解题能力。点击策略名称查看详细说明。</p>',a=P(),c=z("div");for(let l=0;l<m.length;l+=1)m[l].c();d=P(),f=z("div"),f.innerHTML='<p class="text-sm text-gray-500">更多策略请访问 \n\t\t<a href="https://www.sudokuwiki.org/Sudoku.htm" target="_blank" class="text-blue-600 hover:underline">SudokuWiki.org</a></p>',B(e,"class","text-3xl font-semibold leading-none"),B(s,"class","cursor-pointer"),B(t,"class","flex justify-between items-center mb-6"),B(o,"class","mb-4"),B(c,"class","space-y-4"),B(f,"class","mt-6 text-center")},m(l,p){S(l,t,p),y(t,e),y(t,u),y(t,s),S(l,r,p),S(l,o,p),S(l,a,p),S(l,c,p);for(let l=0;l<m.length;l+=1)m[l].m(c,null);S(l,d,p),S(l,f,p),h||(g=j(s,"click",function(){i(n[0])&&n[0].apply(this,arguments)}),h=!0)},p(l,[t]){if(n=l,6&t){let l;for(p=n[1],l=0;l<p.length;l+=1){const e=Ae(n,p,l);m[l]?m[l].p(e,t):(m[l]=Ve(e),m[l].c(),m[l].m(c,null))}for(;l<m.length;l+=1)m[l].d(1);m.length=p.length}},i:l,o:l,d(l){l&&C(t),l&&C(r),l&&C(o),l&&C(a),l&&C(c),M(m,l),l&&C(d),l&&C(f),h=!1,g()}}}function De(l,n,t){let{hideModal:e}=n;function u(l){wn.show("wikiStrategy",{strategy:l,onHide:()=>{wn.show("strategyLearning",{onHide:e})}})}return l.$$set=l=>{"hideModal"in l&&t(0,e=l.hideModal)},[e,[{name:"隐藏单数",difficulty:"简单",description:"在行、列或宫中，某个数字只能填入一个位置。",example:"在某个宫中，数字5只能填入一个格子。",steps:["检查每个宫、行、列","找出只能填入一个位置的数字","填入该数字"],relatedStrategies:["裸单数","唯一候选数"],practiceTips:["从简单的宫开始练习","注意观察候选数的分布"],wikiUrl:"https://www.sudokuwiki.org/Hidden_Singles"},{name:"裸单数",difficulty:"简单",description:"某个格子只有一个候选数。",example:"某个格子只能填入数字3。",steps:["检查每个格子的候选数","找出只有一个候选数的格子","填入该数字"],relatedStrategies:["隐藏单数","唯一候选数"],practiceTips:["先完成所有裸单数","再寻找隐藏单数"],wikiUrl:"https://www.sudokuwiki.org/Naked_Singles"},{name:"唯一候选数",difficulty:"简单",description:"在行、列或宫中，某个候选数只出现在一个位置。",example:"在某个宫中，候选数7只出现在一个格子中。",steps:["标记所有候选数","检查每个宫、行、列","找出唯一出现的候选数","填入该数字"],relatedStrategies:["隐藏单数","裸单数"],practiceTips:["系统性地检查每个区域","注意候选数的唯一性"],wikiUrl:"https://www.sudokuwiki.org/Singles"},{name:"裸数对",difficulty:"中等",description:"两个格子只包含相同的两个候选数。",example:"两个格子都只能填入数字2和5。",steps:["检查每个宫、行、列","找出只包含相同两个候选数的格子","排除其他格子中的这些候选数"],relatedStrategies:["隐藏数对","裸数三"],practiceTips:["注意观察候选数的组合","数对可以排除其他候选数"],wikiUrl:"https://www.sudokuwiki.org/Naked_Pairs"},{name:"隐藏数对",difficulty:"中等",description:"在行、列或宫中，两个候选数只出现在两个格子中。",example:"在某个宫中，候选数3和7只出现在两个格子中。",steps:["检查每个宫、行、列","找出只出现在两个格子中的候选数","这两个格子只能填入这些候选数"],relatedStrategies:["裸数对","隐藏数三"],practiceTips:["注意候选数的分布模式","隐藏数对可以简化候选数"],wikiUrl:"https://www.sudokuwiki.org/Hidden_Pairs"},{name:"X-Wing",difficulty:"困难",description:"某个候选数在两行中都只出现在相同的两列中。",example:"候选数4在两行中都只出现在第2列和第8列。",steps:["检查每行的候选数分布","找出在两行中只出现在相同两列的候选数","排除这两列中其他行的该候选数"],relatedStrategies:["Swordfish","XY-Wing"],practiceTips:["需要仔细观察候选数模式","X-Wing是高级技巧的基础"],wikiUrl:"https://www.sudokuwiki.org/X_Wing"}],u,l=>u(l)]}function qe(l,n,t){const e=l.slice();return e[12]=n[t],e}function Ue(l,n,t){const e=l.slice();return e[15]=n[t],e}function Fe(l){let n,t,e,u,i,s=l[15].name+"";function r(){return l[7](l[15])}return{c(){n=z("button"),t=N(s),e=P(),B(n,"class","px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm hover:bg-green-200")},m(l,s){S(l,n,s),y(n,t),y(n,e),u||(i=j(n,"click",r),u=!0)},p(n,t){l=n},d(l){l&&C(n),u=!1,i()}}}function Je(l){let n,t,e,u,i,s,r,o,a,c,d,f,h,g=l[12].name+"",p=l[12].difficulty+"",m=l[12].description+"",v=l[12].puzzles,b=[];for(let n=0;n<v.length;n+=1)b[n]=Fe(Ue(l,v,n));return{c(){n=z("div"),t=z("div"),e=z("h3"),u=N(g),i=P(),s=z("span"),r=N(p),o=P(),a=z("p"),c=N(m),d=P(),f=z("div");for(let l=0;l<b.length;l+=1)b[l].c();h=P(),B(e,"class","text-lg font-semibold text-green-600"),B(s,"class","text-xs px-2 py-1 rounded bg-gray-200"),B(t,"class","flex justify-between items-start mb-2"),B(a,"class","text-gray-700 mb-2"),B(f,"class","flex flex-wrap gap-2"),B(n,"class","border rounded-lg p-4 hover:bg-gray-50")},m(l,g){S(l,n,g),y(n,t),y(t,e),y(e,u),y(t,i),y(t,s),y(s,r),y(n,o),y(n,a),y(a,c),y(n,d),y(n,f);for(let l=0;l<b.length;l+=1)b[l].m(f,null);y(n,h)},p(l,n){if(20&n){let t;for(v=l[12].puzzles,t=0;t<v.length;t+=1){const e=Ue(l,v,t);b[t]?b[t].p(e,n):(b[t]=Fe(e),b[t].c(),b[t].m(f,null))}for(;t<b.length;t+=1)b[t].d(1);b.length=v.length}},d(l){l&&C(n),M(b,l)}}}function We(n){let t,e,s,r,o,a,c,d,f,h,g,p,m,v,b,w,x,k,$,H,N,T,E,O,_,R=n[2],A=[];for(let l=0;l<R.length;l+=1)A[l]=Je(qe(n,R,l));return{c(){t=z("div"),e=z("h1"),e.textContent="SudokuWiki题库",s=P(),r=z("div"),r.innerHTML='<svg class="icon-outline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',o=P(),a=z("div"),c=z("p"),c.textContent="浏览SudokuWiki题库，选择适合的题目进行练习。",d=P(),f=z("button"),f.textContent="← 返回策略学习",h=P(),g=z("div");for(let l=0;l<A.length;l+=1)A[l].c();p=P(),m=z("div"),v=z("h3"),v.textContent="自定义题目导入",b=P(),w=z("p"),w.textContent="从SudokuWiki URL导入题目：",x=P(),k=z("div"),$=z("input"),H=P(),N=z("button"),N.textContent="导入",T=P(),E=z("div"),E.innerHTML='<p class="text-sm text-gray-500">更多题目请访问 \n\t\t<a href="https://www.sudokuwiki.org/sudoku.htm" target="_blank" class="text-blue-600 hover:underline">SudokuWiki.org</a></p>',B(e,"class","text-3xl font-semibold leading-none"),B(r,"class","cursor-pointer"),B(t,"class","flex justify-between items-center mb-6"),B(c,"class","text-gray-600 mb-4"),B(f,"class","btn btn-secondary mb-4"),B(a,"class","mb-4"),B(g,"class","space-y-4"),B(v,"class","text-lg font-semibold text-blue-800 mb-2"),B(w,"class","text-blue-700 mb-3"),B($,"type","text"),B($,"placeholder","输入SudokuWiki题目URL"),B($,"class","flex-1 px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"),B(N,"class","btn btn-primary"),B(k,"class","flex gap-2"),B(m,"class","mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg"),B(E,"class","mt-6 text-center")},m(l,u){S(l,t,u),y(t,e),y(t,s),y(t,r),S(l,o,u),S(l,a,u),y(a,c),y(a,d),y(a,f),S(l,h,u),S(l,g,u);for(let l=0;l<A.length;l+=1)A[l].m(g,null);S(l,p,u),S(l,m,u),y(m,v),y(m,b),y(m,w),y(m,x),y(m,k),y(k,$),L($,n[1]),y(k,H),y(k,N),S(l,T,u),S(l,E,u),O||(_=[j(r,"click",function(){i(n[0])&&n[0].apply(this,arguments)}),j(f,"click",n[3]),j($,"input",n[8]),j(N,"click",n[5])],O=!0)},p(l,[t]){if(n=l,20&t){let l;for(R=n[2],l=0;l<R.length;l+=1){const e=qe(n,R,l);A[l]?A[l].p(e,t):(A[l]=Je(e),A[l].c(),A[l].m(g,null))}for(;l<A.length;l+=1)A[l].d(1);A.length=R.length}2&t&&$.value!==n[1]&&L($,n[1])},i:l,o:l,d(l){l&&C(t),l&&C(o),l&&C(a),l&&C(h),l&&C(g),M(A,l),l&&C(p),l&&C(m),l&&C(T),l&&C(E),O=!1,u(_)}}}function Xe(l,n,t){let{data:e={}}=n,{hideModal:u}=n,i="",s="";async function r(l){try{const n=await fetch(l.url),t=(await n.text()).match(/var puzzle = \"([0-9\.]{81})\"/);if(!t)return void(i="未找到有效棋盘数据");const e=t[1].replace(/\./g,"0").split("").map(Number);if(81!==e.length)return void(i="棋盘数据长度不正确");for(let l=0;l<9;l++)for(let n=0;n<9;n++)on.set({x:n,y:l},e[9*l+n]);u(),alert(`成功导入题目：${l.name}`)}catch(l){i="导入题目失败"}}function o(l){const n=l.replace(/\./g,"0").split("").map(Number);for(let l=0;l<9;l++)for(let t=0;t<9;t++)on.set({x:t,y:l},n[9*l+t]);u(),alert("成功导入题目！")}return l.$$set=l=>{"data"in l&&t(6,e=l.data),"hideModal"in l&&t(0,u=l.hideModal)},[u,s,[{name:"基础练习",difficulty:"简单",description:"适合初学者的基础题目",puzzles:[{name:"基础题目1",url:"https://www.sudokuwiki.org/sudoku.htm?bd=000000000000000000000000000000000000000000000000000000000000000000000000000000000"},{name:"基础题目2",url:"https://www.sudokuwiki.org/sudoku.htm?bd=000000000000000000000000000000000000000000000000000000000000000000000000000000000"}]},{name:"隐藏单数",difficulty:"简单",description:"练习隐藏单数技巧的题目",puzzles:[{name:"隐藏单数1",url:"https://www.sudokuwiki.org/sudoku.htm?bd=000000000000000000000000000000000000000000000000000000000000000000000000000000000"},{name:"隐藏单数2",url:"https://www.sudokuwiki.org/sudoku.htm?bd=000000000000000000000000000000000000000000000000000000000000000000000000000000000"}]},{name:"数对技巧",difficulty:"中等",description:"练习数对和数三技巧的题目",puzzles:[{name:"数对题目1",url:"https://www.sudokuwiki.org/sudoku.htm?bd=000000000000000000000000000000000000000000000000000000000000000000000000000000000"},{name:"数对题目2",url:"https://www.sudokuwiki.org/sudoku.htm?bd=000000000000000000000000000000000000000000000000000000000000000000000000000000000"}]}],function(){e.onHide?e.onHide():u()},r,async function(){if(!s.trim())return void alert("请输入有效的URL或字符串");const l=s.match(/[?&]bd=([0-9.]{81})/i);if(l)return o(l[1]);const n=s.replace(/[^0-9.]/g,"");if(81===n.length)return o(n);try{const l=await fetch(s),n=await l.text(),t=n.match(/var puzzle = "([0-9.]{81})"/);if(t)return o(t[1]);const e=n.match(/<table[^>]*id=["']?puzzle_grid["']?[^>]*>([\s\S]*?)<\/table>/i);if(e){const l=e[1].match(/<td[^>]*>([\s\S]*?)<\/td>/gi);if(l&&81===l.length){return function(l){for(let n=0;n<9;n++)for(let t=0;t<9;t++)on.set({x:t,y:n},l[9*n+t]);u(),alert("成功导入题目！")}(l.map(l=>{const n=l.replace(/<[^>]+>/g,"").trim();return""===n||"."===n?0:Number(n)}))}}alert("未找到有效棋盘数据")}catch(l){alert("导入失败，请检查URL是否正确")}},e,l=>r(l),function(){s=this.value,t(1,s)}]}function Ge(l,n,t){const e=l.slice();return e[8]=n[t],e}function Ye(l,n,t){const e=l.slice();return e[11]=n[t],e}function Ze(l,n,t){const e=l.slice();return e[14]=n[t],e[16]=t,e}function Qe(l,n,t){const e=l.slice();return e[17]=n[t],e[19]=t,e}function Ke(l,n,t){const e=l.slice();return e[20]=n[t],e}function lu(n){let t,e,u=n[20]+"";return{c(){t=z("li"),e=N(u),B(t,"class","pl-2")},m(l,n){S(l,t,n),y(t,e)},p:l,d(l){l&&C(t)}}}function nu(n){let t,e,u=0!==n[17]&&function(n){let t,e=n[17]+"";return{c(){t=N(e)},m(l,n){S(l,t,n)},p:l,d(l){l&&C(t)}}}(n);return{c(){t=z("div"),u&&u.c(),e=P(),B(t,"class","w-8 h-8 bg-white flex items-center justify-center text-sm font-mono")},m(l,n){S(l,t,n),u&&u.m(t,null),y(t,e)},p(l,n){0!==l[17]&&u.p(l,n)},d(l){l&&C(t),u&&u.d()}}}function tu(l){let n,t=l[14],e=[];for(let n=0;n<t.length;n+=1)e[n]=nu(Qe(l,t,n));return{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=T()},m(l,t){for(let n=0;n<e.length;n+=1)e[n].m(l,t);S(l,n,t)},p(l,u){if(1&u){let i;for(t=l[14],i=0;i<t.length;i+=1){const s=Qe(l,t,i);e[i]?e[i].p(s,u):(e[i]=nu(s),e[i].c(),e[i].m(n.parentNode,n))}for(;i<e.length;i+=1)e[i].d(1);e.length=t.length}},d(l){M(e,l),l&&C(n)}}}function eu(l){let n,t,e,u,i,s=l[11]+"";function r(){return l[5](l[11])}return{c(){n=z("button"),t=N(s),e=P(),B(n,"class","px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm hover:bg-blue-200")},m(l,s){S(l,n,s),y(n,t),y(n,e),u||(i=j(n,"click",r),u=!0)},p(n,t){l=n},d(l){l&&C(n),u=!1,i()}}}function uu(n){let t,e,u=n[8]+"";return{c(){t=z("li"),e=N(u),B(t,"class","pl-2")},m(l,n){S(l,t,n),y(t,e)},p:l,d(l){l&&C(t)}}}function iu(n){let t,e,u,i,s,r,o,a,c,d,f,h,g,p,m,v,b,w,x,k,$,H,N,T,E,O,_,L,R,A,V,I,D,q,U,F,J,W,X=n[0].steps,G=[];for(let l=0;l<X.length;l+=1)G[l]=lu(Ke(n,X,l));let Y=n[0].exampleBoard&&function(l){let n,t,e,u,i=l[0].exampleBoard,s=[];for(let n=0;n<i.length;n+=1)s[n]=tu(Ze(l,i,n));return{c(){n=z("div"),t=z("p"),t.textContent="示例棋盘：",e=P(),u=z("div");for(let l=0;l<s.length;l+=1)s[l].c();B(t,"class","text-sm font-semibold mb-2"),B(u,"class","grid grid-cols-9 gap-px bg-gray-300 border-2 border-gray-400 max-w-xs"),B(n,"class","mt-4")},m(l,i){S(l,n,i),y(n,t),y(n,e),y(n,u);for(let l=0;l<s.length;l+=1)s[l].m(u,null)},p(l,n){if(1&n){let t;for(i=l[0].exampleBoard,t=0;t<i.length;t+=1){const e=Ze(l,i,t);s[t]?s[t].p(e,n):(s[t]=tu(e),s[t].c(),s[t].m(u,null))}for(;t<s.length;t+=1)s[t].d(1);s.length=i.length}},d(l){l&&C(n),M(s,l)}}}(n),Z=n[0].relatedStrategies,Q=[];for(let l=0;l<Z.length;l+=1)Q[l]=eu(Ye(n,Z,l));let K=n[0].practiceTips,ll=[];for(let l=0;l<K.length;l+=1)ll[l]=uu(Ge(n,K,l));return{c(){t=z("div"),e=z("button"),e.textContent="← 返回策略学习",u=P(),i=z("div"),s=z("div"),r=z("h2"),r.textContent=`${n[0].name}`,o=P(),a=z("span"),a.textContent=`难度：${n[0].difficulty}`,c=P(),d=z("p"),d.textContent=`${n[0].description}`,f=P(),h=z("div"),g=z("h3"),g.textContent="解题步骤",p=P(),m=z("ol");for(let l=0;l<G.length;l+=1)G[l].c();v=P(),b=z("div"),w=z("h3"),w.textContent="示例",x=P(),k=z("div"),$=z("p"),$.textContent=`${n[0].example}`,H=P(),Y&&Y.c(),N=P(),T=z("div"),E=z("h3"),E.textContent="相关策略",O=P(),_=z("div");for(let l=0;l<Q.length;l+=1)Q[l].c();L=P(),R=z("div"),A=z("h3"),A.textContent="练习建议",V=P(),I=z("ul");for(let l=0;l<ll.length;l+=1)ll[l].c();D=P(),q=z("div"),q.innerHTML='<a href="https://www.sudokuwiki.org/Sudoku.htm" target="_blank" rel="noopener noreferrer" class="btn btn-primary">🌐 在SudokuWiki查看完整说明</a>',U=P(),F=z("div"),F.innerHTML='<p class="text-sm text-gray-500">提示：在游戏中遇到此策略时，点击&quot;下一步提示&quot;按钮会显示相关说明。</p>',B(e,"class","btn btn-secondary mb-4"),B(t,"class","mb-4"),B(r,"class","text-2xl font-bold text-blue-600 mb-2"),B(a,"class","inline-block px-3 py-1 bg-gray-200 rounded-full text-sm mb-4"),B(d,"class","text-gray-700 mb-4"),B(s,"class","mb-6"),B(g,"class","text-xl font-semibold mb-3"),B(m,"class","list-decimal list-inside space-y-2 text-gray-700"),B(h,"class","mb-6"),B(w,"class","text-xl font-semibold mb-3"),B($,"class","text-gray-700 mb-2"),B(k,"class","bg-gray-100 p-4 rounded-lg"),B(b,"class","mb-6"),B(E,"class","text-xl font-semibold mb-3"),B(_,"class","flex flex-wrap gap-2"),B(T,"class","mb-6"),B(A,"class","text-xl font-semibold mb-3"),B(I,"class","list-disc list-inside space-y-2 text-gray-700"),B(R,"class","mb-6"),B(q,"class","text-center"),B(F,"class","mt-6 text-center")},m(l,C){S(l,t,C),y(t,e),S(l,u,C),S(l,i,C),y(i,s),y(s,r),y(s,o),y(s,a),y(s,c),y(s,d),y(i,f),y(i,h),y(h,g),y(h,p),y(h,m);for(let l=0;l<G.length;l+=1)G[l].m(m,null);y(i,v),y(i,b),y(b,w),y(b,x),y(b,k),y(k,$),y(k,H),Y&&Y.m(k,null),y(i,N),y(i,T),y(T,E),y(T,O),y(T,_);for(let l=0;l<Q.length;l+=1)Q[l].m(_,null);y(i,L),y(i,R),y(R,A),y(R,V),y(R,I);for(let l=0;l<ll.length;l+=1)ll[l].m(I,null);y(i,D),y(i,q),S(l,U,C),S(l,F,C),J||(W=j(e,"click",n[1]),J=!0)},p(l,[n]){if(1&n){let t;for(X=l[0].steps,t=0;t<X.length;t+=1){const e=Ke(l,X,t);G[t]?G[t].p(e,n):(G[t]=lu(e),G[t].c(),G[t].m(m,null))}for(;t<G.length;t+=1)G[t].d(1);G.length=X.length}if(l[0].exampleBoard&&Y.p(l,n),5&n){let t;for(Z=l[0].relatedStrategies,t=0;t<Z.length;t+=1){const e=Ye(l,Z,t);Q[t]?Q[t].p(e,n):(Q[t]=eu(e),Q[t].c(),Q[t].m(_,null))}for(;t<Q.length;t+=1)Q[t].d(1);Q.length=Z.length}if(1&n){let t;for(K=l[0].practiceTips,t=0;t<K.length;t+=1){const e=Ge(l,K,t);ll[t]?ll[t].p(e,n):(ll[t]=uu(e),ll[t].c(),ll[t].m(I,null))}for(;t<ll.length;t+=1)ll[t].d(1);ll.length=K.length}},i:l,o:l,d(l){l&&C(t),l&&C(u),l&&C(i),M(G,l),Y&&Y.d(),M(Q,l),M(ll,l),l&&C(U),l&&C(F),J=!1,W()}}}function su(l,n,t){let{data:e={}}=n,{hideModal:u}=n;const i=e.strategy;function s(l){const n=r.find(n=>n.name===l);n?wn.show("wikiStrategy",{strategy:n,onHide:e.onHide}):alert(`策略 "${l}" 暂未收录，请访问SudokuWiki查看详细说明。`)}const r=[{name:"隐藏单数",difficulty:"简单",description:"在行、列或宫中，某个数字只能填入一个位置。",example:"在某个宫中，数字5只能填入一个格子。",steps:["检查每个宫、行、列","找出只能填入一个位置的数字","填入该数字"],relatedStrategies:["裸单数","唯一候选数"],practiceTips:["从简单的宫开始练习","注意观察候选数的分布"],wikiUrl:"https://www.sudokuwiki.org/Hidden_Singles"},{name:"裸单数",difficulty:"简单",description:"某个格子只有一个候选数。",example:"某个格子只能填入数字3。",steps:["检查每个格子的候选数","找出只有一个候选数的格子","填入该数字"],relatedStrategies:["隐藏单数","唯一候选数"],practiceTips:["先完成所有裸单数","再寻找隐藏单数"],wikiUrl:"https://www.sudokuwiki.org/Naked_Singles"},{name:"唯一候选数",difficulty:"简单",description:"在行、列或宫中，某个候选数只出现在一个位置。",example:"在某个宫中，候选数7只出现在一个格子中。",steps:["标记所有候选数","检查每个宫、行、列","找出唯一出现的候选数","填入该数字"],relatedStrategies:["隐藏单数","裸单数"],practiceTips:["系统性地检查每个区域","注意候选数的唯一性"],wikiUrl:"https://www.sudokuwiki.org/Singles"},{name:"裸数对",difficulty:"中等",description:"两个格子只包含相同的两个候选数。",example:"两个格子都只能填入数字2和5。",steps:["检查每个宫、行、列","找出只包含相同两个候选数的格子","排除其他格子中的这些候选数"],relatedStrategies:["隐藏数对","裸数三"],practiceTips:["注意观察候选数的组合","数对可以排除其他候选数"],wikiUrl:"https://www.sudokuwiki.org/Naked_Pairs"},{name:"隐藏数对",difficulty:"中等",description:"在行、列或宫中，两个候选数只出现在两个格子中。",example:"在某个宫中，候选数3和7只出现在两个格子中。",steps:["检查每个宫、行、列","找出只出现在两个格子中的候选数","这两个格子只能填入这些候选数"],relatedStrategies:["裸数对","隐藏数三"],practiceTips:["注意候选数的分布模式","隐藏数对可以简化候选数"],wikiUrl:"https://www.sudokuwiki.org/Hidden_Pairs"},{name:"X-Wing",difficulty:"困难",description:"某个候选数在两行中都只出现在相同的两列中。",example:"候选数4在两行中都只出现在第2列和第8列。",steps:["检查每行的候选数分布","找出在两行中只出现在相同两列的候选数","排除这两列中其他行的该候选数"],relatedStrategies:["Swordfish","XY-Wing"],practiceTips:["需要仔细观察候选数模式","X-Wing是高级技巧的基础"],wikiUrl:"https://www.sudokuwiki.org/X_Wing"}];return l.$$set=l=>{"data"in l&&t(3,e=l.data),"hideModal"in l&&t(4,u=l.hideModal)},[i,function(){e.onHide?e.onHide():u()},s,e,u,l=>s(l)]}function ru(l,n,t){const e=l.slice();return e[10]=n[t],e}function ou(n){let t;return{c(){t=z("div"),t.innerHTML='<p class="svelte-1vzflgp">当前没有可用的提示</p> \n            <p class="svelte-1vzflgp">请尝试填入更多数字或检查是否有错误</p>',B(t,"class","no-hint svelte-1vzflgp")},m(l,n){S(l,t,n)},p:l,d(l){l&&C(t)}}}function au(l){let n,t,e,i,s,r,o,a,c,d,f,h,g,p,m,v,b,w,x,k,$,H,T,E,O,_,L,R,A=l[0].reasoning.split("\n"),V=[];for(let n=0;n<A.length;n+=1)V[n]=cu(ru(l,A,n));return{c(){n=z("div"),t=z("div"),e=z("div"),i=z("span"),i.textContent=`${l[0].type}`,s=P(),r=z("span"),r.textContent=`${l[0].description}`,o=P(),a=z("a"),c=N("查看详细策略说明 →"),f=P(),h=z("div"),h.innerHTML='<div class="status-item svelte-1vzflgp"><span class="status-icon valid svelte-1vzflgp">✓</span> \n                    <span>策略验证通过</span></div> \n                <div class="status-item svelte-1vzflgp"><span class="status-icon valid svelte-1vzflgp">✓</span> \n                    <span>候选数计算正确</span></div> \n                <div class="status-item svelte-1vzflgp"><span class="status-icon valid svelte-1vzflgp">✓</span> \n                    <span>推理逻辑无误</span></div>',g=P(),p=z("div"),m=z("h3"),m.textContent="推理过程",v=P(),b=z("div");for(let l=0;l<V.length;l+=1)V[l].c();var u;w=P(),x=z("div"),k=z("button"),k.textContent="自动填入",$=P(),H=z("button"),H.textContent="定位格子",T=P(),E=z("button"),E.textContent="查看候选数",O=P(),_=z("div"),_.innerHTML='<p class="svelte-1vzflgp"><strong>提示说明：</strong></p> \n                <ul class="svelte-1vzflgp"><li class="svelte-1vzflgp">此提示经过多重验证，确保100%正确</li> \n                    <li class="svelte-1vzflgp">推理过程详细说明了每一步的逻辑</li> \n                    <li class="svelte-1vzflgp">可以点击&quot;查看详细策略说明&quot;了解更多</li> \n                    <li class="svelte-1vzflgp">建议先理解推理过程，再选择是否自动填入</li></ul>',B(i,"class","badge svelte-1vzflgp"),B(r,"class","strategy-desc svelte-1vzflgp"),B(e,"class","strategy-name svelte-1vzflgp"),B(a,"href",(u=l[0].strategy,d={NakedSingleStrategy:"https://www.sudokuwiki.org/Naked_Singles",HiddenSingleStrategy:"https://www.sudokuwiki.org/Hidden_Singles",PointingPairsStrategy:"https://www.sudokuwiki.org/Intersection_Removal"}[u]||"https://www.sudokuwiki.org/")),B(a,"target","_blank"),B(a,"class","wiki-link svelte-1vzflgp"),B(t,"class","strategy-info svelte-1vzflgp"),B(h,"class","validation-status svelte-1vzflgp"),B(m,"class","svelte-1vzflgp"),B(b,"class","reasoning-text svelte-1vzflgp"),B(p,"class","reasoning-section svelte-1vzflgp"),B(k,"class","btn btn-primary svelte-1vzflgp"),B(H,"class","btn btn-secondary svelte-1vzflgp"),B(E,"class","btn btn-secondary svelte-1vzflgp"),B(x,"class","action-buttons svelte-1vzflgp"),B(_,"class","hint-note svelte-1vzflgp"),B(n,"class","hint-content svelte-1vzflgp")},m(u,d){S(u,n,d),y(n,t),y(t,e),y(e,i),y(e,s),y(e,r),y(t,o),y(t,a),y(a,c),y(n,f),y(n,h),y(n,g),y(n,p),y(p,m),y(p,v),y(p,b);for(let l=0;l<V.length;l+=1)V[l].m(b,null);y(n,w),y(n,x),y(x,k),y(x,$),y(x,H),y(x,T),y(x,E),y(n,O),y(n,_),L||(R=[j(k,"click",l[1]),j(H,"click",l[2]),j(E,"click",l[3])],L=!0)},p(l,n){if(1&n){let t;for(A=l[0].reasoning.split("\n"),t=0;t<A.length;t+=1){const e=ru(l,A,t);V[t]?V[t].p(e,n):(V[t]=cu(e),V[t].c(),V[t].m(b,null))}for(;t<V.length;t+=1)V[t].d(1);V.length=A.length}},d(l){l&&C(n),M(V,l),L=!1,u(R)}}}function cu(n){let t,e=n[10].trim(),u=e&&function(n){let t,e,u=n[10]+"";return{c(){t=z("p"),e=N(u),B(t,"class","svelte-1vzflgp")},m(l,n){S(l,t,n),y(t,e)},p:l,d(l){l&&C(t)}}}(n);return{c(){u&&u.c(),t=T()},m(l,n){u&&u.m(l,n),S(l,t,n)},p(l,n){e&&u.p(l,n)},d(l){u&&u.d(l),l&&C(t)}}}function du(n){let t,e,u,i,s,r,o,a;let c=function(l){return l[0]?au:ou}(n),d=c(n);return{c(){t=z("div"),e=z("div"),u=z("h2"),u.textContent="下一步提示",i=P(),s=z("button"),s.textContent="×",r=P(),d.c(),B(u,"class","svelte-1vzflgp"),B(s,"class","close-btn svelte-1vzflgp"),B(e,"class","modal-header svelte-1vzflgp"),B(t,"class","hint-modal svelte-1vzflgp")},m(l,c){S(l,t,c),y(t,e),y(e,u),y(e,i),y(e,s),y(t,r),d.m(t,null),o||(a=j(s,"click",n[4]),o=!0)},p(l,[n]){d.p(l,n)},i:l,o:l,d(l){l&&C(t),d.d(),o=!1,a()}}}function fu(l,n,t){let{data:e={}}=n,{hideModal:u=()=>{}}=n;const{hint:i,onApply:s,onLocate:r,onShowCandidates:o}=e;return l.$$set=l=>{"data"in l&&t(5,e=l.data),"hideModal"in l&&t(6,u=l.hideModal)},[i,function(){s&&s(),u()},function(){r&&r()},function(){o&&o()},function(){u()},e,u]}var hu={share:class extends Cl{constructor(l){super(),Sl(this,l,ve,me,s,{data:0,hideModal:1})}},qrcode:class extends Cl{constructor(l){super(),Sl(this,l,we,be,s,{data:0})}},settings:class extends Cl{constructor(l){super(),Sl(this,l,Ce,Se,s,{data:4,hideModal:0})}},confirm:class extends Cl{constructor(l){super(),Sl(this,l,He,ze,s,{data:0,hideModal:1})}},prompt:class extends Cl{constructor(l){super(),Sl(this,l,Te,Pe,s,{data:0,hideModal:1})}},welcome:class extends Cl{constructor(l){super(),Sl(this,l,_e,Oe,s,{data:0,hideModal:6})}},gameover:class extends Cl{constructor(l){super(),Sl(this,l,Re,Le,s,{})}},strategyLearning:class extends Cl{constructor(l){super(),Sl(this,l,De,Ie,s,{hideModal:0})}},puzzleLibrary:class extends Cl{constructor(l){super(),Sl(this,l,Xe,We,s,{data:6,hideModal:0})}},wikiStrategy:class extends Cl{constructor(l){super(),Sl(this,l,su,iu,s,{data:3,hideModal:4})}},hint:class extends Cl{constructor(l){super(),Sl(this,l,fu,du,s,{data:5,hideModal:6})}}};function gu(l){let n,t,e,i,s,r,o,a,c,d,f;var h=hu[l[0]];function g(l){return{props:{data:l[1],hideModal:wn.hide}}}return h&&(o=new h(g(l))),{c(){n=z("div"),t=z("button"),i=P(),s=z("div"),r=z("div"),o&&xl(o.$$.fragment),B(t,"class","modal-overlay svelte-lzc8d8"),B(t,"tabindex","-1"),B(r,"class","modal-content svelte-lzc8d8"),B(s,"class","modal-container svelte-lzc8d8"),B(n,"class","modal svelte-lzc8d8")},m(e,u){S(e,n,u),y(n,t),y(n,i),y(n,s),y(s,r),o&&yl(o,r,null),c=!0,d||(f=[j(t,"click",l[2]),j(r,"scroll",mu)],d=!0)},p(n,t){l=n;const e={};if(2&t&&(e.data=l[1]),h!==(h=hu[l[0]])){if(o){hl();const l=o;ml(l.$$.fragment,1,0,()=>{kl(l,1)}),gl()}h?(o=new h(g(l)),xl(o.$$.fragment),pl(o.$$.fragment,1),yl(o,r,null)):o=null}else h&&o.$set(e)},i(l){c||(el(()=>{e||(e=bl(t,Hn,{duration:_l},!0)),e.run(1)}),o&&pl(o.$$.fragment,l),el(()=>{a||(a=bl(s,Pn,{duration:_l},!0)),a.run(1)}),c=!0)},o(l){e||(e=bl(t,Hn,{duration:_l},!1)),e.run(0),o&&ml(o.$$.fragment,l),a||(a=bl(s,Pn,{duration:_l},!1)),a.run(0),c=!1},d(l){l&&C(n),l&&e&&e.end(),o&&kl(o),l&&a&&a.end(),d=!1,u(f)}}}function pu(l){let n,t,e=l[0]!==Ol&&gu(l);return{c(){e&&e.c(),n=T()},m(l,u){e&&e.m(l,u),S(l,n,u),t=!0},p(l,[t]){l[0]!==Ol?e?(e.p(l,t),1&t&&pl(e,1)):(e=gu(l),e.c(),pl(e,1),e.m(n.parentNode,n)):e&&(hl(),ml(e,1,1,()=>{e=null}),gl())},i(l){t||(pl(e),t=!0)},o(l){ml(e),t=!1},d(l){e&&e.d(l),l&&C(n)}}}function mu(l){l.stopPropagation()}function vu(l,n,t){let e,u;c(l,wn,l=>t(0,e=l)),c(l,bn,l=>t(1,u=l));const i=["welcome","gameover"];return[e,u,function(){i.includes(e)||wn.hide()}]}class bu extends Cl{constructor(l){super(),Sl(this,l,vu,pu,s,{})}}function wu(n){let t,e,u;return{c(){t=z("button"),t.innerHTML='<svg class="icon-outline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="width:1.5em;height:1.5em;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 10l5 5m0 0l5-5m-5 5V4"></path></svg> \n\t\t\t<span class="ml-1">导入</span>',B(t,"slot","import"),B(t,"class","btn btn-header bg-primary text-white flex items-center justify-center"),B(t,"title","导入SudokuWiki题目")},m(l,i){S(l,t,i),e||(u=j(t,"click",n[3]),e=!0)},p:l,d(l){l&&C(t),e=!1,u()}}}function xu(l){let n,t,e,i,s,r,o,a,c,d,f,h,g=l[2]&&yu(l);return{c(){n=z("div"),t=z("div"),e=z("div"),e.textContent="请输入SudokuWiki题目页URL：",i=P(),s=z("input"),r=P(),g&&g.c(),o=P(),a=z("button"),a.textContent="解析并导入",c=P(),d=z("button"),d.textContent="取消",B(e,"class","mb-2"),B(s,"class","input input-bordered w-full mb-2"),B(s,"placeholder","https://www.sudokuwiki.org/Sudoku.htm?..."),B(a,"class","btn btn-primary w-full mb-2"),B(d,"class","btn w-full"),B(t,"class","bg-white p-6 rounded shadow-xl max-w-xs"),B(n,"class","fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-30")},m(u,p){S(u,n,p),y(n,t),y(t,e),y(t,i),y(t,s),L(s,l[1]),y(t,r),g&&g.m(t,null),y(t,o),y(t,a),y(t,c),y(t,d),f||(h=[j(s,"input",l[5]),j(a,"click",l[4]),j(d,"click",l[6])],f=!0)},p(l,n){2&n&&s.value!==l[1]&&L(s,l[1]),l[2]?g?g.p(l,n):(g=yu(l),g.c(),g.m(t,o)):g&&(g.d(1),g=null)},d(l){l&&C(n),g&&g.d(),f=!1,u(h)}}}function yu(l){let n,t;return{c(){n=z("div"),t=N(l[2]),B(n,"class","text-red-500 mb-2")},m(l,e){S(l,n,e),y(n,t)},p(l,n){4&n&&_(t,l[2])},d(l){l&&C(n)}}}function ku(l){let n,t,e,u,i,s,r,o,a,c;t=new fe({props:{$$slots:{import:[wu]},$$scope:{ctx:l}}}),i=new Qt({}),r=new bu({});let d=l[0]&&xu(l);return{c(){n=z("header"),xl(t.$$.fragment),e=P(),u=z("footer"),xl(i.$$.fragment),s=P(),xl(r.$$.fragment),o=P(),d&&d.c(),a=T()},m(l,f){S(l,n,f),yl(t,n,null),S(l,e,f),S(l,u,f),yl(i,u,null),S(l,s,f),yl(r,l,f),S(l,o,f),d&&d.m(l,f),S(l,a,f),c=!0},p(l,[n]){const e={};1073741824&n&&(e.$$scope={dirty:n,ctx:l}),t.$set(e),l[0]?d?d.p(l,n):(d=xu(l),d.c(),d.m(a.parentNode,a)):d&&(d.d(1),d=null)},i(l){c||(pl(t.$$.fragment,l),pl(i.$$.fragment,l),pl(r.$$.fragment,l),c=!0)},o(l){ml(t.$$.fragment,l),ml(i.$$.fragment,l),ml(r.$$.fragment,l),c=!1},d(l){l&&C(n),kl(t),l&&C(e),l&&C(u),kl(i),l&&C(s),kl(r,l),l&&C(o),d&&d.d(l),l&&C(a)}}}function $u(l,n,t){let e;c(l,ut,l=>t(17,e=l)),dn.subscribe(l=>{l&&(vn.pause(),wn.show("gameover"))});let u=0,i=null;en.subscribe(l=>{i=l}),on.subscribe(l=>{if(!i||!i.showErrors)return;const n=Date.now();if(n-u<1e3)return;let t=0;for(let n=0;n<9;n++)for(let e=0;e<9;e++)0!==l[n][e]&&t++;if(t>=17)try{u=n,yn.setSolution(l)}catch(l){console.error("计算正确答案时出错:",l)}});let s=!1,r="",o="";G(()=>{let l,n=location.hash;n.startsWith("#")&&(n=n.slice(1)),Il(n)&&(l=n),wn.show("welcome",{onHide:vn.resume,sencode:l})});return[s,r,o,function(){t(0,s=!0),t(1,r=""),t(2,o="")},async function(){t(2,o="");try{const l=await fetch(r),n=await l.text(),e=n.match(/var puzzle = \"([0-9\.]{81})\"/);if(!e)return void t(2,o="未找到有效棋盘数据");const u=e[1].replace(/\./g,"0").split("").map(Number);if(81!==u.length)return void t(2,o="棋盘数据长度不正确");let i="";const a=n.match(/<span[^>]*id=['\"]level['\"][^>]*>([^<]+)<\/span>/i);if(a)i=a[1].trim();else{const l=n.match(/Difficulty:\s*<\/b>\s*([A-Za-z]+)/i);l&&(i=l[1].trim())}for(let l=0;l<9;l++)for(let n=0;n<9;n++)on.set({x:n,y:l},u[9*l+n]);t(0,s=!1),i?alert(`导入成功，难度评级：${i}`):alert("导入成功，未能识别难度标签")}catch(l){t(2,o="URL解析失败或网络错误")}},function(){r=this.value,t(1,r)},()=>t(0,s=!1)]}return new class extends Cl{constructor(l){super(),Sl(this,l,$u,ku,s,{})}}({target:document.getElementById("app")})}();
