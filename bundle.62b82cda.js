var app=function(){"use strict";function l(){}const n=l=>l;function t(l){return l()}function e(){return Object.create(null)}function u(l){l.forEach(t)}function i(l){return"function"==typeof l}function s(l,n){return l!=l?n==n:l!==n||l&&"object"==typeof l||"function"==typeof l}let r;function o(n,...t){if(null==n)return l;const e=n.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function a(l){let n;return o(l,l=>n=l)(),n}function c(l,n,t){l.$$.on_destroy.push(o(n,t))}function d(l,n,t,e){if(l){const u=f(l,n,t,e);return l[0](u)}}function f(l,n,t,e){return l[1]&&e?function(l,n){for(const t in n)l[t]=n[t];return l}(t.ctx.slice(),l[1](e(n))):t.ctx}function h(l,n,t,e){if(l[2]&&e){const u=l[2](e(t));if(void 0===n.dirty)return u;if("object"==typeof u){const l=[],t=Math.max(n.dirty.length,u.length);for(let e=0;e<t;e+=1)l[e]=n.dirty[e]|u[e];return l}return n.dirty|u}return n.dirty}function m(l,n,t,e,u,i){if(u){const s=f(n,t,e,i);l.p(s,u)}}function p(l){if(l.ctx.length>32){const n=[],t=l.ctx.length/32;for(let l=0;l<t;l++)n[l]=-1;return n}return-1}const g="undefined"!=typeof window;let b=g?()=>window.performance.now():()=>Date.now(),v=g?l=>requestAnimationFrame(l):l;const w=new Set;function x(l){w.forEach(n=>{n.c(l)||(w.delete(n),n.f())}),0!==w.size&&v(x)}function y(l,n){l.appendChild(n)}function k(l){if(!l)return document;const n=l.getRootNode?l.getRootNode():l.ownerDocument;return n&&n.host?n:l.ownerDocument}function $(l){const n=z("style");return function(l,n){y(l.head||l,n)}(k(l),n),n.sheet}function C(l,n,t){l.insertBefore(n,t||null)}function S(l){l.parentNode.removeChild(l)}function M(l,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].d(n)}function z(l){return document.createElement(l)}function N(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function H(l){return document.createTextNode(l)}function j(){return H(" ")}function P(){return H("")}function T(l,n,t,e){return l.addEventListener(n,t,e),()=>l.removeEventListener(n,t,e)}function B(l){return function(n){return n.preventDefault(),l.call(this,n)}}function E(l,n,t){null==t?l.removeAttribute(n):l.getAttribute(n)!==t&&l.setAttribute(n,t)}function L(l){return""===l?null:+l}function O(l,n){n=""+n,l.wholeText!==n&&(l.data=n)}function _(l,n){l.value=null==n?"":n}function R(l,n,t,e){null===t?l.style.removeProperty(n):l.style.setProperty(n,t,e?"important":"")}function D(l,n){for(let t=0;t<l.options.length;t+=1){const e=l.options[t];if(e.__value===n)return void(e.selected=!0)}l.selectedIndex=-1}function A(l,n,t){l.classList[t?"add":"remove"](n)}function V(l,n,{bubbles:t=!1,cancelable:e=!1}={}){const u=document.createEvent("CustomEvent");return u.initCustomEvent(l,t,e,n),u}const I=new Map;let q,U=0;function F(l,n,t,e,u,i,s,r=0){const o=16.666/e;let a="{\n";for(let l=0;l<=1;l+=o){const e=n+(t-n)*i(l);a+=100*l+`%{${s(e,1-e)}}\n`}const c=a+`100% {${s(t,1-t)}}\n}`,d=`__svelte_${function(l){let n=5381,t=l.length;for(;t--;)n=(n<<5)-n^l.charCodeAt(t);return n>>>0}(c)}_${r}`,f=k(l),{stylesheet:h,rules:m}=I.get(f)||function(l,n){const t={stylesheet:$(n),rules:{}};return I.set(l,t),t}(f,l);m[d]||(m[d]=!0,h.insertRule(`@keyframes ${d} ${c}`,h.cssRules.length));const p=l.style.animation||"";return l.style.animation=`${p?`${p}, `:""}${d} ${e}ms linear ${u}ms 1 both`,U+=1,d}function W(l,n){const t=(l.style.animation||"").split(", "),e=t.filter(n?l=>l.indexOf(n)<0:l=>-1===l.indexOf("__svelte")),u=t.length-e.length;u&&(l.style.animation=e.join(", "),U-=u,U||v(()=>{U||(I.forEach(l=>{const{stylesheet:n}=l;let t=n.cssRules.length;for(;t--;)n.deleteRule(t);l.rules={}}),I.clear())}))}function J(l){q=l}function X(){if(!q)throw new Error("Function called outside component initialization");return q}function G(l){X().$$.on_mount.push(l)}function Y(){const l=X();return(n,t,{cancelable:e=!1}={})=>{const u=l.$$.callbacks[n];if(u){const i=V(n,t,{cancelable:e});return u.slice().forEach(n=>{n.call(l,i)}),!i.defaultPrevented}return!0}}function Z(l,n){const t=l.$$.callbacks[n.type];t&&t.slice().forEach(l=>l.call(this,n))}const K=[],Q=[],ll=[],nl=[],tl=Promise.resolve();let el=!1;function ul(l){ll.push(l)}function il(l){nl.push(l)}const sl=new Set;let rl,ol=0;function al(){const l=q;do{for(;ol<K.length;){const l=K[ol];ol++,J(l),cl(l.$$)}for(J(null),K.length=0,ol=0;Q.length;)Q.pop()();for(let l=0;l<ll.length;l+=1){const n=ll[l];sl.has(n)||(sl.add(n),n())}ll.length=0}while(K.length);for(;nl.length;)nl.pop()();el=!1,sl.clear(),J(l)}function cl(l){if(null!==l.fragment){l.update(),u(l.before_update);const n=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,n),l.after_update.forEach(ul)}}function dl(l,n,t){l.dispatchEvent(V(`${n?"intro":"outro"}${t}`))}const fl=new Set;let hl;function ml(){hl={r:0,c:[],p:hl}}function pl(){hl.r||u(hl.c),hl=hl.p}function gl(l,n){l&&l.i&&(fl.delete(l),l.i(n))}function bl(l,n,t,e){if(l&&l.o){if(fl.has(l))return;fl.add(l),hl.c.push(()=>{fl.delete(l),e&&(t&&l.d(1),e())}),l.o(n)}else e&&e()}const vl={duration:0};function wl(t,e,s,r){let o=e(t,s),a=r?0:1,c=null,d=null,f=null;function h(){f&&W(t,f)}function m(l,n){const t=l.b-a;return n*=Math.abs(t),{a:a,b:l.b,d:t,duration:n,start:l.start,end:l.start+n,group:l.group}}function p(e){const{delay:i=0,duration:s=300,easing:r=n,tick:p=l,css:g}=o||vl,y={start:b()+i,b:e};e||(y.group=hl,hl.r+=1),c||d?d=y:(g&&(h(),f=F(t,a,e,s,i,r,g)),e&&p(0,1),c=m(y,s),ul(()=>dl(t,e,"start")),function(l){let n;0===w.size&&v(x),new Promise(t=>{w.add(n={c:l,f:t})})}(l=>{if(d&&l>d.start&&(c=m(d,s),d=null,dl(t,c.b,"start"),g&&(h(),f=F(t,a,c.b,c.duration,0,r,o.css))),c)if(l>=c.end)p(a=c.b,1-a),dl(t,c.b,"end"),d||(c.b?h():--c.group.r||u(c.group.c)),c=null;else if(l>=c.start){const n=l-c.start;a=c.a+c.d*r(n/c.duration),p(a,1-a)}return!(!c&&!d)}))}return{run(l){i(o)?(rl||(rl=Promise.resolve(),rl.then(()=>{rl=null})),rl).then(()=>{o=o(),p(l)}):p(l)},end(){h(),c=d=null}}}function xl(l,n,t){const e=l.$$.props[n];void 0!==e&&(l.$$.bound[e]=t,t(l.$$.ctx[e]))}function yl(l){l&&l.c()}function kl(l,n,e,s){const{fragment:r,on_mount:o,on_destroy:a,after_update:c}=l.$$;r&&r.m(n,e),s||ul(()=>{const n=o.map(t).filter(i);a?a.push(...n):u(n),l.$$.on_mount=[]}),c.forEach(ul)}function $l(l,n){const t=l.$$;null!==t.fragment&&(u(t.on_destroy),t.fragment&&t.fragment.d(n),t.on_destroy=t.fragment=null,t.ctx=[])}function Cl(l,n){-1===l.$$.dirty[0]&&(K.push(l),el||(el=!0,tl.then(al)),l.$$.dirty.fill(0)),l.$$.dirty[n/31|0]|=1<<n%31}function Sl(n,t,i,s,r,o,a,c=[-1]){const d=q;J(n);const f=n.$$={fragment:null,ctx:null,props:o,update:l,not_equal:r,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(d?d.$$.context:[])),callbacks:e(),dirty:c,skip_bound:!1,root:t.target||d.$$.root};a&&a(f.root);let h=!1;if(f.ctx=i?i(n,t.props||{},(l,t,...e)=>{const u=e.length?e[0]:t;return f.ctx&&r(f.ctx[l],f.ctx[l]=u)&&(!f.skip_bound&&f.bound[l]&&f.bound[l](u),h&&Cl(n,l)),t}):[],f.update(),h=!0,u(f.before_update),f.fragment=!!s&&s(f.ctx),t.target){if(t.hydrate){const l=function(l){return Array.from(l.childNodes)}(t.target);f.fragment&&f.fragment.l(l),l.forEach(S)}else f.fragment&&f.fragment.c();t.intro&&gl(n.$$.fragment),kl(n,t.target,t.anchor,t.customElement),al()}J(d)}class Ml{$destroy(){$l(this,1),this.$destroy=l}$on(l,n){const t=this.$$.callbacks[l]||(this.$$.callbacks[l]=[]);return t.push(n),()=>{const l=t.indexOf(n);-1!==l&&t.splice(l,1)}}$set(l){var n;this.$$set&&(n=l,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(l),this.$$.skip_bound=!1)}}const zl="custom",Nl={veryeasy:"Very Easy",easy:"Easy",medium:"Medium",hard:"Hard"},Hl={darkTheme:!1,displayTimer:!0,hintsLimited:!0,hints:5,highlightCells:!0,highlightSame:!0,highlightConflicting:!0,showErrors:!1},jl=81,Pl=[[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8],[1,0],[1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[2,0],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[3,0],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[3,7],[3,8],[4,0],[4,1],[4,2],[4,3],[4,4],[4,5],[4,6],[4,7],[4,8],[5,0],[5,1],[5,2],[5,3],[5,4],[5,5],[5,6],[5,7],[5,8],[6,0],[6,1],[6,2],[6,3],[6,4],[6,5],[6,6],[6,7],[6,8],[7,0],[7,1],[7,2],[7,3],[7,4],[7,5],[7,6],[7,7],[7,8],[8,0],[8,1],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8]],Tl=[[1,1],[1,2],[1,3],[2,1],[2,2],[2,3],[3,1],[3,2],[3,3]],Bl="_",El=new RegExp("^[a-zA-Z0-9]+[-_][a-zA-Z0-9]+$"),Ll="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",Ol="none",_l=400,Rl=_l,Dl=["Excellent!","Wow!","Congratulations!","Oh yeah!","Impressive!","Good work!","You did great!","Applause!","Great!"];class Al{static encode(l){let n=BigInt(62),t="";for(;0<l;)t=Ll.charAt(Number(l%n))+t,l/=n;return t||"0"}static decode(l){let n=BigInt(62),t=0n;for(let e=0;e<l.length;e++)t=t*n+BigInt(Ll.indexOf(l[e]));return t}}function Vl(l){const n=l.flat(),t=function(l){for(let n=0;n<jl;n++){if(0!==l[80-n])return!1;if(0!==l[n])return!0}return!1}(n);t&&n.reverse();let e="",u="";for(let l=0;l<jl;l++)e+=0===n[l]?"0":"1",n[l]>0&&(u+=n[l]-1);return Al.encode(BigInt("0b"+e))+(t?Bl:"-")+Al.encode(BigInt(u))}function Il(l){return l&&0!==l.trim().length&&El.test(l)}const ql=[];function Ul(n,t=l){let e;const u=new Set;function i(l){if(s(n,l)&&(n=l,e)){const l=!ql.length;for(const l of u)l[1](),ql.push(l,n);if(l){for(let l=0;l<ql.length;l+=2)ql[l][0](ql[l+1]);ql.length=0}}}return{set:i,update:function(l){i(l(n))},subscribe:function(s,r=l){const o=[s,r];return u.add(o),1===u.size&&(e=t(i)||l),s(n),()=>{u.delete(o),0===u.size&&(e(),e=null)}}}}function Fl(n,t,e){const s=!Array.isArray(n),r=s?[n]:n,a=t.length<2;return c=n=>{let e=!1;const c=[];let d=0,f=l;const h=()=>{if(d)return;f();const e=t(s?c[0]:c,n);a?n(e):f=i(e)?e:l},m=r.map((l,n)=>o(l,l=>{c[n]=l,d&=~(1<<n),e&&h()},()=>{d|=1<<n}));return e=!0,h(),function(){u(m),f()}},{subscribe:Ul(e,c).subscribe};var c}const Wl=function(){const l=Ul({x:null,y:null});return{subscribe:l.subscribe,set(n,t){l.set({x:n,y:t})},move(n=0,t=0){l.update(l=>{let e=l.x+n,u=l.y+t;return e<0&&(e=8),e>=9&&(e=0),u<0&&(u=8),u>=9&&(u=0),{x:e,y:u}})},reset(){this.set(null,null)}}}();const Jl=function(){const l=Ul((()=>{const l=localStorage.getItem("difficulty");return Nl.hasOwnProperty(l)?l:Object.keys(Nl)[0]})());return{subscribe:l.subscribe,set(n){Nl.hasOwnProperty(n)&&(l.set(n),localStorage.setItem("difficulty",n))},setCustom(){l.set(zl)}}}();function Xl(l,n,t){return function(l,n,t){for(var e=9*Math.floor(t/9),u=0;u<9;u+=1)if(l[e+u]===n)return!1;return!0}(l,n,t)&&function(l,n,t){for(var e=t%9,u=0;u<9;u+=1)if(l[e+9*u]===n)return!1;return!0}(l,n,t)&&function(l,n,t){for(var e=t-t%9%3-Math.floor(t/9)%3*9,u=0;u<9;u+=1)if(l[e+9*Math.floor(u/3)+u%3]===n)return!1;return!0}(l,n,t)}var Gl=0;function Yl(l,n,t){if(0!==t&&++Gl>t)throw new Error("Max iterations reached. No solution found.");if(n>=81)return!0;if(0!==l[n])return Yl(l,n+1,t);for(var e=1;e<=9;e+=1)if(Xl(l,e,n)&&(l[n]=e,Yl(l,n+1,t)))return!0;return l[n]=0,!1}var Zl=function(l,n){var t={emptyValue:"0",hintCheck:!0,outputArray:!1,maxIterations:1<<20};if(void 0!==n&&Object.assign(t,n),"string"==typeof l&&(l=l.split("")),!Array.isArray(l))throw new TypeError("Puzzle must be string or array.");if(81!==l.length)throw new Error("Puzzle is an invalid size.");var e=0;if(l=l.map(function(l){if(l===t.emptyValue||l===parseInt(t.emptyValue,10))return 0;e++;var n=parseInt(l,10);if(isNaN(n)||n>9||n<1)throw new TypeError("Invalid puzzle value: "+l);return n}),t.hintCheck&&e<17)throw new Error("A valid puzzle must have at least 17 hints.");if(!Yl(l,0,t.maxIterations))throw new Error("Puzzle could not be solved.");return t.outputArray?l:l.join("")};function Kl(l,n,t){return l(t={path:n,exports:{},require:function(l,n){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==n&&t.path)}},t.exports),t.exports}var Ql=Kl(function(l,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRandomIntBetween=function(l,n){return Math.floor(Math.random()*(n-l))+l}}),ln=Kl(function(l,n){Object.defineProperty(n,"__esModule",{value:!0});var t=[[[null,8,null,null,null,null,null,null,null],[null,6,null,null,1,null,null,null,5],[null,null,5,8,null,2,null,4,7],[null,null,8,4,null,null,null,9,1],[null,9,null,null,null,null,null,8,null],[null,null,null,6,null,null,7,null,null],[null,null,null,null,5,null,null,3,null],[null,null,null,null,null,null,null,null,null],[2,1,null,null,6,null,null,null,9]],[[5,null,2,null,null,null,null,1,null],[null,null,7,null,8,4,6,null,null],[null,null,null,3,null,null,null,2,null],[null,3,null,null,null,7,null,null,null],[8,null,5,null,null,6,2,null,null],[null,null,null,1,4,null,null,null,null],[null,9,8,null,null,null,5,null,null],[1,null,null,6,null,null,4,null,null],[null,4,null,null,5,null,null,null,null]],[[null,null,null,null,null,null,1,null,null],[null,2,null,1,7,null,null,null,4],[null,7,null,null,null,null,8,null,9],[5,null,null,null,null,3,null,null,7],[null,null,null,8,4,null,null,null,null],[7,null,2,null,null,9,4,null,null],[null,null,8,null,3,null,null,null,null],[4,null,null,5,null,null,9,null,3],[null,1,null,null,null,8,null,null,null]],[[null,4,null,null,6,null,null,9,null],[null,null,null,null,7,null,8,null,1],[null,null,null,5,null,8,2,null,null],[2,null,null,null,8,null,null,null,5],[null,null,8,null,null,null,null,1,2],[7,null,null,9,null,3,null,null,null],[null,null,null,null,5,4,6,null,null],[null,null,null,null,null,null,null,null,3],[null,null,null,7,null,null,null,null,4]],[[null,null,null,null,null,null,null,7,2],[null,null,null,null,4,null,6,null,null],[null,null,null,null,null,null,5,null,null],[null,null,6,4,null,3,null,5,null],[null,8,null,null,null,6,1,null,null],[3,9,1,2,null,null,null,4,null],[7,null,null,null,8,null,null,null,null],[null,null,null,1,null,null,null,null,null],[null,null,4,9,6,null,null,null,8]],[[null,null,9,null,1,4,null,null,null],[null,null,null,null,null,null,null,null,null],[3,6,null,null,null,null,7,null,4],[8,null,1,null,null,5,9,null,null],[4,2,7,null,null,null,6,null,null],[null,null,null,null,7,null,null,null,null],[null,null,4,null,9,1,null,8,null],[7,null,null,null,null,null,null,null,6],[null,null,null,5,null,null,null,3,null]],[[null,6,null,null,null,5,null,3,2],[null,5,null,null,4,null,1,null,null],[null,null,null,null,7,null,null,6,null],[null,1,3,null,null,null,null,null,null],[5,null,null,null,null,4,null,null,3],[2,null,null,null,null,null,null,null,null],[null,8,null,null,1,2,4,7,null],[null,4,null,7,null,null,null,null,6],[null,null,null,null,6,null,8,9,null]],[[null,1,null,null,null,null,3,4,null],[null,null,2,null,4,null,null,null,null],[null,null,null,null,null,1,7,null,2],[9,null,null,1,null,null,null,null,5],[null,null,null,6,null,2,null,3,9],[1,null,null,3,null,null,null,null,4],[null,null,null,5,2,7,null,null,null],[null,9,null,null,8,6,null,null,null],[null,null,null,null,null,null,2,null,null]],[[3,null,null,null,null,null,5,null,null],[8,null,2,null,null,null,null,7,null],[7,9,null,null,null,5,null,null,2],[null,null,null,3,null,4,7,null,null],[null,null,null,null,null,6,null,4,3],[null,1,null,null,5,8,null,9,null],[null,null,null,6,2,null,null,5,null],[null,3,null,null,null,null,8,null,null],[null,null,null,null,null,null,null,1,null]]],e=[[[null,null,null,null,null,null,2,null,null],[9,7,6,null,null,null,null,5,null],[null,null,null,null,8,3,null,null,null],[8,null,1,null,null,null,null,null,null],[5,null,7,null,null,null,6,4,1],[null,null,null,2,null,null,null,null,null],[null,null,null,8,null,null,null,null,4],[null,4,null,null,9,5,3,null,2],[7,null,5,null,null,null,null,null,null]],[[6,null,null,null,null,null,3,null,null],[null,null,5,null,3,7,null,null,null],[null,null,null,5,null,null,null,null,null],[null,7,null,3,8,null,null,4,null],[null,2,null,null,1,null,null,null,null],[null,null,8,null,null,6,null,9,null],[8,null,null,6,null,9,null,null,null],[null,null,4,null,null,8,7,null,null],[null,9,2,7,null,null,null,null,6]],[[null,null,1,null,null,9,null,4,null],[6,null,null,null,4,null,null,null,null],[null,2,8,null,null,null,9,3,null],[null,null,null,null,null,null,6,7,null],[null,null,null,8,null,null,null,null,4],[null,null,null,5,2,4,3,null,null],[null,null,null,1,null,null,5,6,null],[null,null,6,null,null,null,null,null,2],[1,null,5,9,null,null,null,null,null]],[[8,7,null,null,null,null,null,null,null],[9,null,null,null,4,null,null,5,null],[4,null,null,null,2,9,7,null,null],[null,6,null,null,7,5,null,null,3],[null,null,null,null,3,null,null,null,9],[null,null,null,null,null,null,2,null,null],[null,null,null,null,null,7,null,null,null],[null,null,3,4,null,null,9,null,null],[2,8,5,null,null,null,null,null,null]],[[null,null,null,null,null,null,7,null,null],[null,4,null,null,5,null,1,null,null],[6,9,2,null,null,null,null,3,null],[null,null,1,null,null,9,null,null,null],[null,5,null,null,null,6,null,8,null],[null,2,null,7,null,4,null,9,null],[7,null,9,null,null,null,null,null,3],[null,null,null,null,null,null,null,7,null],[null,8,null,null,6,null,null,null,null]],[[5,null,null,null,1,null,9,null,4],[null,9,null,6,null,null,7,null,null],[6,null,null,null,null,null,null,1,null],[null,null,null,null,null,3,5,null,null],[2,null,null,null,null,null,null,null,3],[null,5,9,8,null,null,null,null,null],[null,null,null,null,null,null,1,null,null],[null,4,null,3,null,8,null,null,6],[null,3,null,9,null,null,null,4,null]],[[null,3,null,null,null,null,null,null,4],[null,null,null,6,null,null,1,null,null],[4,null,null,null,2,7,null,null,null],[null,null,null,null,4,null,null,2,5],[null,null,7,null,null,null,null,null,null],[6,null,8,null,null,1,null,null,null],[null,null,null,null,8,null,7,null,null],[null,1,null,null,null,null,null,6,null],[null,null,3,null,null,5,null,null,8]],[[null,null,3,6,null,2,null,9,null],[null,null,null,9,null,null,null,null,null],[null,null,6,1,7,null,2,null,null],[7,null,null,null,null,null,null,8,null],[null,null,null,null,8,5,3,null,null],[null,null,9,null,null,null,null,null,null],[4,null,null,7,null,9,1,null,null],[null,null,null,null,4,null,null,null,2],[null,null,null,null,null,1,7,5,null]],[[8,null,4,1,null,null,null,null,null],[null,null,1,9,3,2,null,null,4],[null,null,null,null,null,null,1,null,null],[1,5,null,null,null,null,null,7,null],[null,null,null,null,null,7,null,1,6],[2,null,null,null,null,5,null,null,null],[6,null,null,null,null,1,null,5,null],[null,null,null,3,null,null,2,null,null],[null,null,null,4,null,null,null,null,7]],[[4,null,null,null,null,1,8,null,null],[null,null,null,null,6,null,null,null,5],[null,5,1,null,null,null,null,null,null],[9,null,3,8,5,null,null,2,null],[null,null,null,null,null,7,null,6,null],[null,null,null,null,null,null,null,null,9],[6,7,null,null,null,3,null,4,null],[null,null,null,4,null,8,2,null,null],[null,3,null,null,null,null,null,null,null]]],u=[[[null,null,null,null,null,null,null,null,null],[null,null,8,null,2,6,null,null,null],[3,null,null,null,null,null,1,8,9],[null,null,null,9,5,null,null,null,3],[7,null,9,null,null,null,null,null,null],[4,null,null,null,6,1,5,null,null],[1,null,null,3,null,null,2,null,5],[null,null,null,null,null,null,null,null,null],[null,null,null,5,8,null,null,null,null]],[[null,null,9,null,5,null,2,null,7],[null,null,null,1,null,null,null,null,null],[2,1,null,null,6,null,4,null,5],[1,4,null,null,7,null,null,null,null],[null,6,2,null,null,null,null,null,null],[null,null,null,5,2,9,null,null,null],[null,null,null,7,null,null,null,null,8],[null,null,1,null,null,null,null,3,null],[5,8,null,null,null,null,null,null,null]],[[1,null,null,null,7,null,null,2,null],[null,null,5,null,null,null,null,null,null],[null,8,null,null,null,3,6,null,null],[6,5,null,null,3,1,null,null,null],[null,null,null,5,null,null,null,6,null],[3,null,9,null,6,null,7,null,1],[5,null,2,null,null,4,null,null,null],[null,null,null,null,null,null,null,9,null],[9,null,4,null,null,null,8,null,null]],[[9,5,null,1,null,null,2,null,null],[null,7,null,3,null,null,null,null,null],[null,null,null,null,null,2,null,6,9],[null,null,null,null,null,null,null,null,null],[null,null,null,5,null,null,null,null,null],[null,null,4,null,3,9,null,null,8],[7,null,6,null,null,null,null,null,3],[8,null,null,null,null,null,1,4,6],[3,null,null,null,null,null,null,9,5]],[[null,4,null,null,8,null,null,null,null],[null,null,null,null,9,1,6,null,null],[null,null,null,null,null,null,3,5,null],[5,null,null,null,null,null,null,null,null],[null,null,6,3,null,8,null,null,1],[null,null,7,9,null,null,null,null,null],[7,3,9,1,null,4,null,8,null],[2,8,null,null,null,null,null,null,null],[null,null,null,null,null,null,1,2,null]],[[null,8,null,5,4,null,null,null,null],[null,null,null,null,null,6,null,1,3],[null,null,null,null,null,null,8,6,null],[null,2,null,null,null,null,null,null,7],[null,null,4,null,null,null,9,null,null],[9,3,null,null,6,null,null,null,null],[null,6,null,2,null,null,7,null,null],[5,null,null,3,null,null,4,2,null],[null,null,7,null,5,1,null,null,null]],[[null,null,null,null,null,null,null,null,null],[null,8,null,7,9,1,null,null,null],[1,null,null,null,null,null,7,5,null],[null,null,null,null,3,null,null,null,null],[9,null,7,5,null,null,null,4,2],[5,null,2,9,7,4,null,null,null],[8,null,null,1,null,null,null,null,null],[null,null,null,null,2,null,null,null,9],[null,null,4,null,5,9,null,2,null]],[[null,null,null,null,null,null,null,null,null],[1,null,5,null,null,null,2,8,null],[null,null,6,null,7,8,null,null,null],[3,null,null,null,null,null,7,null,null],[null,null,8,7,1,3,null,null,4],[null,null,null,8,null,null,null,null,null],[8,null,3,null,null,null,null,4,null],[2,null,null,6,null,null,5,1,null],[null,null,null,null,null,4,null,null,7]],[[6,9,null,1,null,null,null,null,null],[null,null,null,null,3,null,null,8,null],[3,null,null,2,null,9,null,null,null],[null,null,8,null,1,null,null,3,null],[4,null,null,null,null,null,null,null,null],[5,null,null,null,null,6,8,null,null],[null,null,2,3,null,8,4,null,null],[null,null,7,null,9,4,2,null,null],[null,null,null,null,null,null,null,5,null]],[[null,null,null,null,7,null,null,1,null],[4,6,null,null,1,null,3,null,null],[null,null,5,4,null,null,null,7,null],[7,null,null,null,null,3,4,null,null],[null,null,null,null,null,null,null,null,9],[6,null,2,9,null,null,null,null,5],[null,8,null,null,2,null,5,null,null],[null,null,null,null,null,null,null,2,null],[null,5,null,null,null,null,null,9,1]]],i=[[[null,null,null,null,null,9,5,null,null],[null,4,null,null,null,2,null,null,8],[null,null,null,1,null,3,null,null,9],[null,null,6,null,null,5,null,null,null],[null,null,4,9,null,null,null,null,null],[null,null,null,2,7,6,null,3,null],[5,3,null,null,null,null,1,null,null],[null,1,null,null,null,null,null,4,5],[null,null,null,6,null,null,8,null,null]],[[null,null,3,2,null,9,5,null,null],[8,null,null,null,5,null,null,null,null],[null,null,null,null,null,null,null,null,2],[null,3,null,null,null,8,null,null,null],[null,null,null,null,null,null,6,1,null],[null,9,null,1,null,null,null,null,7],[null,null,null,null,null,6,null,null,9],[null,6,1,3,null,null,null,8,null],[null,8,5,7,null,null,3,null,null]],[[5,null,null,null,null,null,null,null,null],[null,3,null,9,6,null,null,7,null],[2,null,null,null,null,4,8,null,null],[null,null,5,null,null,null,null,8,1],[null,null,9,null,7,null,null,null,null],[1,6,null,5,null,null,null,null,7],[3,8,7,null,2,5,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,8,null,6,null]],[[2,null,null,null,8,null,null,null,null],[null,4,null,null,null,9,6,null,null],[null,null,6,2,null,null,null,null,null],[5,null,null,1,null,null,null,6,null],[6,null,null,null,null,null,3,null,null],[1,null,9,7,null,8,null,null,2],[null,null,8,null,null,null,4,3,null],[3,null,null,null,7,null,null,null,null],[null,1,null,3,null,5,null,null,null]],[[3,null,null,null,null,9,1,null,2],[null,5,8,null,null,null,9,7,null],[7,null,null,null,null,null,null,null,null],[null,null,null,null,4,3,null,null,null],[null,null,3,9,null,null,null,null,null],[9,null,null,7,null,null,null,null,null],[null,9,null,null,6,null,5,1,3],[null,null,2,null,8,null,4,null,null],[null,null,5,null,null,4,2,null,null]],[[null,null,null,1,5,null,8,3,null],[null,null,9,null,7,4,null,null,null],[null,null,null,null,null,null,null,null,6],[null,9,null,null,4,1,null,null,2],[null,null,null,null,null,3,6,5,null],[3,null,2,null,null,null,null,null,4],[null,5,null,9,null,null,null,8,3],[6,null,null,null,null,null,4,null,null],[null,2,null,null,null,null,null,null,null]],[[null,null,5,null,null,4,8,null,null],[null,1,null,null,9,2,null,null,3],[9,null,2,null,null,null,null,5,null],[null,6,null,null,null,null,null,3,9],[null,null,3,null,null,1,7,null,null],[null,null,null,null,null,null,null,null,null],[5,null,null,4,null,null,null,8,null],[6,null,null,null,3,5,null,null,null],[null,null,9,1,null,null,null,null,7]],[[8,null,null,7,null,5,9,null,null],[7,null,6,2,null,null,null,null,null],[null,9,null,null,null,null,null,7,null],[null,null,null,null,null,null,null,null,null],[null,null,null,6,null,4,null,null,3],[null,null,null,5,2,null,null,1,4],[null,null,null,null,8,null,null,null,1],[4,null,null,null,null,1,null,3,6],[null,3,8,null,null,null,2,null,null]],[[null,null,null,null,9,null,null,null,4],[null,4,null,1,null,null,null,6,null],[null,2,7,null,null,null,null,null,5],[null,9,null,null,null,null,null,null,null],[null,null,null,8,null,3,6,null,null],[null,null,6,null,null,4,1,5,null],[null,5,2,null,null,null,null,7,null],[null,null,null,4,null,8,null,null,null],[null,null,3,null,null,5,null,4,null]],[[null,null,null,null,null,null,9,null,2],[null,null,3,null,null,null,null,7,null],[null,null,2,4,8,null,null,null,null],[null,9,null,2,null,6,5,null,3],[null,null,null,null,null,1,4,null,6],[8,null,null,5,null,null,null,null,null],[null,7,null,null,null,null,null,null,null],[null,2,null,9,1,8,null,null,null],[1,6,null,null,2,null,null,null,null]]];n.getRandomVeryEasy=function(){var l=[];return t[Ql.getRandomIntBetween(0,t.length)].forEach(function(n){return l.push(n.slice())}),l},n.getRandomEasy=function(){var l=[];return e[Ql.getRandomIntBetween(0,e.length)].forEach(function(n){return l.push(n.slice())}),l},n.getRandomMedium=function(){var l=[];return u[Ql.getRandomIntBetween(0,u.length)].forEach(function(n){return l.push(n.slice())}),l},n.getRandomHard=function(){var l=[];return i[Ql.getRandomIntBetween(0,i.length)].forEach(function(n){return l.push(n.slice())}),l}}),nn=Kl(function(l,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shuffleColumns=function(l){return l=u(l),l=t(l),l=u(l)};var t=function(l){var n=[],t=[],u=[];l.forEach(function(l,e){e<3?n.push(l.slice()):e<6?t.push(l.slice()):u.push(l.slice())}),n=e(n),t=e(t),u=e(u);var i=[n,t,u],s=i.splice(Ql.getRandomIntBetween(0,i.length),1)[0],r=i.splice(Ql.getRandomIntBetween(0,i.length),1)[0],o=i[0];return l=s.concat(r,o)};n.shuffleRows=function(l){return t(l)};var e=function(l){var n=[l[0],l[1],l[2]];return l=[n.splice(Ql.getRandomIntBetween(0,n.length),1)[0],n.splice(Ql.getRandomIntBetween(0,n.length),1)[0],n[0]]},u=function(l){var n=[];l.forEach(function(l){return n.push(l.slice())});for(var t=0;t<9;t++)for(var e=0;e<9;e++)l[e][t]=n[t][e];return l};n.transponseTable=function(l){return u(l)};var i=function(l){var n=[];l.forEach(function(l){return n.push(l.slice())});for(var t=0;t<9;t++)for(var e=0;e<9;e++)l[e][t]=n[t][8-e];return l};n.rotateTable=function(l,n){for(var t=null!=n?n%4:1,e=0;e<t;e++)l=i(l);return l};var s=function(l){var n=[];l.forEach(function(l){return n.push(l.slice())});for(var t=0;t<4;t++)l[t]=n[8-t],l[8-t]=n[t];return l};n.horizontallyMirrorTable=function(l){return l=s(l)},n.verticallyMirrorTable=function(l){return l=u(l),l=s(l),l=u(l)},n.randomizeTableNumbers=function(l){var n=[1,2,3,4,5,6,7,8,9],t={1:n.splice(Ql.getRandomIntBetween(0,n.length),1)[0],2:n.splice(Ql.getRandomIntBetween(0,n.length),1)[0],3:n.splice(Ql.getRandomIntBetween(0,n.length),1)[0],4:n.splice(Ql.getRandomIntBetween(0,n.length),1)[0],5:n.splice(Ql.getRandomIntBetween(0,n.length),1)[0],6:n.splice(Ql.getRandomIntBetween(0,n.length),1)[0],7:n.splice(Ql.getRandomIntBetween(0,n.length),1)[0],8:n.splice(Ql.getRandomIntBetween(0,n.length),1)[0],9:n[0]};return l.forEach(function(n,e){n.forEach(function(n,u){n&&(l[e][u]=t[n])})}),l}}),tn=Kl(function(l,n){Object.defineProperty(n,"__esModule",{value:!0});var t=function(l){return l=nn.shuffleColumns(l),l=nn.shuffleRows(l),l=nn.rotateTable(l,Ql.getRandomIntBetween(0,4)),Ql.getRandomIntBetween(0,2)&&(l=nn.transponseTable(l)),Ql.getRandomIntBetween(0,2)&&(l=nn.horizontallyMirrorTable(l)),Ql.getRandomIntBetween(0,2)&&(l=nn.verticallyMirrorTable(l)),l=nn.randomizeTableNumbers(l)};n.getVeryEasySudoku=function(){var l=ln.getRandomVeryEasy();return l=t(l)},n.getEasySudoku=function(){var l=ln.getRandomEasy();return l=t(l)},n.getMediumSudoku=function(){var l=ln.getRandomMedium();return l=t(l)},n.getHardSudoku=function(){var l=ln.getRandomHard();return l=t(l)},n.getSudoku=function(l){switch(l+"".toLowerCase()){case"veryeasy":default:return n.getVeryEasySudoku();case"easy":return n.getEasySudoku();case"medium":return n.getMediumSudoku();case"hard":return n.getHardSudoku()}}});function en(l){let n=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];const t=Zl(l.flat().join(""),{outputArray:!0,hintCheck:!1});for(let l=0;l<jl;l++){const[e,u]=Pl[l];n[e][u]=t[l]}return n}const un=function(){const l=Ul((()=>{const l=localStorage.getItem("settings");return l?JSON.parse(l):Hl})());return{subscribe:l.subscribe,set(n){l.set(n),localStorage.setItem("settings",JSON.stringify(n))}}}(),sn=Ul(0);const rn=function(){let l=1/0;const n=Ul(1/0);return un.subscribe(t=>{t.hintsLimited?(l=t.hints,n.update(l=>l>t.hints?t.hints:l)):(l=1/0,n.set(1/0))}),{subscribe:n.subscribe,useHint(){n.update(l=>l>0?(sn.update(l=>l+1),l-1):0)},reset(){n.set(l),sn.set(0)}}}();const on=function(){const l=Ul([[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]]);return{subscribe:l.subscribe,generate(n){l.set(function(l="easy"){const n=tn.getSudoku(l);for(let l=0;l<9;l++)for(let t=0;t<9;t++)null===n[l][t]&&(n[l][t]=0);return n}(n))},decodeSencode(n){l.set(function(l){let n=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];const t=-1!==l.indexOf(Bl),[e,u]=l.split(t?Bl:"-"),i=Al.decode(e).toString(2).padStart(jl,"0");let s=0;for(let l=0;l<jl;l++)"1"===i[l]&&s++;let r=Al.decode(u).toString().padStart(s,"0").split("");for(let l=0;l<jl;l++)if("1"===i[l]){const[t,e]=Pl[l];n[t][e]=1*r.shift()+1}return t&&(n=n.reverse().map(l=>l.reverse())),n}(n))},get:(l,n,t)=>l[t][n],getSencode:l=>Vl(l)}}();const an=function(){const l=Ul([[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]]);return on.subscribe(n=>{let t=[];for(let l=0;l<9;l++){t[l]=[];for(let e=0;e<9;e++)t[l][e]=n[l][e]}l.set(t)}),{subscribe:l.subscribe,set:(n,t)=>{l.update(l=>{const e=l.map(l=>[...l]);return e[n.y][n.x]=t,e})},applyHint:n=>{rn.useHint(),l.update(l=>{const t=en(l);return l[n.y][n.x]=t[n.y][n.x],l})}}}(),cn=Fl(an,l=>{const n=[],t=(l,t)=>{const e=l+","+t;n.includes(e)||n.push(e)};for(let n=0;n<9;n++)for(let e=0;e<9;e++){const u=l[n][e];if(u){for(let i=0;i<9;i++)i!==e&&l[n][i]===u&&t(e,n),i!==n&&l[i][e]===u&&t(e,i);const i=3*Math.floor(n/3),s=i+3,r=3*Math.floor(e/3),o=r+3;for(let a=i;a<s;a++)for(let i=r;i<o;i++)a!==n&&i!==e&&l[a][i]===u&&t(i,a)}}return n},[]),dn=Ul(!0),fn=Fl([an,cn],([l,n])=>{for(let n=0;n<9;n++)for(let t=0;t<9;t++)if(0===l[n][t])return!1;return 0===n.length},!1);const hn=function(){let l=null,n=null,t=null,e=0,u=!1;const i=Ul("00:00");return{subscribe:i.subscribe,start(){u||(null===n&&(this.reset(),n=Date.now()),null!==t&&(e+=Date.now()-t),l=setInterval(()=>{const l=Date.now()-n-e,t=new Date(l).toISOString().substr(11,8);"00"!==t.substr(0,2)?i.set(t):i.set(t.substr(3))},10),u=!0)},stop(){u=!1,t=Date.now(),clearInterval(l)},reset(){u=!1,clearInterval(l),e=0,n=null,t=null,i.set("00:00")}}}();function mn(l){Jl.set(l),on.generate(l),Wl.reset(),hn.reset(),rn.reset(),location.hash=""}function pn(l){Jl.setCustom(),on.decodeSencode(l),Wl.reset(),hn.reset(),rn.reset()}function gn(){hn.stop(),dn.set(!0)}function bn(){hn.start(),dn.set(!1)}var vn={startNew:mn,startCustom:pn,pause:gn,resume:bn};const wn=Ul({});const xn=function(){const l=Ul(Ol);let n=!1,t=!1;return{subscribe:l.subscribe,show(e,u={}){l.set(e),wn.set(u),n=u.onHide||!1,t=u.onHideReplace||!1},hide(){t&&n?n():(l.set(Ol),n&&setTimeout(n,_l))}}}();const yn=function(){const l=Ul({});return{subscribe:l.subscribe,add(n,t){l.update(l=>{const e=n.x+","+n.y,u={...l};return u.hasOwnProperty(e)?u[e].includes(t)?u[e]=u[e].filter(l=>l!==t):u[e]=[...u[e],t]:u[e]=[t],u})},clear(n){l.update(l=>{const t={...l};return delete t[n.x+","+n.y],t})}}}();const kn=function(){const l=Ul([[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]]);let n=!1;return{subscribe:l.subscribe,setSolution(t){if(n)console.log("正在计算中，跳过重复计算");else try{if(n=!0,console.log("开始计算正确答案..."),!t||!Array.isArray(t)||9!==t.length)return void console.error("无效的puzzle数据");const e=new Promise((l,n)=>{setTimeout(()=>n(new Error("计算超时")),5e3)}),u=new Promise(l=>{l(en(t))});Promise.race([u,e]).then(n=>{n&&Array.isArray(n)?(l.set(n),console.log("正确答案计算完成")):console.error("solveSudoku返回无效结果")}).catch(l=>{console.error("计算正确答案时出错:",l)}).finally(()=>{n=!1})}catch(l){console.error("setSolution执行出错:",l),n=!1}},getCorrectValue(l,n,t){if(!l||!Array.isArray(l)||t>=l.length)return 0;const e=l[t];return!Array.isArray(e)||n>=e.length?0:e[n]||0},isCorrect(l,n,t,e){if(0===n)return!0;return n===this.getCorrectValue(l,t,e)}}}();function $n(l,n,t){const e=l.slice();return e[2]=n[t][0],e[3]=n[t][1],e[5]=t,e}function Cn(l){let n,t,e,u,i=l[5]+1+"";return{c(){n=z("div"),t=H(i),e=j(),E(n,"class",u="candidate row-start-"+l[2]+" col-start-"+l[3]+" svelte-txdbzj"),A(n,"invisible",!l[0].includes(l[5]+1)),A(n,"visible",l[0].includes(l[5]+1)),A(n,"eliminate",l[1]&&l[1].includes(l[5]+1))},m(l,u){C(l,n,u),y(n,t),y(n,e)},p(l,t){1&t&&A(n,"invisible",!l[0].includes(l[5]+1)),1&t&&A(n,"visible",l[0].includes(l[5]+1)),2&t&&A(n,"eliminate",l[1]&&l[1].includes(l[5]+1))},d(l){l&&S(n)}}}function Sn(n){let t,e=Tl,u=[];for(let l=0;l<e.length;l+=1)u[l]=Cn($n(n,e,l));return{c(){t=z("div");for(let l=0;l<u.length;l+=1)u[l].c();E(t,"class","candidate-grid svelte-txdbzj")},m(l,n){C(l,t,n);for(let l=0;l<u.length;l+=1)u[l].m(t,null)},p(l,[n]){if(3&n){let i;for(e=Tl,i=0;i<e.length;i+=1){const s=$n(l,e,i);u[i]?u[i].p(s,n):(u[i]=Cn(s),u[i].c(),u[i].m(t,null))}for(;i<u.length;i+=1)u[i].d(1);u.length=e.length}},i:l,o:l,d(l){l&&S(t),M(u,l)}}}function Mn(l,n,t){let{candidates:e=[]}=n,{eliminateNums:u=[]}=n;return l.$$set=l=>{"candidates"in l&&t(0,e=l.candidates),"eliminateNums"in l&&t(1,u=l.eliminateNums)},[e,u]}class zn extends Ml{constructor(l){super(),Sl(this,l,Mn,Sn,s,{candidates:0,eliminateNums:1})}}function Nn(l){const n=l-1;return n*n*n+1}function Hn(l,{delay:t=0,duration:e=400,easing:u=n}={}){const i=+getComputedStyle(l).opacity;return{delay:t,duration:e,easing:u,css:l=>"opacity: "+l*i}}function jn(l,{delay:n=0,duration:t=400,easing:e=Nn}={}){const u=getComputedStyle(l),i=+u.opacity,s=parseFloat(u.height),r=parseFloat(u.paddingTop),o=parseFloat(u.paddingBottom),a=parseFloat(u.marginTop),c=parseFloat(u.marginBottom),d=parseFloat(u.borderTopWidth),f=parseFloat(u.borderBottomWidth);return{delay:n,duration:t,easing:e,css:l=>`overflow: hidden;opacity: ${Math.min(20*l,1)*i};height: ${l*s}px;padding-top: ${l*r}px;padding-bottom: ${l*o}px;margin-top: ${l*a}px;margin-bottom: ${l*c}px;border-top-width: ${l*d}px;border-bottom-width: ${l*f}px;`}}function Pn(l,{delay:n=0,duration:t=400,easing:e=Nn,start:u=0,opacity:i=0}={}){const s=getComputedStyle(l),r=+s.opacity,o="none"===s.transform?"":s.transform,a=1-u,c=r*(1-i);return{delay:n,duration:t,easing:e,css:(l,n)=>`\n\t\t\ttransform: ${o} scale(${1-a*n});\n\t\t\topacity: ${r-c*n}\n\t\t`}}function Tn(l){let n,t,e,u,i,s,r;const o=[En,Bn],a=[];function c(l,n){return l[3]?0:1}return e=c(l),u=a[e]=o[e](l),{c(){n=z("div"),t=z("button"),u.c(),E(t,"class","cell-btn svelte-k1hh1j"),E(n,"class","cell-inner svelte-k1hh1j"),A(n,"user-number",l[6]),A(n,"selected",l[7]),A(n,"same-area",l[8]),A(n,"same-number",l[9]),A(n,"conflicting-number",l[5]),A(n,"wrong-number",l[10])},m(u,o){C(u,n,o),y(n,t),a[e].m(t,null),i=!0,s||(r=T(t,"click",l[21]),s=!0)},p(l,i){let s=e;e=c(l),e===s?a[e].p(l,i):(ml(),bl(a[s],1,1,()=>{a[s]=null}),pl(),u=a[e],u?u.p(l,i):(u=a[e]=o[e](l),u.c()),gl(u,1),u.m(t,null)),64&i&&A(n,"user-number",l[6]),128&i&&A(n,"selected",l[7]),256&i&&A(n,"same-area",l[8]),512&i&&A(n,"same-number",l[9]),32&i&&A(n,"conflicting-number",l[5]),1024&i&&A(n,"wrong-number",l[10])},i(l){i||(gl(u),i=!0)},o(l){bl(u),i=!1},d(l){l&&S(n),a[e].d(),s=!1,r()}}}function Bn(n){let t,e,u=(n[0]||"")+"";return{c(){t=z("span"),e=H(u),E(t,"class","cell-text svelte-k1hh1j")},m(l,n){C(l,t,n),y(t,e)},p(l,n){1&n&&u!==(u=(l[0]||"")+"")&&O(e,u)},i:l,o:l,d(l){l&&S(t)}}}function En(l){let n,t;return n=new zn({props:{candidates:l[3],eliminateNums:l[13]}}),{c(){yl(n.$$.fragment)},m(l,e){kl(n,l,e),t=!0},p(l,t){const e={};8&t&&(e.candidates=l[3]),8192&t&&(e.eliminateNums=l[13]),n.$set(e)},i(l){t||(gl(n.$$.fragment,l),t=!0)},o(l){bl(n.$$.fragment,l),t=!1},d(l){$l(n,l)}}}function Ln(l){let n,t,e,u=!l[4]&&Tn(l);return{c(){n=z("div"),u&&u.c(),E(n,"class",t="cell row-start-"+l[2]+" col-start-"+l[1]+" svelte-k1hh1j"),A(n,"border-r",l[17]),A(n,"border-r-4",l[18]),A(n,"border-b",l[19]),A(n,"border-b-4",l[20]),A(n,"highlight-main",l[14]),A(n,"highlight-trail",l[15]),A(n,"highlight-pair",l[11]),A(n,"highlight-eliminate",l[12])},m(l,t){C(l,n,t),u&&u.m(n,null),e=!0},p(l,[i]){l[4]?u&&(ml(),bl(u,1,1,()=>{u=null}),pl()):u?(u.p(l,i),16&i&&gl(u,1)):(u=Tn(l),u.c(),gl(u,1),u.m(n,null)),(!e||6&i&&t!==(t="cell row-start-"+l[2]+" col-start-"+l[1]+" svelte-k1hh1j"))&&E(n,"class",t),131078&i&&A(n,"border-r",l[17]),262150&i&&A(n,"border-r-4",l[18]),524294&i&&A(n,"border-b",l[19]),1048582&i&&A(n,"border-b-4",l[20]),16390&i&&A(n,"highlight-main",l[14]),32774&i&&A(n,"highlight-trail",l[15]),2054&i&&A(n,"highlight-pair",l[11]),4102&i&&A(n,"highlight-eliminate",l[12])},i(l){e||(gl(u),e=!0)},o(l){bl(u),e=!1},d(l){l&&S(n),u&&u.d()}}}function On(l,n,t){const e=Y();let{value:u}=n,{cellX:i}=n,{cellY:s}=n,{candidates:r}=n,{disabled:o}=n,{conflictingNumber:a}=n,{userNumber:c}=n,{selected:d}=n,{sameArea:f}=n,{sameNumber:h}=n,{wrongNumber:m=!1}=n,{highlightPair:p=!1}=n,{highlightEliminate:g=!1}=n,{eliminateNums:b=[]}=n,{highlightMain:v=!1}=n,{highlightTrail:w=!1}=n;const x=9!==i&&i%3!=0,y=9!==i&&i%3==0,k=9!==s&&s%3!=0,$=9!==s&&s%3==0;return l.$$set=l=>{"value"in l&&t(0,u=l.value),"cellX"in l&&t(1,i=l.cellX),"cellY"in l&&t(2,s=l.cellY),"candidates"in l&&t(3,r=l.candidates),"disabled"in l&&t(4,o=l.disabled),"conflictingNumber"in l&&t(5,a=l.conflictingNumber),"userNumber"in l&&t(6,c=l.userNumber),"selected"in l&&t(7,d=l.selected),"sameArea"in l&&t(8,f=l.sameArea),"sameNumber"in l&&t(9,h=l.sameNumber),"wrongNumber"in l&&t(10,m=l.wrongNumber),"highlightPair"in l&&t(11,p=l.highlightPair),"highlightEliminate"in l&&t(12,g=l.highlightEliminate),"eliminateNums"in l&&t(13,b=l.eliminateNums),"highlightMain"in l&&t(14,v=l.highlightMain),"highlightTrail"in l&&t(15,w=l.highlightTrail)},[u,i,s,r,o,a,c,d,f,h,m,p,g,b,v,w,e,x,y,k,$,()=>{Wl.set(i-1,s-1),e("click")}]}class _n extends Ml{constructor(l){super(),Sl(this,l,On,Ln,s,{value:0,cellX:1,cellY:2,candidates:3,disabled:4,conflictingNumber:5,userNumber:6,selected:7,sameArea:8,sameNumber:9,wrongNumber:10,highlightPair:11,highlightEliminate:12,eliminateNums:13,highlightMain:14,highlightTrail:15})}}function Rn(l,n,t){const e=l.slice();return e[21]=n[t],e[23]=t,e}function Dn(l,n,t){const e=l.slice();return e[24]=n[t],e[26]=t,e}function An(l){let n,t;function e(...n){return l[13](l[23],l[26],...n)}function u(...n){return l[14](l[23],l[26],...n)}function i(...n){return l[15](l[23],l[26],...n)}function s(...n){return l[16](l[23],l[26],...n)}function r(...n){return l[17](l[23],l[26],...n)}return n=new _n({props:{value:l[24],cellY:l[23]+1,cellX:l[26]+1,candidates:l[5][l[26]+","+l[23]],disabled:l[6],selected:qn(l[7],l[26],l[23]),userNumber:0===l[2][l[23]][l[26]],sameArea:l[3].highlightCells&&!qn(l[7],l[26],l[23])&&l[10](l[7],l[26],l[23]),sameNumber:l[3].highlightSame&&l[24]&&!qn(l[7],l[26],l[23])&&Un(l[4],l[7])===l[24],conflictingNumber:l[3].highlightConflicting&&0===l[2][l[23]][l[26]]&&l[8].includes(l[26]+","+l[23]),wrongNumber:l[11](l[24],l[26],l[23]),highlightMain:l[1]&&l[0]&&l[0].cell&&l[0].cell.row===l[23]&&l[0].cell.col===l[26],highlightTrail:l[1]&&l[0]&&l[0].trail&&l[0].trail.some(e),highlightPair:l[0]&&l[0].cells&&l[0].cells.some(u),highlightEliminate:l[0]&&l[0].eliminate&&l[0].eliminate.find(i),eliminateNums:l[0]&&l[0].eliminate&&l[0].eliminate.find(s)?l[0].eliminate.find(r).remove:[]}}),n.$on("click",l[18]),{c(){yl(n.$$.fragment)},m(l,e){kl(n,l,e),t=!0},p(t,o){l=t;const a={};16&o&&(a.value=l[24]),32&o&&(a.candidates=l[5][l[26]+","+l[23]]),64&o&&(a.disabled=l[6]),128&o&&(a.selected=qn(l[7],l[26],l[23])),4&o&&(a.userNumber=0===l[2][l[23]][l[26]]),136&o&&(a.sameArea=l[3].highlightCells&&!qn(l[7],l[26],l[23])&&l[10](l[7],l[26],l[23])),152&o&&(a.sameNumber=l[3].highlightSame&&l[24]&&!qn(l[7],l[26],l[23])&&Un(l[4],l[7])===l[24]),268&o&&(a.conflictingNumber=l[3].highlightConflicting&&0===l[2][l[23]][l[26]]&&l[8].includes(l[26]+","+l[23])),16&o&&(a.wrongNumber=l[11](l[24],l[26],l[23])),3&o&&(a.highlightMain=l[1]&&l[0]&&l[0].cell&&l[0].cell.row===l[23]&&l[0].cell.col===l[26]),3&o&&(a.highlightTrail=l[1]&&l[0]&&l[0].trail&&l[0].trail.some(e)),1&o&&(a.highlightPair=l[0]&&l[0].cells&&l[0].cells.some(u)),1&o&&(a.highlightEliminate=l[0]&&l[0].eliminate&&l[0].eliminate.find(i)),1&o&&(a.eliminateNums=l[0]&&l[0].eliminate&&l[0].eliminate.find(s)?l[0].eliminate.find(r).remove:[]),n.$set(a)},i(l){t||(gl(n.$$.fragment,l),t=!0)},o(l){bl(n.$$.fragment,l),t=!1},d(l){$l(n,l)}}}function Vn(l){let n,t,e=l[21],u=[];for(let n=0;n<e.length;n+=1)u[n]=An(Dn(l,e,n));const i=l=>bl(u[l],1,1,()=>{u[l]=null});return{c(){for(let l=0;l<u.length;l+=1)u[l].c();n=P()},m(l,e){for(let n=0;n<u.length;n+=1)u[n].m(l,e);C(l,n,e),t=!0},p(l,t){if(4095&t){let s;for(e=l[21],s=0;s<e.length;s+=1){const i=Dn(l,e,s);u[s]?(u[s].p(i,t),gl(u[s],1)):(u[s]=An(i),u[s].c(),gl(u[s],1),u[s].m(n.parentNode,n))}for(ml(),s=e.length;s<u.length;s+=1)i(s);pl()}},i(l){if(!t){for(let l=0;l<e.length;l+=1)gl(u[l]);t=!0}},o(l){u=u.filter(Boolean);for(let l=0;l<u.length;l+=1)bl(u[l]);t=!1},d(l){M(u,l),l&&S(n)}}}function In(l){let n,t,e,u,i,s=l[4],r=[];for(let n=0;n<s.length;n+=1)r[n]=Vn(Rn(l,s,n));const o=l=>bl(r[l],1,1,()=>{r[l]=null});return{c(){n=z("div"),t=z("div");for(let l=0;l<r.length;l+=1)r[l].c();E(t,"class","sudoku-board mx-auto svelte-joi787"),E(n,"class","board-padding relative z-10 svelte-joi787")},m(s,o){C(s,n,o),y(n,t);for(let l=0;l<r.length;l+=1)r[l].m(t,null);e=!0,u||(i=T(n,"click",l[19]),u=!0)},p(l,[n]){if(4095&n){let e;for(s=l[4],e=0;e<s.length;e+=1){const u=Rn(l,s,e);r[e]?(r[e].p(u,n),gl(r[e],1)):(r[e]=Vn(u),r[e].c(),gl(r[e],1),r[e].m(t,null))}for(ml(),e=s.length;e<r.length;e+=1)o(e);pl()}},i(l){if(!e){for(let l=0;l<s.length;l+=1)gl(r[l]);e=!0}},o(l){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)bl(r[l]);e=!1},d(l){l&&S(n),M(r,l),u=!1,i()}}}function qn(l,n,t){return l.x===n&&l.y===t}function Un(l,n){return null===n.x&&null===n.y?null:l[n.y][n.x]}function Fn(l,n,t){let e,u,i,s,r,o,a,d;c(l,kn,l=>t(12,e=l)),c(l,on,l=>t(2,u=l)),c(l,un,l=>t(3,i=l)),c(l,an,l=>t(4,s=l)),c(l,yn,l=>t(5,r=l)),c(l,dn,l=>t(6,o=l)),c(l,Wl,l=>t(7,a=l)),c(l,cn,l=>t(8,d=l));const f=Y();let{hintDetail:h=null}=n,{highlightHint:m=!1}=n;let p=new Map;return l.$$set=l=>{"hintDetail"in l&&t(0,h=l.hintDetail),"highlightHint"in l&&t(1,m=l.highlightHint)},l.$$.update=()=>{4096&l.$$.dirty&&e&&p.clear()},[h,m,u,i,s,r,o,a,d,f,function(l,n,t){if(null===l.x&&null===l.y)return!1;if(l.x===n||l.y===t)return!0;const e=Math.floor(l.x/3),u=Math.floor(l.y/3),i=Math.floor(n/3),s=Math.floor(t/3);return e===i&&u===s},function(l,n,t){if(!i.showErrors||0===l)return!1;if(!(0===u[t][n]))return!1;const s=`${n},${t},${l}`;if(p.has(s))return p.get(s);const r=l!==(e[t]&&e[t][n]?e[t][n]:0);if(p.set(s,r),p.size>100){const l=p.keys().next().value;p.delete(l)}return r},e,(l,n,t)=>t.row===l&&t.col===n,(l,n,t)=>t.row===l&&t.col===n,(l,n,t)=>t.row===l&&t.col===n,(l,n,t)=>t.row===l&&t.col===n,(l,n,t)=>t.row===l&&t.col===n,()=>f("cellClick"),()=>f("cellClick")]}class Wn extends Ml{constructor(l){super(),Sl(this,l,Fn,In,s,{hintDetail:0,highlightHint:1})}}function Jn(l,n,t){const e=l.slice();return e[6]=n[t],e}function Xn(l){let n,t,e,i,s,r,o,a,c,d,f,h,m,p,g,b=l[1]?"已定位":"定位",v=l[0].description+"",w=l[2]?"点击收起详细推理":"点击展开详细推理";function x(l,n){return l[0].strategyChain?Yn:l[0].type?Gn:void 0}let k=x(l),$=k&&k(l),M=l[2]&&l[0].reasoning&&Zn(l);return{c(){n=z("div"),t=z("div"),e=z("div"),$&&$.c(),i=j(),s=z("button"),r=H(b),o=j(),a=z("div"),c=H(v),d=j(),M&&M.c(),f=j(),h=z("div"),m=H(w),E(e,"class","strategy-chain svelte-11ffdgq"),R(e,"flex","1"),E(s,"class","locate-btn svelte-11ffdgq"),R(t,"display","flex"),R(t,"align-items","center"),R(t,"width","100%"),E(a,"class","desc svelte-11ffdgq"),E(h,"class","expand-tip svelte-11ffdgq"),E(n,"class","hint-bar svelte-11ffdgq"),R(n,"cursor","pointer")},m(u,b){C(u,n,b),y(n,t),y(t,e),$&&$.m(e,null),y(t,i),y(t,s),y(s,r),y(n,o),y(n,a),y(a,c),y(n,d),M&&M.m(n,null),y(n,f),y(n,h),y(h,m),p||(g=[T(s,"click",lt),T(n,"click",l[3])],p=!0)},p(l,t){k===(k=x(l))&&$?$.p(l,t):($&&$.d(1),$=k&&k(l),$&&($.c(),$.m(e,null))),2&t&&b!==(b=l[1]?"已定位":"定位")&&O(r,b),1&t&&v!==(v=l[0].description+"")&&O(c,v),l[2]&&l[0].reasoning?M?M.p(l,t):(M=Zn(l),M.c(),M.m(n,f)):M&&(M.d(1),M=null),4&t&&w!==(w=l[2]?"点击收起详细推理":"点击展开详细推理")&&O(m,w)},d(l){l&&S(n),$&&$.d(),M&&M.d(),p=!1,u(g)}}}function Gn(l){let n,t=l[0].type+"";return{c(){n=H(t)},m(l,t){C(l,n,t)},p(l,e){1&e&&t!==(t=l[0].type+"")&&O(n,t)},d(l){l&&S(n)}}}function Yn(l){let n,t=l[0].strategyChain.join(" → ")+"";return{c(){n=H(t)},m(l,t){C(l,n,t)},p(l,e){1&e&&t!==(t=l[0].strategyChain.join(" → ")+"")&&O(n,t)},d(l){l&&S(n)}}}function Zn(l){let n,t=l[0].reasoning.split("\n"),e=[];for(let n=0;n<t.length;n+=1)e[n]=Kn(Jn(l,t,n));return{c(){n=z("div");for(let l=0;l<e.length;l+=1)e[l].c();E(n,"class","reasoning svelte-11ffdgq")},m(l,t){C(l,n,t);for(let l=0;l<e.length;l+=1)e[l].m(n,null)},p(l,u){if(1&u){let i;for(t=l[0].reasoning.split("\n"),i=0;i<t.length;i+=1){const s=Jn(l,t,i);e[i]?e[i].p(s,u):(e[i]=Kn(s),e[i].c(),e[i].m(n,null))}for(;i<e.length;i+=1)e[i].d(1);e.length=t.length}},d(l){l&&S(n),M(e,l)}}}function Kn(l){let n,t,e=l[6]+"";return{c(){n=z("div"),t=H(e)},m(l,e){C(l,n,e),y(n,t)},p(l,n){1&n&&e!==(e=l[6]+"")&&O(t,e)},d(l){l&&S(n)}}}function Qn(l){let n,t,e,u=l[0]&&Xn(l);const i=l[5].default,s=d(i,l,l[4],null);return{c(){u&&u.c(),n=j(),t=z("div"),s&&s.c(),E(t,"class","actionbar-row svelte-11ffdgq")},m(l,i){u&&u.m(l,i),C(l,n,i),C(l,t,i),s&&s.m(t,null),e=!0},p(l,[t]){l[0]?u?u.p(l,t):(u=Xn(l),u.c(),u.m(n.parentNode,n)):u&&(u.d(1),u=null),s&&s.p&&(!e||16&t)&&m(s,i,l,l[4],e?h(i,l[4],t,null):p(l[4]),null)},i(l){e||(gl(s,l),e=!0)},o(l){bl(s,l),e=!1},d(l){u&&u.d(l),l&&S(n),l&&S(t),s&&s.d(l)}}}function lt(l){l.stopPropagation()}function nt(l,n,t){let{$$slots:e={},$$scope:u}=n,{hintDetail:i=null}=n,{highlightHint:s=!1}=n,r=!1;return l.$$set=l=>{"hintDetail"in l&&t(0,i=l.hintDetail),"highlightHint"in l&&t(1,s=l.highlightHint),"$$scope"in l&&t(4,u=l.$$scope)},[i,s,r,function(){t(2,r=!r)},u,e]}class tt extends Ml{constructor(l){super(),Sl(this,l,nt,Qn,s,{hintDetail:0,highlightHint:1})}}const et=function(){const l=Ul(!1);return{subscribe:l.subscribe,toggle(){l.update(l=>!l)}}}();class ut{constructor(l,n,t,e,u){this.id=l,this.name=n,this.timestamp=t,this.boardData=e,this.steps=u}save(){const l=`branchpoint_${this.id}`;localStorage.setItem(l,JSON.stringify(this))}static restore(l){const n=`branchpoint_${l}`,t=localStorage.getItem(n);if(t){const l=JSON.parse(t);return new ut(l.id,l.name,l.timestamp,l.boardData,l.steps)}return null}delete(){const l=`branchpoint_${this.id}`;localStorage.removeItem(l)}}function it(){const l=[];for(let n=0;n<localStorage.length;n++){const t=localStorage.key(n);if(t&&t.startsWith("branchpoint_")){const n=localStorage.getItem(t);if(n)try{const t=JSON.parse(n);l.push(new ut(t.id,t.name,t.timestamp,t.boardData,t.steps))}catch(l){}}}return l.sort((l,n)=>n.timestamp-l.timestamp),l}const st=function(){const{subscribe:l,set:n,update:t}=Ul(it());return{subscribe:l,add:l=>{l.save(),t(n=>{const t=[l,...n];if(t.length>10){t.pop().delete()}return t})},remove:l=>{ut.restore(l)?.delete(),t(n=>n.filter(n=>n.id!==l))},restore:l=>ut.restore(l),refresh:()=>n(it())}}();function rt(){return{grid:JSON.parse(JSON.stringify(a(an))),candidates:JSON.parse(JSON.stringify(a(yn)))}}function ot(l){if(!l||!l.grid)return;const n=l.grid;for(let l=0;l<n.length;l++)for(let t=0;t<n[l].length;t++)an.set({x:t,y:l},n[l][t]);if(l.candidates){for(let l=0;l<9;l++)for(let n=0;n<9;n++)yn.clear({x:n,y:l});for(const n in l.candidates){const[t,e]=n.split(",").map(Number);for(const u of l.candidates[n])yn.add({x:t,y:e},u)}}}let at=[],ct=[];const dt=Ul(0),ft=Ul(0);function ht(){dt.set(at.length),ft.set(ct.length)}function mt(){if(0===at.length)return;const l=at.pop(),n=JSON.parse(JSON.stringify(a(an))),t=JSON.parse(JSON.stringify(a(yn)));ct.push({grid:n,candidates:t}),ot(l),ht()}function pt(){if(0===ct.length)return;const l=ct.pop(),n=JSON.parse(JSON.stringify(a(an))),t=JSON.parse(JSON.stringify(a(yn)));at.push({grid:n,candidates:t}),ot(l),ht()}Fl([],()=>at.length>0),Fl([],()=>ct.length>0);const gt=Fl([Wl,on,dn],([l,n,t])=>null===l.x&&null===l.y||0!==n[l.y][l.x]||t,!1);function bt(l,n,t){const e=l.slice();return e[17]=n[t],e[19]=t,e}function vt(l){let n,t,e,u,i,s,r,o=l[19]+1+"";function a(){return l[14](l[19])}return{c(){n=z("button"),t=H(o),e=j(),E(n,"class","btn btn-key svelte-6bzpo0"),n.disabled=u=l[4]||l[2]&&l[7](l[3],l[1],l[0],l[19]+1),E(n,"title",i="Insert "+(l[19]+1))},m(l,u){C(l,n,u),y(n,t),y(n,e),s||(r=T(n,"click",a),s=!0)},p(t,e){l=t,31&e&&u!==(u=l[4]||l[2]&&l[7](l[3],l[1],l[0],l[19]+1))&&(n.disabled=u)},d(l){l&&S(n),s=!1,r()}}}function wt(l){let n,t,e,u,i,s;return{c(){n=z("button"),t=N("svg"),e=N("path"),u=j(),E(e,"stroke-linecap","round"),E(e,"stroke-linejoin","round"),E(e,"stroke-width","2"),E(e,"d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"),E(t,"class","icon-outline"),E(t,"xmlns","http://www.w3.org/2000/svg"),E(t,"fill","none"),E(t,"viewBox","0 0 24 24"),E(t,"stroke","currentColor"),E(n,"class","btn btn-key svelte-6bzpo0"),n.disabled=l[4],E(n,"title","Erase Field")},m(r,o){C(r,n,o),y(n,t),y(t,e),y(n,u),i||(s=T(n,"click",l[13]),i=!0)},p(l,t){16&t&&(n.disabled=l[4])},d(l){l&&S(n),i=!1,s()}}}function xt(l){let n;let t=function(l){return 9===l[19]?wt:vt}(l),e=t(l);return{c(){e.c(),n=P()},m(l,t){e.m(l,t),C(l,n,t)},p(l,n){e.p(l,n)},d(l){e.d(l),l&&S(n)}}}function yt(n){let t,e,u,i=Array(10),s=[];for(let l=0;l<i.length;l+=1)s[l]=xt(bt(n,i,l));return{c(){t=z("div");for(let l=0;l<s.length;l+=1)s[l].c();E(t,"class","keyboard-grid svelte-6bzpo0")},m(l,i){C(l,t,i);for(let l=0;l<s.length;l+=1)s[l].m(t,null);e||(u=T(window,"keydown",n[6]),e=!0)},p(l,[n]){if(191&n){let e;for(i=Array(10),e=0;e<i.length;e+=1){const u=bt(l,i,e);s[e]?s[e].p(u,n):(s[e]=xt(u),s[e].c(),s[e].m(t,null))}for(;e<s.length;e+=1)s[e].d(1);s.length=i.length}},i:l,o:l,d(l){l&&S(t),M(s,l),e=!1,u()}}}function kt(l,n,t){let e,u,i,s,r,o,d,f,h,m,p,g;function b(l){!function(){const l=JSON.parse(JSON.stringify(a(an))),n=JSON.parse(JSON.stringify(a(yn)));at.push({grid:l,candidates:n}),at.length>50&&at.shift(),ct=[],ht()}(),g||(p?(0===l?yn.clear(m):yn.add(m,l),an.set(m,0)):(f.hasOwnProperty(m.x+","+m.y)&&yn.clear(m),an.set(m,l)))}c(l,un,l=>t(9,d=l)),c(l,yn,l=>t(10,f=l)),c(l,an,l=>t(11,h=l)),c(l,Wl,l=>t(12,m=l)),c(l,et,l=>t(16,p=l)),c(l,gt,l=>t(4,g=l));return l.$$.update=()=>{4096&l.$$.dirty&&t(1,e=m.x),4096&l.$$.dirty&&t(0,u=m.y),2048&l.$$.dirty&&t(3,i=h),1024&l.$$.dirty&&t(8,s=f),512&l.$$.dirty&&t(2,r=d.onlyAllowCandidates),259&l.$$.dirty&&(o=s&&void 0!==e&&void 0!==u&&s[e+","+u]?s[e+","+u]:[])},[u,e,r,i,g,b,function(l){switch(l.key||l.keyCode){case"ArrowUp":case 38:case"w":case 87:Wl.move(0,-1);break;case"ArrowDown":case 40:case"s":case 83:Wl.move(0,1);break;case"ArrowLeft":case 37:case"a":case 65:Wl.move(-1);break;case"ArrowRight":case 39:case"d":case 68:Wl.move(1);break;case"Backspace":case 8:case"Delete":case 46:b(0);break;default:l.key&&1*l.key>=0&&1*l.key<10?b(1*l.key):l.keyCode-48>=0&&l.keyCode-48<10&&b(l.keyCode-48)}},function(l,n,t,e){for(let u=0;u<9;u++){if(l[t][u]===e)return!0;if(l[u][n]===e)return!0}const u=3*Math.floor(n/3),i=3*Math.floor(t/3);for(let n=0;n<3;n++)for(let t=0;t<3;t++)if(l[i+n][u+t]===e)return!0;return!1},s,d,f,h,m,()=>b(0),l=>b(l+1)]}class $t extends Ml{constructor(l){super(),Sl(this,l,kt,yt,s,{})}}function Ct(l){let n;return{c(){n=N("path"),E(n,"stroke-linecap","round"),E(n,"stroke-linejoin","round"),E(n,"stroke-width","2"),E(n,"d","M6 3v18M18 3v18")},m(l,t){C(l,n,t)},d(l){l&&S(n)}}}function St(l){let n;return{c(){n=N("path"),E(n,"stroke-linecap","round"),E(n,"stroke-linejoin","round"),E(n,"stroke-width","2"),E(n,"d","M18.19 9.61L9.01 3.48A2.87 2.87 0 004.54 5.88v12.25a2.87 2.87 0 004.47 2.39l9.18-6.12a2.87 2.87 0 000-4.78v0z")},m(l,t){C(l,n,t)},d(l){l&&S(n)}}}function Mt(l){let n,t;return{c(){n=z("span"),t=H(l[2]),E(n,"class","timer-text svelte-uex8yj"),E(n,"title","Time")},m(l,e){C(l,n,e),y(n,t)},p(l,n){4&n&&O(t,l[2])},d(l){l&&S(n)}}}function zt(n){let t,e,u,i,s,r,o;function a(l,n){return l[0]?St:Ct}let c=a(n),d=c(n),f=n[1].displayTimer&&Mt(n);return{c(){t=z("div"),e=z("button"),u=N("svg"),d.c(),s=j(),f&&f.c(),E(u,"class","icon-outline"),E(u,"xmlns","http://www.w3.org/2000/svg"),E(u,"fill","none"),E(u,"viewBox","0 0 24 24"),E(u,"stroke","currentColor"),E(e,"class","btn btn-round"),E(e,"title",i=n[0]?"Resume Game":"Pause Game"),E(t,"class","timer-container svelte-uex8yj")},m(l,i){C(l,t,i),y(t,e),y(e,u),d.m(u,null),y(t,s),f&&f.m(t,null),r||(o=T(e,"click",n[3]),r=!0)},p(l,[n]){c!==(c=a(l))&&(d.d(1),d=c(l),d&&(d.c(),d.m(u,null))),1&n&&i!==(i=l[0]?"Resume Game":"Pause Game")&&E(e,"title",i),l[1].displayTimer?f?f.p(l,n):(f=Mt(l),f.c(),f.m(t,null)):f&&(f.d(1),f=null)},i:l,o:l,d(l){l&&S(t),d.d(),f&&f.d(),r=!1,o()}}}function Nt(l,n,t){let e,u,i;c(l,dn,l=>t(0,e=l)),c(l,un,l=>t(1,u=l)),c(l,hn,l=>t(2,i=l));return[e,u,i,()=>e?bn():gn()]}class Ht extends Ml{constructor(l){super(),Sl(this,l,Nt,zt,s,{})}}class jt{constructor(l,n){this.name=l,this.description=n}analyze(l){throw new Error("analyze method must be implemented")}calculateCandidates(l,n,t){const e=[];if(0!==l.cells[n][t].value)return e;for(let u=1;u<=9;u++)this.isValidPlacement(l,n,t,u)&&e.push(u);return e}isValidPlacement(l,n,t,e){for(let u=0;u<9;u++)if(u!==t&&l.cells[n][u].value===e)return!1;for(let u=0;u<9;u++)if(u!==n&&l.cells[u][t].value===e)return!1;const u=3*Math.floor(n/3),i=3*Math.floor(t/3);for(let s=u;s<u+3;s++)for(let u=i;u<i+3;u++)if((s!==n||u!==t)&&l.cells[s][u].value===e)return!1;return!0}}class Pt extends jt{constructor(){super("Naked Single","某个格子只有一个候选数")}analyze(l){for(let n=0;n<9;n++)for(let t=0;t<9;t++)if(0===l.cells[n][t].value){const e=this.calculateCandidates(l,n,t);if(1===e.length){const u=e[0];if(this.isValidPlacement(l,n,t,u))return{type:"Naked Single",cell:{row:n,col:t},value:u,description:`位置 (${n+1}, ${t+1}) 的候选数只有 ${u}，其他数字都已被排除`,reasoning:this.generateReasoning(l,n,t,u)}}}return null}generateReasoning(l,n,t,e){const u=[];for(let i=1;i<=9;i++)i===e||this.isValidPlacement(l,n,t,i)||u.push(i);let i="推理过程：\n";if(i+=`1. 检查位置 (${n+1}, ${t+1}) 的所有可能数字\n`,u.length>0){i+=`2. 数字 ${u.join("、")} 因为以下原因被排除：\n`;for(const e of u){i+=`   - 数字 ${e}：${this.findConflicts(l,n,t,e)}\n`}}return i+=`3. 因此，位置 (${n+1}, ${t+1}) 只能填入数字 ${e}`,i}findConflicts(l,n,t,e){const u=[];for(let i=0;i<9;i++)i!==t&&l.cells[n][i].value===e&&u.push(`第${n+1}行第${i+1}列已有${e}`);for(let i=0;i<9;i++)i!==n&&l.cells[i][t].value===e&&u.push(`第${i+1}行第${t+1}列已有${e}`);const i=3*Math.floor(n/3),s=3*Math.floor(t/3);for(let r=i;r<i+3;r++)for(let i=s;i<s+3;i++)r===n&&i===t||l.cells[r][i].value!==e||u.push(`第${r+1}行第${i+1}列已有${e}`);return u.join("，")}}class Tt extends jt{constructor(){super("Hidden Single","某行/列/宫中某个数字只能放在一个位置")}analyze(l){for(let n=0;n<9;n++){const t=this.checkUnit(l,n,"row");if(t)return t}for(let n=0;n<9;n++){const t=this.checkUnit(l,n,"col");if(t)return t}for(let n=0;n<9;n++){const t=this.checkUnit(l,n,"box");if(t)return t}return null}checkUnit(l,n,t){for(let e=1;e<=9;e++){const u=[];if("row"===t)for(let t=0;t<9;t++)0===l.cells[n][t].value&&this.isValidPlacement(l,n,t,e)&&u.push({row:n,col:t});else if("col"===t)for(let t=0;t<9;t++)0===l.cells[t][n].value&&this.isValidPlacement(l,t,n,e)&&u.push({row:t,col:n});else if("box"===t){const t=3*Math.floor(n/3),i=n%3*3;for(let n=t;n<t+3;n++)for(let t=i;t<i+3;t++)0===l.cells[n][t].value&&this.isValidPlacement(l,n,t,e)&&u.push({row:n,col:t})}if(1===u.length){const{row:i,col:s}=u[0];if(0===this.findOtherPositionsForValue(l,i,s,e).length)return{type:"Hidden Single",cell:{row:i,col:s},value:e,description:`在${"row"===t?"第"+(n+1)+"行":"col"===t?"第"+(n+1)+"列":"第"+(n+1)+"宫"}中，数字 ${e} 只能放在位置 (${i+1}, ${s+1})`,reasoning:this.generateHiddenSingleReasoning(l,n,t,e,i,s)}}}return null}findOtherPositionsForValue(l,n,t,e){const u=[];for(let i=0;i<9;i++)for(let s=0;s<9;s++)i===n&&s===t||0!==l.cells[i][s].value||!this.isValidPlacement(l,i,s,e)||u.push({row:i,col:s});return u}generateHiddenSingleReasoning(l,n,t,e,u,i){let s="推理过程：\n";s+=`1. 检查${"row"===t?"第"+(n+1)+"行":"col"===t?"第"+(n+1)+"列":"第"+(n+1)+"宫"}中数字 ${e} 的所有可能位置\n`;const r=[];if("row"===t)for(let t=0;t<9;t++)t!==i&&0===l.cells[n][t].value&&(this.isValidPlacement(l,n,t,e)||r.push(`第${n+1}行第${t+1}列`));else if("col"===t)for(let t=0;t<9;t++)t!==u&&0===l.cells[t][n].value&&(this.isValidPlacement(l,t,n,e)||r.push(`第${t+1}行第${n+1}列`));else if("box"===t){const t=3*Math.floor(n/3),s=n%3*3;for(let n=t;n<t+3;n++)for(let t=s;t<s+3;t++)n===u&&t===i||0!==l.cells[n][t].value||this.isValidPlacement(l,n,t,e)||r.push(`第${n+1}行第${t+1}列`)}return r.length>0&&(s+=`2. 以下位置不能放置数字 ${e}：${r.join("、")}\n`),s+=`3. 因此，数字 ${e} 只能放在位置 (${u+1}, ${i+1})`,s}}class Bt extends jt{constructor(){super("Pointing Pairs","某个宫中的某个数字只能放在一行或一列中，可以排除该行/列其他宫中的该数字")}analyze(l){for(let n=0;n<9;n++){const t=3*Math.floor(n/3),e=n%3*3;for(let u=1;u<=9;u++){const i=[];for(let n=t;n<t+3;n++)for(let t=e;t<e+3;t++)0===l.cells[n][t].value&&this.isValidPlacement(l,n,t,u)&&i.push({row:n,col:t});if(i.length>=2){const s=[...new Set(i.map(l=>l.row))];if(1===s.length){const t=s[0],r=this.findEliminatePositions(l,t,"row",e,u);if(r.length>0){const e=i[0];if(this.isValidPlacement(l,e.row,e.col,u))return{type:"Pointing Pairs",cell:e,value:u,eliminate:r,description:`第${n+1}宫中的数字 ${u} 只能放在第${t+1}行，可以排除该行其他宫中的数字 ${u}`,reasoning:this.generatePointingPairsReasoning(l,n,u,t,"row",r)}}}const r=[...new Set(i.map(l=>l.col))];if(1===r.length){const e=r[0],s=this.findEliminatePositions(l,e,"col",t,u);if(s.length>0){const t=i[0];if(this.isValidPlacement(l,t.row,t.col,u))return{type:"Pointing Pairs",cell:t,value:u,eliminate:s,description:`第${n+1}宫中的数字 ${u} 只能放在第${e+1}列，可以排除该列其他宫中的数字 ${u}`,reasoning:this.generatePointingPairsReasoning(l,n,u,e,"col",s)}}}}}}return null}findEliminatePositions(l,n,t,e,u){const i=[];if("row"===t)for(let t=0;t<9;t++){Math.floor(t/3)!==Math.floor(e/3)&&0===l.cells[n][t].value&&this.isValidPlacement(l,n,t,u)&&i.push({row:n,col:t})}else if("col"===t)for(let t=0;t<9;t++){Math.floor(t/3)!==Math.floor(e/3)&&0===l.cells[t][n].value&&this.isValidPlacement(l,t,n,u)&&i.push({row:t,col:n})}return i}generatePointingPairsReasoning(l,n,t,e,u,i){const s=3*Math.floor(n/3),r=n%3*3;let o="推理过程：\n";o+=`1. 检查第${n+1}宫（位置${s+1}-${s+3}行，${r+1}-${r+3}列）中数字 ${t} 的所有可能位置\n`;const a=[];for(let n=s;n<s+3;n++)for(let e=r;e<r+3;e++)0===l.cells[n][e].value&&this.isValidPlacement(l,n,e,t)&&a.push(`(${n+1}, ${e+1})`);if(o+=`2. 数字 ${t} 在该宫中的可能位置：${a.join("、")}\n`,o+=`3. 这些位置都在第${e+1}${"row"===u?"行":"列"}中\n`,o+="4. 根据数独规则，如果某个宫中的数字只能放在一行或一列中，那么该行/列的其他宫中就不能再放置该数字\n",i.length>0){o+=`5. 因此可以排除第${e+1}${"row"===u?"行":"列"}其他宫中的数字 ${t}：${i.map(l=>`(${l.row+1}, ${l.col+1})`).join("、")}\n`}return o+=`6. 数字 ${t} 只能放在位置 (${s+1}, ${r+1})`,o}}class Et{constructor(){this.strategies=[new Pt,new Tt,new Bt]}getNextHint(l){if(!this.validateBoard(l))return console.error("棋盘状态不合法，无法提供提示"),null;for(const n of this.strategies){console.log(`Trying strategy: ${n.constructor.name}`);const t=n.analyze(l);if(t){if(this.strictValidateHint(l,t))return t.strategy=n.constructor.name,console.log(`Found valid hint with strategy: ${n.constructor.name}`,t),t;console.log("Invalid hint found, skipping:",t)}}return console.log("No valid hints found"),null}validateBoard(l){if(!l||!l.cells||!Array.isArray(l.cells))return!1;for(let n=0;n<9;n++)for(let t=0;t<9;t++){if(0!==l.cells[n][t].value){const e=l.cells[n][t].value;l.cells[n][t].value=0;const u=this.isValidPlacement(l,n,t,e);if(l.cells[n][t].value=e,!u)return console.error(`棋盘冲突：位置 (${n+1}, ${t+1}) 的数字 ${e} 与现有数字冲突`),!1}}return!0}strictValidateHint(l,n){try{return"Naked Single"===n.type||"Hidden Single"===n.type?this.validateSingleHint(l,n):"Pointing Pairs"===n.type&&this.validatePointingPairsHint(l,n)}catch(l){return console.error("验证提示时出错:",l),!1}}validateSingleHint(l,n){const{row:t,col:e}=n.cell,u=n.value;if(0!==l.cells[t][e].value)return console.error(`位置 (${t+1}, ${e+1}) 已有数字 ${l.cells[t][e].value}`),!1;if(!this.isValidPlacement(l,t,e,u))return console.error(`数字 ${u} 不能放在位置 (${t+1}, ${e+1})`),!1;const i=this.calculateCandidates(l,t,e);if("Naked Single"===n.type){if(1!==i.length||i[0]!==u)return console.error(`Naked Single验证失败：候选数为 [${i.join(",")}]，但提示值为 ${u}`),!1}else if("Hidden Single"===n.type){const n=this.findOtherPositionsForValue(l,t,e,u);if(n.length>0)return console.error(`Hidden Single验证失败：数字 ${u} 还可以放在其他位置:`,n),!1}return!0}validatePointingPairsHint(l,n){const{row:t,col:e}=n.cell,u=n.value;if(0!==l.cells[t][e].value)return console.error(`主要格子 (${t+1}, ${e+1}) 已有数字`),!1;if(!this.isValidPlacement(l,t,e,u))return console.error(`数字 ${u} 不能放在主要格子 (${t+1}, ${e+1})`),!1;if(!n.eliminate||0===n.eliminate.length)return console.error("Pointing Pairs没有提供排除位置"),!1;for(const t of n.eliminate){if(0!==l.cells[t.row][t.col].value)return console.error(`排除位置 (${t.row+1}, ${t.col+1}) 已有数字`),!1;if(!this.isValidPlacement(l,t.row,t.col,u))return console.error(`排除位置 (${t.row+1}, ${t.col+1}) 本来就不能放数字 ${u}`),!1}return!0}calculateCandidates(l,n,t){const e=[];if(0!==l.cells[n][t].value)return e;for(let u=1;u<=9;u++)this.isValidPlacement(l,n,t,u)&&e.push(u);return e}findOtherPositionsForValue(l,n,t,e){const u=[];for(let i=0;i<9;i++)for(let s=0;s<9;s++)i===n&&s===t||0!==l.cells[i][s].value||!this.isValidPlacement(l,i,s,e)||u.push({row:i,col:s});return u}isValidPlacement(l,n,t,e){for(let u=0;u<9;u++)if(u!==t&&l.cells[n][u].value===e)return!1;for(let u=0;u<9;u++)if(u!==n&&l.cells[u][t].value===e)return!1;const u=3*Math.floor(n/3),i=3*Math.floor(t/3);for(let s=u;s<u+3;s++)for(let u=i;u<i+3;u++)if((s!==n||u!==t)&&l.cells[s][u].value===e)return!1;return!0}}class Lt{constructor(l,n,t=0,e=!1,u=!1,i=[]){this.row=l,this.col=n,this.value=t,this.isFixed=e,this.isOriginal=u,this.candidates=i}updateValue(l){this.value=l}addCandidate(l){this.candidates.includes(l)||this.candidates.push(l)}removeCandidate(l){this.candidates=this.candidates.filter(n=>n!==l)}}class Ot{constructor(l=null,n="未知",t="未开始"){this.cells=l||Ot.createEmptyCells(),this.difficulty=n,this.status=t}static createEmptyCells(){const l=[];for(let n=0;n<9;n++){const t=[];for(let l=0;l<9;l++)t.push(new Lt(n,l));l.push(t)}return l}validate(){const l=l=>{const n=l.filter(l=>0!==l.value).map(l=>l.value);return new Set(n).size===n.length};for(let n=0;n<9;n++)if(!l(this.cells[n]))return!1;for(let n=0;n<9;n++){const t=[];for(let l=0;l<9;l++)t.push(this.cells[l][n]);if(!l(t))return!1}for(let n=0;n<3;n++)for(let t=0;t<3;t++){const e=[];for(let l=0;l<3;l++)for(let u=0;u<3;u++)e.push(this.cells[3*n+l][3*t+u]);if(!l(e))return!1}return!0}generateCandidates(){for(let l=0;l<9;l++)for(let n=0;n<9;n++){const t=this.cells[l][n];if(0===t.value){t.candidates=[];for(let l=1;l<=9;l++)t.value=l,this.validate()&&t.candidates.push(l),t.value=0}else t.candidates=[]}}async loadFromUrl(l){try{const n=l.match(/[?&]bd=([0-9.]{81})/i);if(n)return this.loadFromBdString(n[1]);const t=l.replace(/[^0-9.]/g,"");if(81===t.length)return this.loadFromBdString(t);const e=await fetch(l),u=await e.text(),i=u.match(/var puzzle = "([0-9.]{81})"/);if(i)return this.loadFromBdString(i[1]);const s=u.match(/<table[^>]*id=["']?puzzle_grid["']?[^>]*>([\s\S]*?)<\/table>/i);if(s){const l=s[1].match(/<td[^>]*>([\s\S]*?)<\/td>/gi);if(l&&81===l.length){const n=l.map(l=>{const n=l.replace(/<[^>]+>/g,"").trim();return""===n||"."===n?0:Number(n)});return this.loadFromArray(n)}}throw new Error("未找到有效棋盘数据")}catch(l){throw new Error(`加载题目失败: ${l.message}`)}}loadFromBdString(l){const n=l.replace(/\./g,"0").split("").map(Number);return this.loadFromArray(n)}loadFromArray(l){if(81!==l.length)throw new Error("棋盘数据长度不正确");for(let n=0;n<9;n++)for(let t=0;t<9;t++)this.cells[n][t].value=l[9*n+t];return this}}function _t(l,n,t){const e=l.slice();return e[47]=n[t],e}function Rt(l){let n,t;return{c(){n=z("span"),t=H(l[1]),E(n,"class","badge svelte-pgv2cq"),A(n,"badge-primary",l[11])},m(l,e){C(l,n,e),y(n,t)},p(l,e){2&e[0]&&O(t,l[1]),2048&e[0]&&A(n,"badge-primary",l[11])},d(l){l&&S(n)}}}function Dt(l){let n,t;return{c(){n=N("svg"),t=N("path"),E(t,"stroke-linecap","round"),E(t,"stroke-linejoin","round"),E(t,"stroke-width","2"),E(t,"d","M12 18h.01M12 14a4 4 0 10-4-4"),E(n,"class","icon-outline"),E(n,"xmlns","http://www.w3.org/2000/svg"),E(n,"fill","none"),E(n,"viewBox","0 0 24 24"),E(n,"stroke","#111"),E(n,"stroke-width","2")},m(l,e){C(l,n,e),y(n,t)},d(l){l&&S(n)}}}function At(l){let n,t;return{c(){n=N("svg"),t=N("path"),E(t,"stroke-linecap","round"),E(t,"stroke-linejoin","round"),E(t,"d","M6 6l12 12M18 6l-12 12"),E(n,"class","icon-outline"),E(n,"xmlns","http://www.w3.org/2000/svg"),E(n,"fill","none"),E(n,"viewBox","0 0 24 24"),E(n,"stroke","#111"),E(n,"stroke-width","2")},m(l,e){C(l,n,e),y(n,t)},d(l){l&&S(n)}}}function Vt(l){let n,t;return{c(){n=N("svg"),t=N("path"),E(t,"stroke-linecap","round"),E(t,"stroke-linejoin","round"),E(t,"stroke-width","2"),E(t,"d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"),E(n,"class","icon-outline animate-spin"),E(n,"xmlns","http://www.w3.org/2000/svg"),E(n,"fill","none"),E(n,"viewBox","0 0 24 24"),E(n,"stroke","currentColor")},m(l,e){C(l,n,e),y(n,t)},d(l){l&&S(n)}}}function It(l){let n,t,e,i,s,r,o,a,c,d,f,h,m,p,g,b,v,w,x,k,$=l[5]&&qt(l),N=l[13],H=[];for(let n=0;n<N.length;n+=1)H[n]=Wt(_t(l,N,n));let P=0===l[13].length&&Jt();return{c(){n=z("div"),t=z("div"),e=j(),i=z("div"),s=z("h2"),s.textContent="分支点管理",r=j(),o=z("div"),a=z("input"),c=j(),d=z("button"),d.textContent="标记分支点",f=j(),$&&$.c(),h=j(),m=z("div"),m.textContent="最多保存10个分支点，按时间排序",p=j(),g=z("ul");for(let l=0;l<H.length;l+=1)H[l].c();b=j(),P&&P.c(),v=j(),w=z("button"),w.textContent="关闭",E(t,"class","absolute inset-0 bg-black bg-opacity-30"),E(s,"class","text-lg font-bold mb-2"),E(a,"class","input input-bordered flex-1 mr-2"),E(a,"placeholder","分支点名称（可选）"),E(d,"class","btn btn-primary"),E(o,"class","mb-2 flex"),E(m,"class","text-xs text-gray-500 mb-2"),E(g,"class","divide-y max-h-60 overflow-y-auto"),E(w,"class","btn btn-block mt-4"),E(i,"class","fixed top-0 right-0 h-full w-80 bg-white shadow-2xl p-6 z-50 flex flex-col"),E(n,"class","fixed inset-0 z-40")},m(u,S){C(u,n,S),y(n,t),y(n,e),y(n,i),y(i,s),y(i,r),y(i,o),y(o,a),_(a,l[4]),y(o,c),y(o,d),y(i,f),$&&$.m(i,null),y(i,h),y(i,m),y(i,p),y(i,g);for(let l=0;l<H.length;l+=1)H[l].m(g,null);y(i,b),P&&P.m(i,null),y(i,v),y(i,w),x||(k=[T(t,"click",l[35]),T(a,"input",l[36]),T(d,"click",l[23]),T(w,"click",l[41])],x=!0)},p(l,n){if(16&n[0]&&a.value!==l[4]&&_(a,l[4]),l[5]?$?$.p(l,n):($=qt(l),$.c(),$.m(i,h)):$&&($.d(1),$=null),1224745152&n[0]|3&n[1]){let t;for(N=l[13],t=0;t<N.length;t+=1){const e=_t(l,N,t);H[t]?H[t].p(e,n):(H[t]=Wt(e),H[t].c(),H[t].m(g,null))}for(;t<H.length;t+=1)H[t].d(1);H.length=N.length}0===l[13].length?P||(P=Jt(),P.c(),P.m(i,v)):P&&(P.d(1),P=null)},d(l){l&&S(n),$&&$.d(),M(H,l),P&&P.d(),x=!1,u(k)}}}function qt(l){let n,t;return{c(){n=z("div"),t=H(l[5]),E(n,"class","text-red-500 mb-2")},m(l,e){C(l,n,e),y(n,t)},p(l,n){32&n[0]&&O(t,l[5])},d(l){l&&S(n)}}}function Ut(l){let n,t,e,i,s,r,o,a,c,d,f,h,m,p,g,b,v,w,x=l[47].name+"",k=new Date(l[47].timestamp).toLocaleString()+"",$=l[47].steps+"";function M(){return l[38](l[47])}function N(){return l[39](l[47])}function P(){return l[40](l[47])}return{c(){n=z("div"),t=z("div"),e=z("div"),i=H(x),s=j(),r=z("div"),o=H(k),a=H(" | 步数: "),c=H($),d=j(),f=z("div"),h=z("button"),h.textContent="✏️",m=j(),p=z("button"),p.textContent="↩️",g=j(),b=z("button"),b.textContent="🗑️",E(e,"class","font-semibold text-sm"),E(r,"class","text-xs text-gray-500"),E(t,"class","flex-1"),E(h,"class","btn btn-xs btn-info"),E(h,"title","重命名"),E(p,"class","btn btn-xs btn-success"),E(p,"title","回溯"),E(b,"class","btn btn-xs btn-error"),E(b,"title","删除"),E(f,"class","flex space-x-1"),E(n,"class","flex items-center justify-between")},m(l,u){C(l,n,u),y(n,t),y(t,e),y(e,i),y(t,s),y(t,r),y(r,o),y(r,a),y(r,c),y(n,d),y(n,f),y(f,h),y(f,m),y(f,p),y(f,g),y(f,b),v||(w=[T(h,"click",M),T(p,"click",N),T(b,"click",P)],v=!0)},p(n,t){l=n,8192&t[0]&&x!==(x=l[47].name+"")&&O(i,x),8192&t[0]&&k!==(k=new Date(l[47].timestamp).toLocaleString()+"")&&O(o,k),8192&t[0]&&$!==($=l[47].steps+"")&&O(c,$)},d(l){l&&S(n),v=!1,u(w)}}}function Ft(l){let n,t,e,i,s,r,o,a;return{c(){n=z("div"),t=z("input"),e=j(),i=z("button"),i.textContent="保存",s=j(),r=z("button"),r.textContent="取消",E(t,"class","input input-bordered flex-1 text-sm"),E(i,"class","btn btn-xs btn-success"),E(r,"class","btn btn-xs"),E(n,"class","flex items-center space-x-2")},m(u,c){C(u,n,c),y(n,t),_(t,l[7]),y(n,e),y(n,i),y(n,s),y(n,r),o||(a=[T(t,"input",l[37]),T(i,"click",l[31]),T(r,"click",l[32])],o=!0)},p(l,n){128&n[0]&&t.value!==l[7]&&_(t,l[7])},d(l){l&&S(n),o=!1,u(a)}}}function Wt(l){let n,t;function e(l,n){return l[6]===l[47].id?Ft:Ut}let u=e(l),i=u(l);return{c(){n=z("li"),i.c(),t=j(),E(n,"class","py-2")},m(l,e){C(l,n,e),i.m(n,null),y(n,t)},p(l,s){u===(u=e(l))&&i?i.p(l,s):(i.d(1),i=u(l),i&&(i.c(),i.m(n,t)))},d(l){l&&S(n),i.d()}}}function Jt(l){let n;return{c(){n=z("div"),n.textContent="暂无分支点",E(n,"class","text-center text-gray-500 py-4")},m(l,t){C(l,n,t)},d(l){l&&S(n)}}}function Xt(n){let t,e,i,s,r,o,a,c,d;return{c(){t=z("div"),e=z("div"),i=z("div"),i.textContent="确定回溯至该分支点？当前操作将被覆盖。",s=j(),r=z("button"),r.textContent="确认",o=j(),a=z("button"),a.textContent="取消",E(i,"class","mb-4"),E(r,"class","btn btn-primary w-full mb-2"),E(a,"class","btn w-full"),E(e,"class","bg-white p-6 rounded shadow-xl max-w-xs"),E(t,"class","fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-30")},m(l,u){C(l,t,u),y(t,e),y(e,i),y(e,s),y(e,r),y(e,o),y(e,a),c||(d=[T(r,"click",n[28]),T(a,"click",n[29])],c=!0)},p:l,d(l){l&&S(t),c=!1,u(d)}}}function Gt(l){let n,t,e,i,s,r,o,a,c,d,f,h;return{c(){n=z("div"),t=z("div"),e=z("div"),i=H("确定删除分支点“"),s=H(l[10]),r=H("”？此操作不可逆。"),o=j(),a=z("button"),a.textContent="确认",c=j(),d=z("button"),d.textContent="取消",E(e,"class","mb-4"),E(a,"class","btn btn-primary w-full mb-2"),E(d,"class","btn w-full"),E(t,"class","bg-white p-6 rounded shadow-xl max-w-xs"),E(n,"class","fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-30")},m(u,m){C(u,n,m),y(n,t),y(t,e),y(e,i),y(e,s),y(e,r),y(t,o),y(t,a),y(t,c),y(t,d),f||(h=[T(a,"click",l[25]),T(d,"click",l[26])],f=!0)},p(l,n){1024&n[0]&&O(s,l[10])},d(l){l&&S(n),f=!1,u(h)}}}function Yt(n){let t,e,i,s,r,o,a,c,d,f,h,m,p,g,b,v,w,x,k,$,M,B,L,_,R,D,V,I,q,U,F,W,J,X,G,Y,Z,K,Q,ll=n[2]?"...":n[0]?"×":"?",nl=n[20]?"ON":"OFF",tl=n[19].hintsLimited&&Rt(n);function el(l,n){return l[2]?Vt:l[0]?At:Dt}let ul=el(n),il=ul(n),sl=n[3]&&It(n),rl=n[8]&&Xt(n),ol=n[9]&&Gt(n);return{c(){t=z("div"),e=z("button"),e.innerHTML='<svg class="icon-outline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 12h6m0 0l-3-3m3 3l-3 3m6-6v12"></path></svg>',i=j(),s=z("button"),r=N("svg"),o=N("path"),c=j(),d=z("button"),f=N("svg"),h=N("path"),p=j(),g=z("button"),b=N("svg"),v=N("path"),w=j(),tl&&tl.c(),$=j(),M=z("button"),il.c(),B=j(),L=z("span"),_=H(ll),D=j(),V=z("button"),I=N("svg"),q=N("path"),U=j(),F=z("span"),W=H(nl),X=j(),sl&&sl.c(),G=j(),rl&&rl.c(),Y=j(),ol&&ol.c(),Z=P(),E(e,"class","btn btn-round"),E(e,"title","分支点"),E(o,"stroke-linecap","round"),E(o,"stroke-linejoin","round"),E(o,"stroke-width","2"),E(o,"d","M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"),E(r,"class","icon-outline"),E(r,"xmlns","http://www.w3.org/2000/svg"),E(r,"fill","none"),E(r,"viewBox","0 0 24 24"),E(r,"stroke","currentColor"),E(s,"class","btn btn-round"),s.disabled=a=n[16]||0===n[12],E(s,"title","Undo"),E(h,"stroke-linecap","round"),E(h,"stroke-linejoin","round"),E(h,"stroke-width","2"),E(h,"d","M21 10h-10a8 8 90 00-8 8v2M21 10l-6 6m6-6l-6-6"),E(f,"class","icon-outline"),E(f,"xmlns","http://www.w3.org/2000/svg"),E(f,"fill","none"),E(f,"viewBox","0 0 24 24"),E(f,"stroke","currentColor"),E(d,"class","btn btn-round"),d.disabled=m=n[16]||0===n[17],E(d,"title","Redo"),E(v,"stroke-linecap","round"),E(v,"stroke-linejoin","round"),E(v,"stroke-width","2"),E(v,"d","M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"),E(b,"class","icon-outline"),E(b,"xmlns","http://www.w3.org/2000/svg"),E(b,"fill","none"),E(b,"viewBox","0 0 24 24"),E(b,"stroke","currentColor"),E(g,"class","btn btn-round btn-badge svelte-pgv2cq"),g.disabled=x=n[18]||!n[11]||0!==n[14][n[15].y][n[15].x],E(g,"title",k="Hints ("+n[1]+")"),E(L,"class","badge svelte-pgv2cq"),E(M,"class","btn btn-round btn-badge svelte-pgv2cq"),M.disabled=n[2],E(M,"title",R=n[2]?"正在计算...":n[0]?"关闭提示":"下一步提示"),E(q,"stroke-linecap","round"),E(q,"stroke-linejoin","round"),E(q,"stroke-width","2"),E(q,"d","M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"),E(I,"class","icon-outline"),E(I,"xmlns","http://www.w3.org/2000/svg"),E(I,"fill","none"),E(I,"viewBox","0 0 24 24"),E(I,"stroke","currentColor"),E(F,"class","badge tracking-tighter svelte-pgv2cq"),A(F,"badge-primary",n[20]),E(V,"class","btn btn-round btn-badge svelte-pgv2cq"),E(V,"title",J="Notes ("+(n[20]?"ON":"OFF")+")"),E(t,"class","action-buttons space-x-3 svelte-pgv2cq")},m(l,u){C(l,t,u),y(t,e),y(t,i),y(t,s),y(s,r),y(r,o),y(t,c),y(t,d),y(d,f),y(f,h),y(t,p),y(t,g),y(g,b),y(b,v),y(g,w),tl&&tl.m(g,null),y(t,$),y(t,M),il.m(M,null),y(M,B),y(M,L),y(L,_),y(t,D),y(t,V),y(V,I),y(I,q),y(V,U),y(V,F),y(F,W),C(l,X,u),sl&&sl.m(l,u),C(l,G,u),rl&&rl.m(l,u),C(l,Y,u),ol&&ol.m(l,u),C(l,Z,u),K||(Q=[T(e,"click",n[34]),T(s,"click",mt),T(d,"click",pt),T(g,"click",n[22]),T(M,"click",n[33]),T(V,"click",et.toggle)],K=!0)},p(l,n){69632&n[0]&&a!==(a=l[16]||0===l[12])&&(s.disabled=a),196608&n[0]&&m!==(m=l[16]||0===l[17])&&(d.disabled=m),l[19].hintsLimited?tl?tl.p(l,n):(tl=Rt(l),tl.c(),tl.m(g,null)):tl&&(tl.d(1),tl=null),313344&n[0]&&x!==(x=l[18]||!l[11]||0!==l[14][l[15].y][l[15].x])&&(g.disabled=x),2&n[0]&&k!==(k="Hints ("+l[1]+")")&&E(g,"title",k),ul!==(ul=el(l))&&(il.d(1),il=ul(l),il&&(il.c(),il.m(M,B))),5&n[0]&&ll!==(ll=l[2]?"...":l[0]?"×":"?")&&O(_,ll),4&n[0]&&(M.disabled=l[2]),5&n[0]&&R!==(R=l[2]?"正在计算...":l[0]?"关闭提示":"下一步提示")&&E(M,"title",R),1048576&n[0]&&nl!==(nl=l[20]?"ON":"OFF")&&O(W,nl),1048576&n[0]&&A(F,"badge-primary",l[20]),1048576&n[0]&&J!==(J="Notes ("+(l[20]?"ON":"OFF")+")")&&E(V,"title",J),l[3]?sl?sl.p(l,n):(sl=It(l),sl.c(),sl.m(G.parentNode,G)):sl&&(sl.d(1),sl=null),l[8]?rl?rl.p(l,n):(rl=Xt(l),rl.c(),rl.m(Y.parentNode,Y)):rl&&(rl.d(1),rl=null),l[9]?ol?ol.p(l,n):(ol=Gt(l),ol.c(),ol.m(Z.parentNode,Z)):ol&&(ol.d(1),ol=null)},i:l,o:l,d(l){l&&S(t),tl&&tl.d(),il.d(),l&&S(X),sl&&sl.d(l),l&&S(G),rl&&rl.d(l),l&&S(Y),ol&&ol.d(l),l&&S(Z),K=!1,u(Q)}}}function Zt(l,n,t){let e,u,i,s,r,o,d,f,h,m,p,g;c(l,dt,l=>t(12,u=l)),c(l,st,l=>t(13,i=l)),c(l,an,l=>t(14,s=l)),c(l,Wl,l=>t(15,r=l)),c(l,yn,l=>t(43,o=l)),c(l,rn,l=>t(1,d=l)),c(l,dn,l=>t(16,f=l)),c(l,ft,l=>t(17,h=l)),c(l,gt,l=>t(18,m=l)),c(l,un,l=>t(19,p=l)),c(l,et,l=>t(20,g=l));const b=Y();let v=!1,w=!1,x="",y="",k=null,$="",C=null,S=null,M="",{showHintDetail:z=!1}=n,N=null;function H(l,n){t(9,S=l),t(10,M=n)}function j(l){t(8,C=l)}function P(l,n){t(6,k=l),t(7,$=n)}return l.$$set=l=>{"showHintDetail"in l&&t(0,z=l.showHintDetail)},l.$$.update=()=>{2&l.$$.dirty[0]&&t(11,e=d>0)},[z,d,v,w,x,y,k,$,C,S,M,e,u,i,s,r,f,h,m,p,g,b,function(){e&&(o.hasOwnProperty(r.x+","+r.y)&&yn.clear(r),an.applyHint(r))},function(){if(st&&i.length>=10)return void t(5,y="最多保存10个分支点，请先删除部分分支点");const l=x.trim()||`分支点 - ${(new Date).toLocaleTimeString()}`,n=Date.now().toString(),e=Date.now(),s=JSON.stringify(rt()),r=new ut(n,l,e,s,u);st.add(r),t(4,x=""),t(5,y=""),t(3,w=!1)},H,function(){st.remove(S),t(9,S=null),t(10,M="")},function(){t(9,S=null),t(10,M="")},j,function(){const l=st.restore(C);l&&l.boardData&&ot(JSON.parse(l.boardData)),t(8,C=null),t(3,w=!1)},function(){t(8,C=null)},P,function(){if(k&&$.trim()){const l=st.restore(k);l&&(l.name=$.trim(),l.save(),st.refresh())}t(6,k=null),t(7,$="")},function(){t(6,k=null),t(7,$="")},function(){z?b("toggleHintDetail"):async function(){if(!v)try{if(t(2,v=!0),console.log("Getting next hint..."),!s)throw new Error("userGrid store is not available");console.log("UserGrid state:",s);const l=new Ot;console.log("Board created:",l);for(let n=0;n<9;n++)for(let t=0;t<9;t++){const e=s[n][t];if(0!==e){l.cells[n][t].value=e;const u=a(on);l.cells[n][t].isOriginal=0!==u[n][t]}}console.log("Board state after filling:",l.cells);const n=new Et;console.log("StrategyEngine created:",n);const e=n.getNextHint(l);console.log("StrategyEngine result:",e),e?(N=e,b("updateHintDetail",e)):(console.log("No hint found"),alert("当前没有可用的提示策略"))}catch(l){console.error("获取提示时出错:",l),console.error("Error stack:",l.stack),alert(`获取提示时出现错误：${l.message}`)}finally{t(2,v=!1)}}()},()=>b("openBranchManager"),()=>t(3,w=!1),function(){x=this.value,t(4,x)},function(){$=this.value,t(7,$)},l=>P(l.id,l.name),l=>j(l.id),l=>H(l.id,l.name),()=>t(3,w=!1)]}class Kt extends Ml{constructor(l){super(),Sl(this,l,Zt,Yt,s,{showHintDetail:0},null,[-1,-1])}}function Qt(l){let n,t,e,u;return n=new Ht({}),e=new Kt({props:{showHintDetail:l[2]}}),e.$on("updateHintDetail",l[4]),e.$on("toggleHintDetail",l[5]),e.$on("openBranchManager",l[8]),{c(){yl(n.$$.fragment),t=j(),yl(e.$$.fragment)},m(l,i){kl(n,l,i),C(l,t,i),kl(e,l,i),u=!0},p(l,n){const t={};4&n&&(t.showHintDetail=l[2]),e.$set(t)},i(l){u||(gl(n.$$.fragment,l),gl(e.$$.fragment,l),u=!0)},o(l){bl(n.$$.fragment,l),bl(e.$$.fragment,l),u=!1},d(l){$l(n,l),l&&S(t),$l(e,l)}}}function le(l){let n,t,e,u,i,s,r,o;return e=new Wn({props:{hintDetail:l[0],highlightHint:l[1]}}),e.$on("cellClick",l[6]),i=new tt({props:{hintDetail:l[0],highlightHint:l[1],showHintDetail:l[2],$$slots:{default:[Qt]},$$scope:{ctx:l}}}),i.$on("locate",l[7]),r=new $t({}),{c(){n=z("div"),t=z("div"),yl(e.$$.fragment),u=j(),yl(i.$$.fragment),s=j(),yl(r.$$.fragment),E(t,"class","w-full max-w-xl"),E(n,"class","px-4 pb-5 flex justify-center")},m(l,a){C(l,n,a),y(n,t),kl(e,t,null),y(t,u),kl(i,t,null),y(t,s),kl(r,t,null),o=!0},p(l,[n]){const t={};1&n&&(t.hintDetail=l[0]),2&n&&(t.highlightHint=l[1]),e.$set(t);const u={};1&n&&(u.hintDetail=l[0]),2&n&&(u.highlightHint=l[1]),4&n&&(u.showHintDetail=l[2]),516&n&&(u.$$scope={dirty:n,ctx:l}),i.$set(u)},i(l){o||(gl(e.$$.fragment,l),gl(i.$$.fragment,l),gl(r.$$.fragment,l),o=!0)},o(l){bl(e.$$.fragment,l),bl(i.$$.fragment,l),bl(r.$$.fragment,l),o=!1},d(l){l&&S(n),$l(e),$l(i),$l(r)}}}function ne(l,n,t){const e=Y();let u=null,i=!1,s=!1;return[u,i,s,e,function(l){t(0,u=l.detail),t(2,s=!0),t(1,i=!1)},function(){t(2,s=!s),s||t(0,u=null)},function(){t(1,i=!1)},function(){t(1,i=!0)},()=>e("openBranchManager")]}class te extends Ml{constructor(l){super(),Sl(this,l,ne,le,s,{})}}function ee(n){let t,e,i,s,r,o,a,c;return{c(){t=z("div"),e=z("button"),e.innerHTML='<svg class="icon-outline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path></svg>',i=j(),s=z("button"),s.innerHTML='<svg class="icon-outline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>',r=j(),o=z("button"),o.innerHTML='<svg class="icon-outline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',E(e,"class","btn btn-header svelte-235bq9"),E(e,"title","Share this Sudoku puzzle"),E(s,"class","btn btn-header svelte-235bq9"),E(s,"title","Strategy Learning"),E(o,"class","btn btn-header svelte-235bq9"),E(o,"title","Open Settings"),E(t,"class","flex justify-evenly space-x-3")},m(l,u){C(l,t,u),y(t,e),y(t,i),y(t,s),y(t,r),y(t,o),a||(c=[T(e,"click",n[0]),T(s,"click",n[2]),T(o,"click",n[1])],a=!0)},p:l,i:l,o:l,d(l){l&&S(t),a=!1,u(c)}}}function ue(l){return[function(){gn(),xn.show("share",{onHide:bn})},function(){gn(),xn.show("settings",{onHide:bn})},function(){gn(),xn.show("strategyLearning",{onHide:bn})}]}class ie extends Ml{constructor(l){super(),Sl(this,l,ue,ee,s,{})}}function se(l,n,t){const e=l.slice();return e[8]=n[t][0],e[9]=n[t][1],e}function re(l){let n,t,e,i,s,r,o,a,c,d,f,h,m,p,g=Object.entries(Nl),b=[];for(let n=0;n<g.length;n+=1)b[n]=oe(se(l,g,n));return{c(){n=z("button"),e=j(),i=z("div");for(let l=0;l<b.length;l+=1)b[l].c();s=j(),r=z("hr"),o=j(),a=z("a"),a.innerHTML='<svg class="icon-solid" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd"></path></svg> \n\n\t\t\t\t<span class="align-middle">Create Own</span>',c=j(),d=z("a"),d.innerHTML='<svg class="icon-solid" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"></path><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd"></path></svg> \n\n\t\t\t\t<span class="align-middle">Enter Code</span>',E(n,"class","dropdown-overlay svelte-s5cs3h"),E(n,"tabindex","-1"),E(r,"class","my-1"),E(a,"class","dropdown-item svelte-s5cs3h"),E(a,"href","/create"),E(a,"title","Create your own Sudoku puzzle"),E(d,"class","dropdown-item svelte-s5cs3h"),E(d,"href","/enter-code"),E(d,"title","Enter a Sudoku puzzle code from a friend"),E(i,"class","dropdown-menu svelte-s5cs3h")},m(t,u){C(t,n,u),C(t,e,u),C(t,i,u);for(let l=0;l<b.length;l+=1)b[l].m(i,null);y(i,s),y(i,r),y(i,o),y(i,a),y(i,c),y(i,d),h=!0,m||(p=[T(n,"click",l[6]),T(a,"click",B(l[3])),T(d,"click",B(l[4]))],m=!0)},p(n,t){if(l=n,4&t){let n;for(g=Object.entries(Nl),n=0;n<g.length;n+=1){const e=se(l,g,n);b[n]?b[n].p(e,t):(b[n]=oe(e),b[n].c(),b[n].m(i,s))}for(;n<b.length;n+=1)b[n].d(1);b.length=g.length}},i(l){h||(ul(()=>{t||(t=wl(n,Hn,{duration:Rl},!0)),t.run(1)}),ul(()=>{f||(f=wl(i,jn,{duration:Rl},!0)),f.run(1)}),h=!0)},o(l){t||(t=wl(n,Hn,{duration:Rl},!1)),t.run(0),f||(f=wl(i,jn,{duration:Rl},!1)),f.run(0),h=!1},d(l){l&&S(n),l&&t&&t.end(),l&&S(e),l&&S(i),M(b,l),l&&f&&f.end(),m=!1,u(p)}}}function oe(l){let n,t,e,u,i,s,r,o,a,c,d=l[9]+"";function f(){return l[7](l[8])}return{c(){n=z("a"),t=N("svg"),e=N("path"),u=j(),i=z("span"),s=H(d),E(e,"fill-rule","evenodd"),E(e,"d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"),E(e,"clip-rule","evenodd"),E(t,"class","icon-solid"),E(t,"xmlns","http://www.w3.org/2000/svg"),E(t,"viewBox","0 0 20 20"),E(t,"fill","currentColor"),E(i,"class","align-middle"),E(n,"class","dropdown-item svelte-s5cs3h"),E(n,"href",r="/difficulty-"+l[8]),E(n,"title",o="Set difficulty to '"+l[9]+"'")},m(l,r){C(l,n,r),y(n,t),y(t,e),y(n,u),y(n,i),y(i,s),a||(c=T(n,"click",B(f)),a=!0)},p(n,t){l=n},d(l){l&&S(n),a=!1,c()}}}function ae(l){let n,t,e,u,s,r,o,a,c,d,f,h,m=(l[1]===zl?"Custom":Nl[l[1]])+"",p=l[0]&&re(l);return{c(){n=z("div"),t=z("button"),e=N("svg"),u=N("path"),s=j(),r=z("span"),o=H(m),c=j(),p&&p.c(),E(u,"stroke-linecap","round"),E(u,"stroke-linejoin","round"),E(u,"stroke-width","2"),E(u,"d","M4 8h16M4 16h12"),E(e,"class","icon-outline mr-3"),E(e,"xmlns","http://www.w3.org/2000/svg"),E(e,"fill","none"),E(e,"viewBox","0 0 24 24"),E(e,"stroke","currentColor"),E(r,"class","text-2xl tracking-wider"),E(t,"class","dropdown-button svelte-s5cs3h"),E(t,"title",a=(l[0]?"Close":"Open")+" Menu"),E(n,"class","dropdown svelte-s5cs3h")},m(a,m){C(a,n,m),y(n,t),y(t,e),y(e,u),y(t,s),y(t,r),y(r,o),y(n,c),p&&p.m(n,null),d=!0,f||(h=T(t,"click",function(){i(l[0]?l[6]:l[5])&&(l[0]?l[6]:l[5]).apply(this,arguments)}),f=!0)},p(e,[u]){l=e,(!d||2&u)&&m!==(m=(l[1]===zl?"Custom":Nl[l[1]])+"")&&O(o,m),(!d||1&u&&a!==(a=(l[0]?"Close":"Open")+" Menu"))&&E(t,"title",a),l[0]?p?(p.p(l,u),1&u&&gl(p,1)):(p=re(l),p.c(),gl(p,1),p.m(n,null)):p&&(ml(),bl(p,1,1,()=>{p=null}),pl())},i(l){d||(gl(p),d=!0)},o(l){bl(p),d=!1},d(l){l&&S(n),p&&p.d(),f=!1,h()}}}function ce(l,n,t){let e;c(l,Jl,l=>t(1,e=l));let u=!1;function i(l){t(0,u=!1),vn.pause(),xn.show("confirm",{title:"New Game",text:'Start new game with difficulty "'+Nl[l]+'"?',button:"Continue",onHide:vn.resume,callback:()=>{vn.startNew(l)}})}return[u,e,i,function(){t(0,u=!1),vn.pause(),xn.show("confirm",{title:"Create Own",text:"Switch to the creator mode to create your own Sudoku puzzle?",button:"Continue",onHide:vn.resume,callback:()=>{}})},function(){t(0,u=!1),vn.pause(),xn.show("prompt",{title:"Enter Code",text:"Please enter the code of the Sudoku puzzle you want to play:",fontMono:!0,button:"Start",onHide:vn.resume,callback:l=>{vn.startCustom(l)},validate:Il})},function(){t(0,u=!0),vn.pause()},function(){t(0,u=!1),setTimeout(vn.resume,Rl)},l=>i(l)]}class de extends Ml{constructor(l){super(),Sl(this,l,ce,ae,s,{})}}const fe=l=>({}),he=l=>({});function me(l){let n,t,e,u,i,s,r,o;u=new de({});const a=l[1].import,c=d(a,l,l[0],he);return r=new ie({}),{c(){n=z("div"),t=z("div"),e=z("nav"),yl(u.$$.fragment),i=j(),c&&c.c(),s=j(),yl(r.$$.fragment),E(e,"class","flex flex-row items-center justify-between w-full gap-4"),E(t,"class","w-full max-w-xl"),E(n,"class","px-4 py-4 flex justify-center text-white")},m(l,a){C(l,n,a),y(n,t),y(t,e),kl(u,e,null),y(e,i),c&&c.m(e,null),y(e,s),kl(r,e,null),o=!0},p(l,[n]){c&&c.p&&(!o||1&n)&&m(c,a,l,l[0],o?h(a,l[0],n,fe):p(l[0]),he)},i(l){o||(gl(u.$$.fragment,l),gl(c,l),gl(r.$$.fragment,l),o=!0)},o(l){bl(u.$$.fragment,l),bl(c,l),bl(r.$$.fragment,l),o=!1},d(l){l&&S(n),$l(u),c&&c.d(l),$l(r)}}}function pe(l,n,t){let{$$slots:e={},$$scope:u}=n;return l.$$set=l=>{"$$scope"in l&&t(0,u=l.$$scope)},[u,e]}class ge extends Ml{constructor(l){super(),Sl(this,l,pe,me,s,{})}}function be(n){let t;return{c(){t=z("textarea"),t.readOnly="readonly",R(t,"position","absolute"),R(t,"left","-9999px")},m(l,e){C(l,t,e),n[2](t)},p:l,i:l,o:l,d(l){l&&S(t),n[2](null)}}}function ve(l,n,t){let e;return[e,function(l){if(navigator.clipboard)return navigator.clipboard.writeText(l);t(0,e.value=l,e);const n=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);e.select();let u=!1;try{u=document.execCommand("copy")}catch(l){}return n&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(n)),u?Promise.resolve():Promise.reject()},function(l){Q[l?"unshift":"push"](()=>{e=l,t(0,e)})}]}class we extends Ml{constructor(l){super(),Sl(this,l,ve,be,s,{copyText:1})}get copyText(){return this.$$.ctx[1]}}function xe(l){let n,t,e,s,r,o,a,c,d,f,h,m,p,g,b,v,w,x,k,$,M,H,P,L,O,_,R,D,A,V,I,q,U,F,W,J,X,G,Y,Z,K,ll,nl,tl;function el(n){l[11](n)}let ul={};return void 0!==l[2]&&(ul.copyText=l[2]),Z=new we({props:ul}),Q.push(()=>xl(Z,"copyText",el)),{c(){n=z("div"),t=z("h1"),t.textContent="Share Sudoku",e=j(),s=z("div"),s.innerHTML='<svg class="icon-outline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',r=j(),o=z("div"),a=z("input"),c=j(),d=z("button"),d.innerHTML='<svg class="icon-outline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"></path></svg>',f=j(),h=z("hr"),m=j(),p=z("div"),g=z("a"),b=N("svg"),v=N("path"),w=j(),x=z("span"),x.textContent="Copy Link",k=j(),$=z("a"),M=N("svg"),H=N("path"),P=j(),L=z("span"),L.textContent="Share on Twitter",O=j(),_=z("a"),R=N("svg"),D=N("path"),A=j(),V=z("span"),V.textContent="Share on Facebook",I=j(),q=z("a"),U=N("svg"),F=N("path"),W=j(),J=z("span"),J.textContent="Share by Email",X=j(),G=z("button"),G.innerHTML='<svg class="icon-outline mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"></path></svg> \n\n\t\t<span>Share QR Code</span>',Y=j(),yl(Z.$$.fragment),E(t,"class","text-3xl font-semibold leading-none"),E(s,"class","cursor-pointer"),E(n,"class","flex justify-between items-center mb-6"),E(a,"class","input code-field svelte-tjmwk3"),E(a,"type","text"),a.readOnly=!0,a.value=l[3],E(d,"class","btn btn-copy svelte-tjmwk3"),E(o,"class","code-container svelte-tjmwk3"),E(h,"class","my-8"),E(v,"stroke-linecap","round"),E(v,"stroke-linejoin","round"),E(v,"stroke-width","2"),E(v,"d","M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"),E(b,"class","icon-outline mr-2"),E(b,"xmlns","http://www.w3.org/2000/svg"),E(b,"fill","none"),E(b,"viewBox","0 0 24 24"),E(b,"stroke","currentColor"),E(g,"href",l[4]),E(g,"class","btn btn-small"),E(H,"d","M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"),E(M,"class","icon-outline mr-2"),E(M,"xmlns","http://www.w3.org/2000/svg"),E(M,"fill","currentColor"),E(M,"viewBox","0 0 24 24"),E(M,"stroke","none"),E($,"href",l[7]),E($,"target","_blank"),E($,"class","btn btn-share btn-share-twitter btn-small svelte-tjmwk3"),E(D,"d","M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"),E(R,"class","icon-outline mr-2"),E(R,"xmlns","http://www.w3.org/2000/svg"),E(R,"fill","currentColor"),E(R,"viewBox","0 0 24 24"),E(R,"stroke","none"),E(_,"href",l[6]),E(_,"target","_blank"),E(_,"class","btn btn-share btn-share-facebook btn-small svelte-tjmwk3"),E(F,"stroke-linecap","round"),E(F,"stroke-linejoin","round"),E(F,"stroke-width","2"),E(F,"d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"),E(U,"class","icon-outline mr-2"),E(U,"xmlns","http://www.w3.org/2000/svg"),E(U,"fill","none"),E(U,"viewBox","0 0 24 24"),E(U,"stroke","currentColor"),E(q,"href",l[8]),E(q,"target","_blank"),E(q,"class","btn btn-small"),E(G,"class","btn btn-small"),E(p,"class","flex flex-col space-y-2")},m(u,S){C(u,n,S),y(n,t),y(n,e),y(n,s),C(u,r,S),C(u,o,S),y(o,a),y(o,c),y(o,d),C(u,f,S),C(u,h,S),C(u,m,S),C(u,p,S),y(p,g),y(g,b),y(b,v),y(g,w),y(g,x),y(p,k),y(p,$),y($,M),y(M,H),y($,P),y($,L),y(p,O),y(p,_),y(_,R),y(R,D),y(_,A),y(_,V),y(p,I),y(p,q),y(q,U),y(U,F),y(q,W),y(q,J),y(p,X),y(p,G),C(u,Y,S),kl(Z,u,S),ll=!0,nl||(tl=[T(s,"click",function(){i(l[1])&&l[1].apply(this,arguments)}),T(a,"click",l[9]),T(d,"click",function(){i(l[2](l[3]))&&l[2](l[3]).apply(this,arguments)}),T(g,"click",B(function(){i(l[2](l[4]))&&l[2](l[4]).apply(this,arguments)})),T(G,"click",l[10])],nl=!0)},p(n,[t]){l=n;const e={};!K&&4&t&&(K=!0,e.copyText=l[2],il(()=>K=!1)),Z.$set(e)},i(l){ll||(gl(Z.$$.fragment,l),ll=!0)},o(l){bl(Z.$$.fragment,l),ll=!1},d(l){l&&S(n),l&&S(r),l&&S(o),l&&S(f),l&&S(h),l&&S(m),l&&S(p),l&&S(Y),$l(Z,l),nl=!1,u(tl)}}}function ye(l,n,t){let e;c(l,on,l=>t(12,e=l));let{data:u={}}=n,{hideModal:i}=n;const s=on.getSencode(e),r="https://sudoku-lele-kgyp.vercel.app/#"+s,o=encodeURIComponent(r),a="https://www.facebook.com/sharer/sharer.php?u="+o,d="https://twitter.com/intent/tweet?text=快来挑战这个数独题目！&url="+o,f="mailto:?subject=分享一个数独题目给你&body=这是一个数独题目的链接：%0A%0A"+o;let h;G(()=>{let l=!1;const n={url:r,title:"Sudoku",text:"Create & play Sudoku puzzles for free online on sudoku.jonasgeiler.com!"};"share"in navigator&&(l=!0),"canShare"in navigator&&(l=navigator.canShare(n)),l&&navigator.share(n)});return l.$$set=l=>{"data"in l&&t(0,u=l.data),"hideModal"in l&&t(1,i=l.hideModal)},[u,i,h,s,r,o,a,d,f,l=>function(l){l.select(),l.setSelectionRange(0,l.value.length)}(l.target),()=>xn.show("qrcode",{...u,encodedLink:o}),function(l){h=l,t(2,h)}]}function ke(n){let t,e,u,i,s,o,a;return{c(){var l,o;t=z("img"),u=j(),i=z("div"),s=z("button"),s.innerHTML='<svg class="icon-outline mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg> \n\n\t\t<span>Back</span>',E(t,"class","h-full w-full"),l=t.src,o=e=n[1],r||(r=document.createElement("a")),r.href=o,l!==r.href&&E(t,"src",e),E(s,"class","btn btn-small w-full"),E(i,"class","mt-3")},m(l,e){C(l,t,e),C(l,u,e),C(l,i,e),y(i,s),o||(a=T(s,"click",n[2]),o=!0)},p:l,i:l,o:l,d(l){l&&S(t),l&&S(u),l&&S(i),o=!1,a()}}}function $e(l,n,t){let{data:e={}}=n;const u="https://api.qrserver.com/v1/create-qr-code/?size=500x500&charset-source=UTF-8&charset-target=UTF-8&ecc=L&color=000&bgcolor=f7f9fc&margin=8&qzone=0&format=png&data="+e.encodedLink;return l.$$set=l=>{"data"in l&&t(0,e=l.data)},[e,u,()=>xn.show("share",e)]}function Ce(n){let t,e,u,i,s,r,o,a,c,d,f,h;return{c(){t=z("label"),e=z("span"),u=H(n[2]),i=j(),s=z("span"),r=z("input"),o=j(),a=z("span"),c=j(),d=z("span"),E(e,"class","flex-grow cursor-pointer text-lg"),E(r,"id",n[1]),E(r,"name",n[1]),E(r,"type","checkbox"),E(r,"class","sr-only svelte-q8seso"),r.disabled=n[3],E(a,"class","track svelte-q8seso"),E(d,"class","thumb svelte-q8seso"),E(s,"class","switch svelte-q8seso"),E(t,"for",n[1]),E(t,"class","inline-flex items-center")},m(l,m){C(l,t,m),y(t,e),y(e,u),y(t,i),y(t,s),y(s,r),r.checked=n[0],y(s,o),y(s,a),y(s,c),y(s,d),f||(h=T(r,"change",n[4]),f=!0)},p(l,[n]){4&n&&O(u,l[2]),2&n&&E(r,"id",l[1]),2&n&&E(r,"name",l[1]),8&n&&(r.disabled=l[3]),1&n&&(r.checked=l[0]),2&n&&E(t,"for",l[1])},i:l,o:l,d(l){l&&S(t),f=!1,h()}}}function Se(l,n,t){let{id:e=""}=n,{text:u=""}=n,{checked:i=!1}=n,{disabled:s=!1}=n;return l.$$set=l=>{"id"in l&&t(1,e=l.id),"text"in l&&t(2,u=l.text),"checked"in l&&t(0,i=l.checked),"disabled"in l&&t(3,s=l.disabled)},[i,e,u,s,function(){i=this.checked,t(0,i)}]}class Me extends Ml{constructor(l){super(),Sl(this,l,Se,Ce,s,{id:1,text:2,checked:0,disabled:3})}}function ze(l){let n,t,e,u,i,s,r,o;return{c(){n=z("div"),t=z("label"),t.textContent="可用提示次数",e=j(),u=z("input"),E(t,"for","hints"),E(t,"class","flex-grow text-lg"),E(u,"class","number-input svelte-ja6zhe"),E(u,"id","hints"),E(u,"name","hints"),E(u,"type","number"),E(u,"min","0"),E(u,"max","81"),E(n,"class","inline-flex items-center")},m(i,a){C(i,n,a),y(n,t),y(n,e),y(n,u),_(u,l[1].hints),s=!0,r||(o=T(u,"input",l[7]),r=!0)},p(l,n){2&n&&L(u.value)!==l[1].hints&&_(u,l[1].hints)},i(l){s||(ul(()=>{i||(i=wl(n,jn,{},!0)),i.run(1)}),s=!0)},o(l){i||(i=wl(n,jn,{},!1)),i.run(0),s=!1},d(l){l&&S(n),l&&i&&i.end(),r=!1,o()}}}function Ne(l){let n,t,e,s,r,o,a,c,d,f,h,m,p,g,b,v,w,x,k,$,M,N,H,P,B,L,O,_,R,D,A,V;function I(n){l[5](n)}let q={text:"游戏时显示计时器",id:"display-timer"};function U(n){l[6](n)}void 0!==l[1].displayTimer&&(q.checked=l[1].displayTimer),s=new Me({props:q}),Q.push(()=>xl(s,"checked",I));let F={text:"限制可用提示次数",id:"hints-limited"};void 0!==l[2]&&(F.checked=l[2]),a=new Me({props:F}),Q.push(()=>xl(a,"checked",U));let W=l[2]&&ze(l);function J(n){l[8](n)}let X={text:"高亮同一行/列/宫的格子",id:"highlight-cells"};function G(n){l[9](n)}void 0!==l[1].highlightCells&&(X.checked=l[1].highlightCells),h=new Me({props:X}),Q.push(()=>xl(h,"checked",J));let Y={text:"高亮相同数字的格子",id:"highlight-matching"};function Z(n){l[10](n)}void 0!==l[1].highlightSame&&(Y.checked=l[1].highlightSame),g=new Me({props:Y}),Q.push(()=>xl(g,"checked",G));let K={text:"高亮冲突数字",id:"highlight-conflicting"};function ll(n){l[11](n)}void 0!==l[1].highlightConflicting&&(K.checked=l[1].highlightConflicting),w=new Me({props:K}),Q.push(()=>xl(w,"checked",Z));let nl={text:"输入错误时显示错误提示",id:"show-errors"};function tl(n){l[12](n)}void 0!==l[1].showErrors&&(nl.checked=l[1].showErrors),$=new Me({props:nl}),Q.push(()=>xl($,"checked",ll));let el={text:"仅允许填入候选数（禁用已存在数字）",id:"only-allow-candidates"};return void 0!==l[1].onlyAllowCandidates&&(el.checked=l[1].onlyAllowCandidates),H=new Me({props:el}),Q.push(()=>xl(H,"checked",tl)),{c(){n=z("h1"),n.textContent="设置",t=j(),e=z("div"),yl(s.$$.fragment),o=j(),yl(a.$$.fragment),d=j(),W&&W.c(),f=j(),yl(h.$$.fragment),p=j(),yl(g.$$.fragment),v=j(),yl(w.$$.fragment),k=j(),yl($.$$.fragment),N=j(),yl(H.$$.fragment),B=j(),L=z("div"),O=z("button"),O.textContent="取消",_=j(),R=z("button"),R.textContent="保存",E(n,"class","text-3xl font-semibold mb-6 leading-none"),E(e,"class","flex flex-col mb-6 space-y-3"),E(O,"class","btn btn-small mr-3"),E(R,"class","btn btn-small btn-primary"),E(L,"class","flex justify-end")},m(u,r){C(u,n,r),C(u,t,r),C(u,e,r),kl(s,e,null),y(e,o),kl(a,e,null),y(e,d),W&&W.m(e,null),y(e,f),kl(h,e,null),y(e,p),kl(g,e,null),y(e,v),kl(w,e,null),y(e,k),kl($,e,null),y(e,N),kl(H,e,null),C(u,B,r),C(u,L,r),y(L,O),y(L,_),y(L,R),D=!0,A||(V=[T(O,"click",function(){i(l[0])&&l[0].apply(this,arguments)}),T(R,"click",l[3])],A=!0)},p(n,[t]){l=n;const u={};!r&&2&t&&(r=!0,u.checked=l[1].displayTimer,il(()=>r=!1)),s.$set(u);const i={};!c&&4&t&&(c=!0,i.checked=l[2],il(()=>c=!1)),a.$set(i),l[2]?W?(W.p(l,t),4&t&&gl(W,1)):(W=ze(l),W.c(),gl(W,1),W.m(e,f)):W&&(ml(),bl(W,1,1,()=>{W=null}),pl());const o={};!m&&2&t&&(m=!0,o.checked=l[1].highlightCells,il(()=>m=!1)),h.$set(o);const d={};!b&&2&t&&(b=!0,d.checked=l[1].highlightSame,il(()=>b=!1)),g.$set(d);const p={};!x&&2&t&&(x=!0,p.checked=l[1].highlightConflicting,il(()=>x=!1)),w.$set(p);const v={};!M&&2&t&&(M=!0,v.checked=l[1].showErrors,il(()=>M=!1)),$.$set(v);const y={};!P&&2&t&&(P=!0,y.checked=l[1].onlyAllowCandidates,il(()=>P=!1)),H.$set(y)},i(l){D||(gl(s.$$.fragment,l),gl(a.$$.fragment,l),gl(W),gl(h.$$.fragment,l),gl(g.$$.fragment,l),gl(w.$$.fragment,l),gl($.$$.fragment,l),gl(H.$$.fragment,l),D=!0)},o(l){bl(s.$$.fragment,l),bl(a.$$.fragment,l),bl(W),bl(h.$$.fragment,l),bl(g.$$.fragment,l),bl(w.$$.fragment,l),bl($.$$.fragment,l),bl(H.$$.fragment,l),D=!1},d(l){l&&S(n),l&&S(t),l&&S(e),$l(s),$l(a),W&&W.d(),$l(h),$l(g),$l(w),$l($),$l(H),l&&S(B),l&&S(L),A=!1,u(V)}}}function He(l,n,t){let e;c(l,un,l=>t(13,e=l));let{data:u={}}=n,{hideModal:i}=n,s={...e},r=s.hintsLimited;return l.$$set=l=>{"data"in l&&t(4,u=l.data),"hideModal"in l&&t(0,i=l.hideModal)},[i,s,r,function(){t(1,s.hintsLimited=r,s),s.hints<0&&t(1,s.hints=0,s),s.hints>99999&&t(1,s.hints=99999,s),un.set(s),i()},u,function(n){l.$$.not_equal(s.displayTimer,n)&&(s.displayTimer=n,t(1,s))},function(l){r=l,t(2,r)},function(){s.hints=L(this.value),t(1,s)},function(n){l.$$.not_equal(s.highlightCells,n)&&(s.highlightCells=n,t(1,s))},function(n){l.$$.not_equal(s.highlightSame,n)&&(s.highlightSame=n,t(1,s))},function(n){l.$$.not_equal(s.highlightConflicting,n)&&(s.highlightConflicting=n,t(1,s))},function(n){l.$$.not_equal(s.showErrors,n)&&(s.showErrors=n,t(1,s))},function(n){l.$$.not_equal(s.onlyAllowCandidates,n)&&(s.onlyAllowCandidates=n,t(1,s))}]}function je(l){let n,t,e=l[0].text+"";return{c(){n=z("p"),t=H(e),E(n,"class","text-lg mb-5")},m(l,e){C(l,n,e),y(n,t)},p(l,n){1&n&&e!==(e=l[0].text+"")&&O(t,e)},d(l){l&&S(n)}}}function Pe(n){let t,e,s,r,o,a,c,d,f,h,m,p=(n[0].title||"Confirm")+"",g=(n[0].button||"Okay")+"",b=n[0].text&&je(n);return{c(){t=z("h1"),e=H(p),s=j(),b&&b.c(),r=j(),o=z("div"),a=z("button"),a.textContent="Cancel",c=j(),d=z("button"),f=H(g),E(t,"class","text-3xl font-semibold mb-5 leading-none"),E(a,"class","btn btn-small mr-3"),E(d,"class","btn btn-small btn-primary"),E(o,"class","flex justify-end")},m(l,u){C(l,t,u),y(t,e),C(l,s,u),b&&b.m(l,u),C(l,r,u),C(l,o,u),y(o,a),y(o,c),y(o,d),y(d,f),h||(m=[T(a,"click",function(){i(n[1])&&n[1].apply(this,arguments)}),T(d,"click",n[2])],h=!0)},p(l,[t]){n=l,1&t&&p!==(p=(n[0].title||"Confirm")+"")&&O(e,p),n[0].text?b?b.p(n,t):(b=je(n),b.c(),b.m(r.parentNode,r)):b&&(b.d(1),b=null),1&t&&g!==(g=(n[0].button||"Okay")+"")&&O(f,g)},i:l,o:l,d(l){l&&S(t),l&&S(s),b&&b.d(l),l&&S(r),l&&S(o),h=!1,u(m)}}}function Te(l,n,t){let{data:e={}}=n,{hideModal:u}=n;return l.$$set=l=>{"data"in l&&t(0,e=l.data),"hideModal"in l&&t(1,u=l.hideModal)},[e,u,function(){e.callback&&e.callback(),u()}]}function Be(l){let n,t,e=l[0].text+"";return{c(){n=z("label"),t=H(e),E(n,"for","prompt-input"),E(n,"class","text-lg mb-4")},m(l,e){C(l,n,e),y(n,t)},p(l,n){1&n&&e!==(e=l[0].text+"")&&O(t,e)},d(l){l&&S(n)}}}function Ee(n){let t,e,s,r,o,a,c,d,f,h,m,p,g,b,v=(n[0].title||"Please enter something")+"",w=(n[0].button||"Okay")+"",x=n[0].text&&Be(n);return{c(){t=z("h1"),e=H(v),s=j(),x&&x.c(),r=j(),o=z("input"),a=j(),c=z("div"),d=z("button"),d.textContent="Cancel",f=j(),h=z("button"),m=H(w),E(t,"class","text-3xl font-semibold mb-5 leading-none"),E(o,"class","input mb-5"),E(o,"id","prompt-input"),E(o,"name","prompt-input"),E(o,"type","text"),A(o,"font-mono",n[0].fontMono),E(d,"class","btn btn-small mr-3"),E(h,"class","btn btn-small btn-primary"),h.disabled=p=!!n[0].validate&&!n[0].validate(n[2]),E(c,"class","flex justify-end")},m(l,u){C(l,t,u),y(t,e),C(l,s,u),x&&x.m(l,u),C(l,r,u),C(l,o,u),_(o,n[2]),C(l,a,u),C(l,c,u),y(c,d),y(c,f),y(c,h),y(h,m),g||(b=[T(o,"input",n[4]),T(d,"click",function(){i(n[1])&&n[1].apply(this,arguments)}),T(h,"click",n[3])],g=!0)},p(l,[t]){n=l,1&t&&v!==(v=(n[0].title||"Please enter something")+"")&&O(e,v),n[0].text?x?x.p(n,t):(x=Be(n),x.c(),x.m(r.parentNode,r)):x&&(x.d(1),x=null),4&t&&o.value!==n[2]&&_(o,n[2]),1&t&&A(o,"font-mono",n[0].fontMono),1&t&&w!==(w=(n[0].button||"Okay")+"")&&O(m,w),5&t&&p!==(p=!!n[0].validate&&!n[0].validate(n[2]))&&(h.disabled=p)},i:l,o:l,d(l){l&&S(t),l&&S(s),x&&x.d(l),l&&S(r),l&&S(o),l&&S(a),l&&S(c),g=!1,u(b)}}}function Le(l,n,t){let{data:e={}}=n,{hideModal:u}=n,i="";return l.$$set=l=>{"data"in l&&t(0,e=l.data),"hideModal"in l&&t(1,u=l.hideModal)},[e,u,i,function(){e.callback&&e.callback(i),u()},function(){i=this.value,t(2,i)}]}function Oe(l,n,t){const e=l.slice();return e[10]=n[t][0],e[11]=n[t][1],e}function _e(l){let n;return{c(){n=z("div"),n.innerHTML="Someone shared a Sudoku puzzle with you!<br/>Just click start if you want to play it",E(n,"class","p-3 text-lg rounded bg-primary bg-opacity-25 border-l-8 border-primary border-opacity-75 mb-4")},m(l,t){C(l,n,t)},d(l){l&&S(n)}}}function Re(n){let t,e,u,i=n[11]+"";return{c(){t=z("option"),e=H(i),t.__value=u=n[10],t.value=t.__value},m(l,n){C(l,t,n),y(t,e)},p:l,d(l){l&&S(t)}}}function De(n){let t,e,i,s,r,o,a,c,d,f,h,m,p,g,b,v,w,x,k,$=n[0].sencode&&_e(),N=Object.entries(Nl),P=[];for(let l=0;l<N.length;l+=1)P[l]=Re(Oe(n,N,l));return{c(){t=z("h1"),t.textContent="Welcome!",e=j(),$&&$.c(),i=j(),s=z("label"),s.textContent="To start a game, choose a difficulty:",r=j(),o=z("div"),a=z("select");for(let l=0;l<P.length;l+=1)P[l].c();c=j(),d=z("div"),d.innerHTML='<svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"></path></svg>',f=j(),h=z("label"),h.textContent="Or, if you have a code for a custom Sudoku puzzle, enter it here:",m=j(),p=z("input"),g=j(),b=z("div"),v=z("button"),w=H("Start"),E(t,"class","text-3xl font-semibold mb-6 leading-none"),E(s,"for","difficulty"),E(s,"class","text-lg mb-3"),E(a,"id","difficulty"),E(a,"class","btn btn-small w-full appearance-none leading-normal"),a.disabled=n[3],void 0===n[1]&&ul(()=>n[7].call(a)),E(d,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"),E(o,"class","inline-block relative mb-6"),E(h,"for","sencode"),E(h,"class","text-lg mb-3"),E(p,"id","sencode"),E(p,"class","input font-mono mb-5"),E(p,"type","text"),E(v,"class","btn btn-small btn-primary"),v.disabled=n[4],E(b,"class","flex justify-end")},m(l,u){C(l,t,u),C(l,e,u),$&&$.m(l,u),C(l,i,u),C(l,s,u),C(l,r,u),C(l,o,u),y(o,a);for(let l=0;l<P.length;l+=1)P[l].m(a,null);D(a,n[1]),y(o,c),y(o,d),C(l,f,u),C(l,h,u),C(l,m,u),C(l,p,u),_(p,n[2]),C(l,g,u),C(l,b,u),y(b,v),y(v,w),x||(k=[T(a,"change",n[7]),T(p,"input",n[8]),T(v,"click",n[5])],x=!0)},p(l,[n]){if(l[0].sencode?$||($=_e(),$.c(),$.m(i.parentNode,i)):$&&($.d(1),$=null),0&n){let t;for(N=Object.entries(Nl),t=0;t<N.length;t+=1){const e=Oe(l,N,t);P[t]?P[t].p(e,n):(P[t]=Re(e),P[t].c(),P[t].m(a,null))}for(;t<P.length;t+=1)P[t].d(1);P.length=N.length}8&n&&(a.disabled=l[3]),2&n&&D(a,l[1]),4&n&&p.value!==l[2]&&_(p,l[2]),16&n&&(v.disabled=l[4])},i:l,o:l,d(l){l&&S(t),l&&S(e),$&&$.d(l),l&&S(i),l&&S(s),l&&S(r),l&&S(o),M(P,l),l&&S(f),l&&S(h),l&&S(m),l&&S(p),l&&S(g),l&&S(b),x=!1,u(k)}}}function Ae(l,n,t){let e,u,i;c(l,Jl,l=>t(9,i=l));let{data:s={}}=n,{hideModal:r}=n,o=i,a=s.sencode||"";return l.$$set=l=>{"data"in l&&t(0,s=l.data),"hideModal"in l&&t(6,r=l.hideModal)},l.$$.update=()=>{4&l.$$.dirty&&t(3,e=0!==a.trim().length),14&l.$$.dirty&&t(4,u=e?!Il(a):!Nl.hasOwnProperty(o))},[s,o,a,e,u,function(){Il(a)?pn(a):mn(o),r()},r,function(){o=function(l){const n=l.querySelector(":checked")||l.options[0];return n&&n.__value}(this),t(1,o)},function(){a=this.value,t(2,a)}]}function Ve(n){let t,e,i,s,r,o,a,c,d,f,h,m,p,g,b,v,w,x,k,$,M,P,B,L,_,R,D,A,V,I,q,U,F,W,J,X,G,Y,Z,K=(n[1]===zl?"Custom":Nl[n[1]])+"";return{c(){t=z("div"),e=N("svg"),i=N("path"),s=j(),r=z("h1"),r.textContent=`${n[3]}`,o=j(),a=z("div"),c=z("div"),d=z("div"),d.innerHTML='<svg class="icon-outline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',f=j(),h=z("div"),m=z("div"),m.textContent="Time:",p=j(),g=z("div"),b=H(n[0]),v=j(),w=z("div"),x=z("div"),x.innerHTML='<svg class="icon-outline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>',k=j(),$=z("div"),M=z("div"),M.textContent="Difficulty:",P=j(),B=z("div"),L=H(K),_=j(),R=z("div"),D=z("div"),D.innerHTML='<svg class="icon-outline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg>',A=j(),V=z("div"),I=z("div"),I.textContent="Hints used:",q=j(),U=z("div"),F=H(n[2]),W=j(),J=z("button"),J.textContent="Share this Sudoku puzzle",X=j(),G=z("button"),G.textContent="New Game",E(i,"d","M1 6.417c0-1.013.822-1.833 1.834-1.833 1.215 0 2.104 1.167 1.763 2.329-.559 1.915 5.827 3.731 6.771-1.471.239-1.323-.021-1.67-.668-2.321-.329-.329-.534-.783-.534-1.287 0-1.013.822-1.834 1.834-1.834 1.014 0 1.833.821 1.833 1.833 0 .504-.204.958-.533 1.287-.646.65-.905.998-.666 2.321.941 5.2 7.33 3.387 6.77 1.471-.339-1.162.548-2.329 1.764-2.329 1.012 0 1.832.821 1.832 1.834 0 1.118-.992 1.97-2.084 1.816-1.32-.187-3.03 4.554-3.417 6.716-1.765-.615-3.618-.942-5.493-.949-1.875.006-3.74.334-5.504.949-.388-2.162-2.098-6.903-3.418-6.717-1.092.155-2.084-.697-2.084-1.815zm-1 14.583h2.359l.566 3c.613-1.012 1.388-1.912 2.277-2.68l-2.342-3.335c-1.089.879-2.053 1.848-2.86 3.015zm24 0h-2.359l-.566 3c-.613-1.012-1.388-1.912-2.277-2.68l2.343-3.335c1.088.879 2.052 1.848 2.859 3.015zm-12-4.998c-2.845.009-5.491.825-7.757 2.211l2.334 3.322c1.603-.924 3.448-1.464 5.423-1.473 1.975.009 3.82.549 5.423 1.473l2.334-3.322c-2.266-1.386-4.912-2.202-7.757-2.211zm-3.022 3.498l-.65-.348-.651.348.131-.726-.531-.511.729-.101.321-.662.322.663.729.101-.53.511.13.725zm3.672-.5l-.65-.348-.65.348.131-.726-.531-.511.729-.101.321-.662.322.663.729.101-.53.511.129.725zm3.718.5l-.65-.348-.65.348.131-.726-.531-.511.729-.101.322-.663.322.663.729.101-.53.511.128.726z"),E(e,"class","h-32 w-32 fill-current"),E(e,"xmlns","http://www.w3.org/2000/svg"),E(e,"viewBox","0 0 24 24"),E(r,"class","text-4xl font-semibold"),E(t,"class","flex flex-col text-center items-center"),E(d,"class","item-icon svelte-1r0bb2i"),E(m,"class","item-data-label svelte-1r0bb2i"),E(g,"class","item-data-value svelte-1r0bb2i"),E(h,"class","item-data svelte-1r0bb2i"),E(c,"class","game-data-item svelte-1r0bb2i"),E(x,"class","item-icon svelte-1r0bb2i"),E(M,"class","item-data-label svelte-1r0bb2i"),E(B,"class","item-data-value svelte-1r0bb2i"),E($,"class","item-data svelte-1r0bb2i"),E(w,"class","game-data-item svelte-1r0bb2i"),E(D,"class","item-icon svelte-1r0bb2i"),E(I,"class","item-data-label svelte-1r0bb2i"),E(U,"class","item-data-value svelte-1r0bb2i"),E(V,"class","item-data svelte-1r0bb2i"),E(R,"class","game-data-item svelte-1r0bb2i"),E(a,"class","game-data space-y-2 svelte-1r0bb2i"),E(J,"class","btn btn-small w-full mb-2"),E(G,"class","btn btn-small btn-primary w-full")},m(l,u){C(l,t,u),y(t,e),y(e,i),y(t,s),y(t,r),C(l,o,u),C(l,a,u),y(a,c),y(c,d),y(c,f),y(c,h),y(h,m),y(h,p),y(h,g),y(g,b),y(a,v),y(a,w),y(w,x),y(w,k),y(w,$),y($,M),y($,P),y($,B),y(B,L),y(a,_),y(a,R),y(R,D),y(R,A),y(R,V),y(V,I),y(V,q),y(V,U),y(U,F),C(l,W,u),C(l,J,u),C(l,X,u),C(l,G,u),Y||(Z=[T(J,"click",n[4]),T(G,"click",n[5])],Y=!0)},p(l,[n]){1&n&&O(b,l[0]),2&n&&K!==(K=(l[1]===zl?"Custom":Nl[l[1]])+"")&&O(L,K),4&n&&O(F,l[2])},i:l,o:l,d(l){l&&S(t),l&&S(o),l&&S(a),l&&S(W),l&&S(J),l&&S(X),l&&S(G),Y=!1,u(Z)}}}function Ie(l,n,t){let e,u,i;c(l,hn,l=>t(0,e=l)),c(l,Jl,l=>t(1,u=l)),c(l,sn,l=>t(2,i=l));const s=Dl[Math.floor(Math.random()*Dl.length)];return[e,u,i,s,function(){xn.show("share",{onHide:()=>xn.show("gameover"),onHideReplace:!0})},function(){xn.show("welcome",{onHide:bn})}]}function qe(l,n,t){const e=l.slice();return e[4]=n[t],e}function Ue(l){let n,t,e,u,i,s,r,o,a,c,d,f,h,m,p,g,b,v=l[4].name+"",w=l[4].difficulty+"",x=l[4].description+"",k=l[4].example+"";function $(){return l[3](l[4])}return{c(){n=z("div"),t=z("div"),e=z("h3"),u=H(v),i=j(),s=z("span"),r=H(w),o=j(),a=z("p"),c=H(x),d=j(),f=z("p"),h=H("示例："),m=H(k),p=j(),E(e,"class","text-lg font-semibold text-blue-600 cursor-pointer hover:underline"),E(s,"class","text-xs px-2 py-1 rounded bg-gray-200"),E(t,"class","flex justify-between items-start mb-2"),E(a,"class","text-gray-700 mb-2"),E(f,"class","text-sm text-gray-600 italic"),E(n,"class","border rounded-lg p-4 hover:bg-gray-50")},m(l,v){C(l,n,v),y(n,t),y(t,e),y(e,u),y(t,i),y(t,s),y(s,r),y(n,o),y(n,a),y(a,c),y(n,d),y(n,f),y(f,h),y(f,m),y(n,p),g||(b=T(e,"click",$),g=!0)},p(n,t){l=n},d(l){l&&S(n),g=!1,b()}}}function Fe(n){let t,e,u,s,r,o,a,c,d,f,h,m,p=n[1],g=[];for(let l=0;l<p.length;l+=1)g[l]=Ue(qe(n,p,l));return{c(){t=z("div"),e=z("h1"),e.textContent="策略学习",u=j(),s=z("div"),s.innerHTML='<svg class="icon-outline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',r=j(),o=z("div"),o.innerHTML='<p class="text-gray-600 mb-4">学习数独解题策略，提升解题能力。点击策略名称查看详细说明。</p>',a=j(),c=z("div");for(let l=0;l<g.length;l+=1)g[l].c();d=j(),f=z("div"),f.innerHTML='<p class="text-sm text-gray-500">更多策略请访问 \n\t\t<a href="https://www.sudokuwiki.org/Sudoku.htm" target="_blank" class="text-blue-600 hover:underline">SudokuWiki.org</a></p>',E(e,"class","text-3xl font-semibold leading-none"),E(s,"class","cursor-pointer"),E(t,"class","flex justify-between items-center mb-6"),E(o,"class","mb-4"),E(c,"class","space-y-4"),E(f,"class","mt-6 text-center")},m(l,p){C(l,t,p),y(t,e),y(t,u),y(t,s),C(l,r,p),C(l,o,p),C(l,a,p),C(l,c,p);for(let l=0;l<g.length;l+=1)g[l].m(c,null);C(l,d,p),C(l,f,p),h||(m=T(s,"click",function(){i(n[0])&&n[0].apply(this,arguments)}),h=!0)},p(l,[t]){if(n=l,6&t){let l;for(p=n[1],l=0;l<p.length;l+=1){const e=qe(n,p,l);g[l]?g[l].p(e,t):(g[l]=Ue(e),g[l].c(),g[l].m(c,null))}for(;l<g.length;l+=1)g[l].d(1);g.length=p.length}},i:l,o:l,d(l){l&&S(t),l&&S(r),l&&S(o),l&&S(a),l&&S(c),M(g,l),l&&S(d),l&&S(f),h=!1,m()}}}function We(l,n,t){let{hideModal:e}=n;function u(l){xn.show("wikiStrategy",{strategy:l,onHide:()=>{xn.show("strategyLearning",{onHide:e})}})}return l.$$set=l=>{"hideModal"in l&&t(0,e=l.hideModal)},[e,[{name:"隐藏单数",difficulty:"简单",description:"在行、列或宫中，某个数字只能填入一个位置。",example:"在某个宫中，数字5只能填入一个格子。",steps:["检查每个宫、行、列","找出只能填入一个位置的数字","填入该数字"],relatedStrategies:["裸单数","唯一候选数"],practiceTips:["从简单的宫开始练习","注意观察候选数的分布"],wikiUrl:"https://www.sudokuwiki.org/Hidden_Singles"},{name:"裸单数",difficulty:"简单",description:"某个格子只有一个候选数。",example:"某个格子只能填入数字3。",steps:["检查每个格子的候选数","找出只有一个候选数的格子","填入该数字"],relatedStrategies:["隐藏单数","唯一候选数"],practiceTips:["先完成所有裸单数","再寻找隐藏单数"],wikiUrl:"https://www.sudokuwiki.org/Naked_Singles"},{name:"唯一候选数",difficulty:"简单",description:"在行、列或宫中，某个候选数只出现在一个位置。",example:"在某个宫中，候选数7只出现在一个格子中。",steps:["标记所有候选数","检查每个宫、行、列","找出唯一出现的候选数","填入该数字"],relatedStrategies:["隐藏单数","裸单数"],practiceTips:["系统性地检查每个区域","注意候选数的唯一性"],wikiUrl:"https://www.sudokuwiki.org/Singles"},{name:"裸数对",difficulty:"中等",description:"两个格子只包含相同的两个候选数。",example:"两个格子都只能填入数字2和5。",steps:["检查每个宫、行、列","找出只包含相同两个候选数的格子","排除其他格子中的这些候选数"],relatedStrategies:["隐藏数对","裸数三"],practiceTips:["注意观察候选数的组合","数对可以排除其他候选数"],wikiUrl:"https://www.sudokuwiki.org/Naked_Pairs"},{name:"隐藏数对",difficulty:"中等",description:"在行、列或宫中，两个候选数只出现在两个格子中。",example:"在某个宫中，候选数3和7只出现在两个格子中。",steps:["检查每个宫、行、列","找出只出现在两个格子中的候选数","这两个格子只能填入这些候选数"],relatedStrategies:["裸数对","隐藏数三"],practiceTips:["注意候选数的分布模式","隐藏数对可以简化候选数"],wikiUrl:"https://www.sudokuwiki.org/Hidden_Pairs"},{name:"X-Wing",difficulty:"困难",description:"某个候选数在两行中都只出现在相同的两列中。",example:"候选数4在两行中都只出现在第2列和第8列。",steps:["检查每行的候选数分布","找出在两行中只出现在相同两列的候选数","排除这两列中其他行的该候选数"],relatedStrategies:["Swordfish","XY-Wing"],practiceTips:["需要仔细观察候选数模式","X-Wing是高级技巧的基础"],wikiUrl:"https://www.sudokuwiki.org/X_Wing"}],u,l=>u(l)]}function Je(l,n,t){const e=l.slice();return e[12]=n[t],e}function Xe(l,n,t){const e=l.slice();return e[15]=n[t],e}function Ge(l){let n,t,e,u,i,s=l[15].name+"";function r(){return l[7](l[15])}return{c(){n=z("button"),t=H(s),e=j(),E(n,"class","px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm hover:bg-green-200")},m(l,s){C(l,n,s),y(n,t),y(n,e),u||(i=T(n,"click",r),u=!0)},p(n,t){l=n},d(l){l&&S(n),u=!1,i()}}}function Ye(l){let n,t,e,u,i,s,r,o,a,c,d,f,h,m=l[12].name+"",p=l[12].difficulty+"",g=l[12].description+"",b=l[12].puzzles,v=[];for(let n=0;n<b.length;n+=1)v[n]=Ge(Xe(l,b,n));return{c(){n=z("div"),t=z("div"),e=z("h3"),u=H(m),i=j(),s=z("span"),r=H(p),o=j(),a=z("p"),c=H(g),d=j(),f=z("div");for(let l=0;l<v.length;l+=1)v[l].c();h=j(),E(e,"class","text-lg font-semibold text-green-600"),E(s,"class","text-xs px-2 py-1 rounded bg-gray-200"),E(t,"class","flex justify-between items-start mb-2"),E(a,"class","text-gray-700 mb-2"),E(f,"class","flex flex-wrap gap-2"),E(n,"class","border rounded-lg p-4 hover:bg-gray-50")},m(l,m){C(l,n,m),y(n,t),y(t,e),y(e,u),y(t,i),y(t,s),y(s,r),y(n,o),y(n,a),y(a,c),y(n,d),y(n,f);for(let l=0;l<v.length;l+=1)v[l].m(f,null);y(n,h)},p(l,n){if(20&n){let t;for(b=l[12].puzzles,t=0;t<b.length;t+=1){const e=Xe(l,b,t);v[t]?v[t].p(e,n):(v[t]=Ge(e),v[t].c(),v[t].m(f,null))}for(;t<v.length;t+=1)v[t].d(1);v.length=b.length}},d(l){l&&S(n),M(v,l)}}}function Ze(n){let t,e,s,r,o,a,c,d,f,h,m,p,g,b,v,w,x,k,$,N,H,P,B,L,O,R=n[2],D=[];for(let l=0;l<R.length;l+=1)D[l]=Ye(Je(n,R,l));return{c(){t=z("div"),e=z("h1"),e.textContent="SudokuWiki题库",s=j(),r=z("div"),r.innerHTML='<svg class="icon-outline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',o=j(),a=z("div"),c=z("p"),c.textContent="浏览SudokuWiki题库，选择适合的题目进行练习。",d=j(),f=z("button"),f.textContent="← 返回策略学习",h=j(),m=z("div");for(let l=0;l<D.length;l+=1)D[l].c();p=j(),g=z("div"),b=z("h3"),b.textContent="自定义题目导入",v=j(),w=z("p"),w.textContent="从SudokuWiki URL导入题目：",x=j(),k=z("div"),$=z("input"),N=j(),H=z("button"),H.textContent="导入",P=j(),B=z("div"),B.innerHTML='<p class="text-sm text-gray-500">更多题目请访问 \n\t\t<a href="https://www.sudokuwiki.org/sudoku.htm" target="_blank" class="text-blue-600 hover:underline">SudokuWiki.org</a></p>',E(e,"class","text-3xl font-semibold leading-none"),E(r,"class","cursor-pointer"),E(t,"class","flex justify-between items-center mb-6"),E(c,"class","text-gray-600 mb-4"),E(f,"class","btn btn-secondary mb-4"),E(a,"class","mb-4"),E(m,"class","space-y-4"),E(b,"class","text-lg font-semibold text-blue-800 mb-2"),E(w,"class","text-blue-700 mb-3"),E($,"type","text"),E($,"placeholder","输入SudokuWiki题目URL"),E($,"class","flex-1 px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"),E(H,"class","btn btn-primary"),E(k,"class","flex gap-2"),E(g,"class","mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg"),E(B,"class","mt-6 text-center")},m(l,u){C(l,t,u),y(t,e),y(t,s),y(t,r),C(l,o,u),C(l,a,u),y(a,c),y(a,d),y(a,f),C(l,h,u),C(l,m,u);for(let l=0;l<D.length;l+=1)D[l].m(m,null);C(l,p,u),C(l,g,u),y(g,b),y(g,v),y(g,w),y(g,x),y(g,k),y(k,$),_($,n[1]),y(k,N),y(k,H),C(l,P,u),C(l,B,u),L||(O=[T(r,"click",function(){i(n[0])&&n[0].apply(this,arguments)}),T(f,"click",n[3]),T($,"input",n[8]),T(H,"click",n[5])],L=!0)},p(l,[t]){if(n=l,20&t){let l;for(R=n[2],l=0;l<R.length;l+=1){const e=Je(n,R,l);D[l]?D[l].p(e,t):(D[l]=Ye(e),D[l].c(),D[l].m(m,null))}for(;l<D.length;l+=1)D[l].d(1);D.length=R.length}2&t&&$.value!==n[1]&&_($,n[1])},i:l,o:l,d(l){l&&S(t),l&&S(o),l&&S(a),l&&S(h),l&&S(m),M(D,l),l&&S(p),l&&S(g),l&&S(P),l&&S(B),L=!1,u(O)}}}function Ke(l,n,t){let{data:e={}}=n,{hideModal:u}=n,i="",s="";async function r(l){try{const n=await fetch(l.url),t=(await n.text()).match(/var puzzle = \"([0-9\.]{81})\"/);if(!t)return void(i="未找到有效棋盘数据");const e=t[1].replace(/\./g,"0").split("").map(Number);if(81!==e.length)return void(i="棋盘数据长度不正确");for(let l=0;l<9;l++)for(let n=0;n<9;n++)an.set({x:n,y:l},e[9*l+n]);u(),alert(`成功导入题目：${l.name}`)}catch(l){i="导入题目失败"}}function o(l){const n=l.replace(/\./g,"0").split("").map(Number);for(let l=0;l<9;l++)for(let t=0;t<9;t++)an.set({x:t,y:l},n[9*l+t]);u(),alert("成功导入题目！")}return l.$$set=l=>{"data"in l&&t(6,e=l.data),"hideModal"in l&&t(0,u=l.hideModal)},[u,s,[{name:"基础练习",difficulty:"简单",description:"适合初学者的基础题目",puzzles:[{name:"基础题目1",url:"https://www.sudokuwiki.org/sudoku.htm?bd=000000000000000000000000000000000000000000000000000000000000000000000000000000000"},{name:"基础题目2",url:"https://www.sudokuwiki.org/sudoku.htm?bd=000000000000000000000000000000000000000000000000000000000000000000000000000000000"}]},{name:"隐藏单数",difficulty:"简单",description:"练习隐藏单数技巧的题目",puzzles:[{name:"隐藏单数1",url:"https://www.sudokuwiki.org/sudoku.htm?bd=000000000000000000000000000000000000000000000000000000000000000000000000000000000"},{name:"隐藏单数2",url:"https://www.sudokuwiki.org/sudoku.htm?bd=000000000000000000000000000000000000000000000000000000000000000000000000000000000"}]},{name:"数对技巧",difficulty:"中等",description:"练习数对和数三技巧的题目",puzzles:[{name:"数对题目1",url:"https://www.sudokuwiki.org/sudoku.htm?bd=000000000000000000000000000000000000000000000000000000000000000000000000000000000"},{name:"数对题目2",url:"https://www.sudokuwiki.org/sudoku.htm?bd=000000000000000000000000000000000000000000000000000000000000000000000000000000000"}]}],function(){e.onHide?e.onHide():u()},r,async function(){if(!s.trim())return void alert("请输入有效的URL或字符串");const l=s.match(/[?&]bd=([0-9.]{81})/i);if(l)return o(l[1]);const n=s.replace(/[^0-9.]/g,"");if(81===n.length)return o(n);try{const l=await fetch(s),n=await l.text(),t=n.match(/var puzzle = "([0-9.]{81})"/);if(t)return o(t[1]);const e=n.match(/<table[^>]*id=["']?puzzle_grid["']?[^>]*>([\s\S]*?)<\/table>/i);if(e){const l=e[1].match(/<td[^>]*>([\s\S]*?)<\/td>/gi);if(l&&81===l.length){return function(l){for(let n=0;n<9;n++)for(let t=0;t<9;t++)an.set({x:t,y:n},l[9*n+t]);u(),alert("成功导入题目！")}(l.map(l=>{const n=l.replace(/<[^>]+>/g,"").trim();return""===n||"."===n?0:Number(n)}))}}alert("未找到有效棋盘数据")}catch(l){alert("导入失败，请检查URL是否正确")}},e,l=>r(l),function(){s=this.value,t(1,s)}]}function Qe(l,n,t){const e=l.slice();return e[8]=n[t],e}function lu(l,n,t){const e=l.slice();return e[11]=n[t],e}function nu(l,n,t){const e=l.slice();return e[14]=n[t],e[16]=t,e}function tu(l,n,t){const e=l.slice();return e[17]=n[t],e[19]=t,e}function eu(l,n,t){const e=l.slice();return e[20]=n[t],e}function uu(n){let t,e,u=n[20]+"";return{c(){t=z("li"),e=H(u),E(t,"class","pl-2")},m(l,n){C(l,t,n),y(t,e)},p:l,d(l){l&&S(t)}}}function iu(n){let t,e,u=0!==n[17]&&function(n){let t,e=n[17]+"";return{c(){t=H(e)},m(l,n){C(l,t,n)},p:l,d(l){l&&S(t)}}}(n);return{c(){t=z("div"),u&&u.c(),e=j(),E(t,"class","w-8 h-8 bg-white flex items-center justify-center text-sm font-mono")},m(l,n){C(l,t,n),u&&u.m(t,null),y(t,e)},p(l,n){0!==l[17]&&u.p(l,n)},d(l){l&&S(t),u&&u.d()}}}function su(l){let n,t=l[14],e=[];for(let n=0;n<t.length;n+=1)e[n]=iu(tu(l,t,n));return{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=P()},m(l,t){for(let n=0;n<e.length;n+=1)e[n].m(l,t);C(l,n,t)},p(l,u){if(1&u){let i;for(t=l[14],i=0;i<t.length;i+=1){const s=tu(l,t,i);e[i]?e[i].p(s,u):(e[i]=iu(s),e[i].c(),e[i].m(n.parentNode,n))}for(;i<e.length;i+=1)e[i].d(1);e.length=t.length}},d(l){M(e,l),l&&S(n)}}}function ru(l){let n,t,e,u,i,s=l[11]+"";function r(){return l[5](l[11])}return{c(){n=z("button"),t=H(s),e=j(),E(n,"class","px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm hover:bg-blue-200")},m(l,s){C(l,n,s),y(n,t),y(n,e),u||(i=T(n,"click",r),u=!0)},p(n,t){l=n},d(l){l&&S(n),u=!1,i()}}}function ou(n){let t,e,u=n[8]+"";return{c(){t=z("li"),e=H(u),E(t,"class","pl-2")},m(l,n){C(l,t,n),y(t,e)},p:l,d(l){l&&S(t)}}}function au(n){let t,e,u,i,s,r,o,a,c,d,f,h,m,p,g,b,v,w,x,k,$,N,H,P,B,L,O,_,R,D,A,V,I,q,U,F,W,J,X=n[0].steps,G=[];for(let l=0;l<X.length;l+=1)G[l]=uu(eu(n,X,l));let Y=n[0].exampleBoard&&function(l){let n,t,e,u,i=l[0].exampleBoard,s=[];for(let n=0;n<i.length;n+=1)s[n]=su(nu(l,i,n));return{c(){n=z("div"),t=z("p"),t.textContent="示例棋盘：",e=j(),u=z("div");for(let l=0;l<s.length;l+=1)s[l].c();E(t,"class","text-sm font-semibold mb-2"),E(u,"class","grid grid-cols-9 gap-px bg-gray-300 border-2 border-gray-400 max-w-xs"),E(n,"class","mt-4")},m(l,i){C(l,n,i),y(n,t),y(n,e),y(n,u);for(let l=0;l<s.length;l+=1)s[l].m(u,null)},p(l,n){if(1&n){let t;for(i=l[0].exampleBoard,t=0;t<i.length;t+=1){const e=nu(l,i,t);s[t]?s[t].p(e,n):(s[t]=su(e),s[t].c(),s[t].m(u,null))}for(;t<s.length;t+=1)s[t].d(1);s.length=i.length}},d(l){l&&S(n),M(s,l)}}}(n),Z=n[0].relatedStrategies,K=[];for(let l=0;l<Z.length;l+=1)K[l]=ru(lu(n,Z,l));let Q=n[0].practiceTips,ll=[];for(let l=0;l<Q.length;l+=1)ll[l]=ou(Qe(n,Q,l));return{c(){t=z("div"),e=z("button"),e.textContent="← 返回策略学习",u=j(),i=z("div"),s=z("div"),r=z("h2"),r.textContent=`${n[0].name}`,o=j(),a=z("span"),a.textContent=`难度：${n[0].difficulty}`,c=j(),d=z("p"),d.textContent=`${n[0].description}`,f=j(),h=z("div"),m=z("h3"),m.textContent="解题步骤",p=j(),g=z("ol");for(let l=0;l<G.length;l+=1)G[l].c();b=j(),v=z("div"),w=z("h3"),w.textContent="示例",x=j(),k=z("div"),$=z("p"),$.textContent=`${n[0].example}`,N=j(),Y&&Y.c(),H=j(),P=z("div"),B=z("h3"),B.textContent="相关策略",L=j(),O=z("div");for(let l=0;l<K.length;l+=1)K[l].c();_=j(),R=z("div"),D=z("h3"),D.textContent="练习建议",A=j(),V=z("ul");for(let l=0;l<ll.length;l+=1)ll[l].c();I=j(),q=z("div"),q.innerHTML='<a href="https://www.sudokuwiki.org/Sudoku.htm" target="_blank" rel="noopener noreferrer" class="btn btn-primary">🌐 在SudokuWiki查看完整说明</a>',U=j(),F=z("div"),F.innerHTML='<p class="text-sm text-gray-500">提示：在游戏中遇到此策略时，点击&quot;下一步提示&quot;按钮会显示相关说明。</p>',E(e,"class","btn btn-secondary mb-4"),E(t,"class","mb-4"),E(r,"class","text-2xl font-bold text-blue-600 mb-2"),E(a,"class","inline-block px-3 py-1 bg-gray-200 rounded-full text-sm mb-4"),E(d,"class","text-gray-700 mb-4"),E(s,"class","mb-6"),E(m,"class","text-xl font-semibold mb-3"),E(g,"class","list-decimal list-inside space-y-2 text-gray-700"),E(h,"class","mb-6"),E(w,"class","text-xl font-semibold mb-3"),E($,"class","text-gray-700 mb-2"),E(k,"class","bg-gray-100 p-4 rounded-lg"),E(v,"class","mb-6"),E(B,"class","text-xl font-semibold mb-3"),E(O,"class","flex flex-wrap gap-2"),E(P,"class","mb-6"),E(D,"class","text-xl font-semibold mb-3"),E(V,"class","list-disc list-inside space-y-2 text-gray-700"),E(R,"class","mb-6"),E(q,"class","text-center"),E(F,"class","mt-6 text-center")},m(l,S){C(l,t,S),y(t,e),C(l,u,S),C(l,i,S),y(i,s),y(s,r),y(s,o),y(s,a),y(s,c),y(s,d),y(i,f),y(i,h),y(h,m),y(h,p),y(h,g);for(let l=0;l<G.length;l+=1)G[l].m(g,null);y(i,b),y(i,v),y(v,w),y(v,x),y(v,k),y(k,$),y(k,N),Y&&Y.m(k,null),y(i,H),y(i,P),y(P,B),y(P,L),y(P,O);for(let l=0;l<K.length;l+=1)K[l].m(O,null);y(i,_),y(i,R),y(R,D),y(R,A),y(R,V);for(let l=0;l<ll.length;l+=1)ll[l].m(V,null);y(i,I),y(i,q),C(l,U,S),C(l,F,S),W||(J=T(e,"click",n[1]),W=!0)},p(l,[n]){if(1&n){let t;for(X=l[0].steps,t=0;t<X.length;t+=1){const e=eu(l,X,t);G[t]?G[t].p(e,n):(G[t]=uu(e),G[t].c(),G[t].m(g,null))}for(;t<G.length;t+=1)G[t].d(1);G.length=X.length}if(l[0].exampleBoard&&Y.p(l,n),5&n){let t;for(Z=l[0].relatedStrategies,t=0;t<Z.length;t+=1){const e=lu(l,Z,t);K[t]?K[t].p(e,n):(K[t]=ru(e),K[t].c(),K[t].m(O,null))}for(;t<K.length;t+=1)K[t].d(1);K.length=Z.length}if(1&n){let t;for(Q=l[0].practiceTips,t=0;t<Q.length;t+=1){const e=Qe(l,Q,t);ll[t]?ll[t].p(e,n):(ll[t]=ou(e),ll[t].c(),ll[t].m(V,null))}for(;t<ll.length;t+=1)ll[t].d(1);ll.length=Q.length}},i:l,o:l,d(l){l&&S(t),l&&S(u),l&&S(i),M(G,l),Y&&Y.d(),M(K,l),M(ll,l),l&&S(U),l&&S(F),W=!1,J()}}}function cu(l,n,t){let{data:e={}}=n,{hideModal:u}=n;const i=e.strategy;function s(l){const n=r.find(n=>n.name===l);n?xn.show("wikiStrategy",{strategy:n,onHide:e.onHide}):alert(`策略 "${l}" 暂未收录，请访问SudokuWiki查看详细说明。`)}const r=[{name:"隐藏单数",difficulty:"简单",description:"在行、列或宫中，某个数字只能填入一个位置。",example:"在某个宫中，数字5只能填入一个格子。",steps:["检查每个宫、行、列","找出只能填入一个位置的数字","填入该数字"],relatedStrategies:["裸单数","唯一候选数"],practiceTips:["从简单的宫开始练习","注意观察候选数的分布"],wikiUrl:"https://www.sudokuwiki.org/Hidden_Singles"},{name:"裸单数",difficulty:"简单",description:"某个格子只有一个候选数。",example:"某个格子只能填入数字3。",steps:["检查每个格子的候选数","找出只有一个候选数的格子","填入该数字"],relatedStrategies:["隐藏单数","唯一候选数"],practiceTips:["先完成所有裸单数","再寻找隐藏单数"],wikiUrl:"https://www.sudokuwiki.org/Naked_Singles"},{name:"唯一候选数",difficulty:"简单",description:"在行、列或宫中，某个候选数只出现在一个位置。",example:"在某个宫中，候选数7只出现在一个格子中。",steps:["标记所有候选数","检查每个宫、行、列","找出唯一出现的候选数","填入该数字"],relatedStrategies:["隐藏单数","裸单数"],practiceTips:["系统性地检查每个区域","注意候选数的唯一性"],wikiUrl:"https://www.sudokuwiki.org/Singles"},{name:"裸数对",difficulty:"中等",description:"两个格子只包含相同的两个候选数。",example:"两个格子都只能填入数字2和5。",steps:["检查每个宫、行、列","找出只包含相同两个候选数的格子","排除其他格子中的这些候选数"],relatedStrategies:["隐藏数对","裸数三"],practiceTips:["注意观察候选数的组合","数对可以排除其他候选数"],wikiUrl:"https://www.sudokuwiki.org/Naked_Pairs"},{name:"隐藏数对",difficulty:"中等",description:"在行、列或宫中，两个候选数只出现在两个格子中。",example:"在某个宫中，候选数3和7只出现在两个格子中。",steps:["检查每个宫、行、列","找出只出现在两个格子中的候选数","这两个格子只能填入这些候选数"],relatedStrategies:["裸数对","隐藏数三"],practiceTips:["注意候选数的分布模式","隐藏数对可以简化候选数"],wikiUrl:"https://www.sudokuwiki.org/Hidden_Pairs"},{name:"X-Wing",difficulty:"困难",description:"某个候选数在两行中都只出现在相同的两列中。",example:"候选数4在两行中都只出现在第2列和第8列。",steps:["检查每行的候选数分布","找出在两行中只出现在相同两列的候选数","排除这两列中其他行的该候选数"],relatedStrategies:["Swordfish","XY-Wing"],practiceTips:["需要仔细观察候选数模式","X-Wing是高级技巧的基础"],wikiUrl:"https://www.sudokuwiki.org/X_Wing"}];return l.$$set=l=>{"data"in l&&t(3,e=l.data),"hideModal"in l&&t(4,u=l.hideModal)},[i,function(){e.onHide?e.onHide():u()},s,e,u,l=>s(l)]}function du(l,n,t){const e=l.slice();return e[10]=n[t],e}function fu(n){let t;return{c(){t=z("div"),t.innerHTML='<p class="svelte-1vzflgp">当前没有可用的提示</p> \n            <p class="svelte-1vzflgp">请尝试填入更多数字或检查是否有错误</p>',E(t,"class","no-hint svelte-1vzflgp")},m(l,n){C(l,t,n)},p:l,d(l){l&&S(t)}}}function hu(l){let n,t,e,i,s,r,o,a,c,d,f,h,m,p,g,b,v,w,x,k,$,N,P,B,L,O,_,R,D=l[0].reasoning.split("\n"),A=[];for(let n=0;n<D.length;n+=1)A[n]=mu(du(l,D,n));return{c(){n=z("div"),t=z("div"),e=z("div"),i=z("span"),i.textContent=`${l[0].type}`,s=j(),r=z("span"),r.textContent=`${l[0].description}`,o=j(),a=z("a"),c=H("查看详细策略说明 →"),f=j(),h=z("div"),h.innerHTML='<div class="status-item svelte-1vzflgp"><span class="status-icon valid svelte-1vzflgp">✓</span> \n                    <span>策略验证通过</span></div> \n                <div class="status-item svelte-1vzflgp"><span class="status-icon valid svelte-1vzflgp">✓</span> \n                    <span>候选数计算正确</span></div> \n                <div class="status-item svelte-1vzflgp"><span class="status-icon valid svelte-1vzflgp">✓</span> \n                    <span>推理逻辑无误</span></div>',m=j(),p=z("div"),g=z("h3"),g.textContent="推理过程",b=j(),v=z("div");for(let l=0;l<A.length;l+=1)A[l].c();var u;w=j(),x=z("div"),k=z("button"),k.textContent="自动填入",$=j(),N=z("button"),N.textContent="定位格子",P=j(),B=z("button"),B.textContent="查看候选数",L=j(),O=z("div"),O.innerHTML='<p class="svelte-1vzflgp"><strong>提示说明：</strong></p> \n                <ul class="svelte-1vzflgp"><li class="svelte-1vzflgp">此提示经过多重验证，确保100%正确</li> \n                    <li class="svelte-1vzflgp">推理过程详细说明了每一步的逻辑</li> \n                    <li class="svelte-1vzflgp">可以点击&quot;查看详细策略说明&quot;了解更多</li> \n                    <li class="svelte-1vzflgp">建议先理解推理过程，再选择是否自动填入</li></ul>',E(i,"class","badge svelte-1vzflgp"),E(r,"class","strategy-desc svelte-1vzflgp"),E(e,"class","strategy-name svelte-1vzflgp"),E(a,"href",(u=l[0].strategy,d={NakedSingleStrategy:"https://www.sudokuwiki.org/Naked_Singles",HiddenSingleStrategy:"https://www.sudokuwiki.org/Hidden_Singles",PointingPairsStrategy:"https://www.sudokuwiki.org/Intersection_Removal"}[u]||"https://www.sudokuwiki.org/")),E(a,"target","_blank"),E(a,"class","wiki-link svelte-1vzflgp"),E(t,"class","strategy-info svelte-1vzflgp"),E(h,"class","validation-status svelte-1vzflgp"),E(g,"class","svelte-1vzflgp"),E(v,"class","reasoning-text svelte-1vzflgp"),E(p,"class","reasoning-section svelte-1vzflgp"),E(k,"class","btn btn-primary svelte-1vzflgp"),E(N,"class","btn btn-secondary svelte-1vzflgp"),E(B,"class","btn btn-secondary svelte-1vzflgp"),E(x,"class","action-buttons svelte-1vzflgp"),E(O,"class","hint-note svelte-1vzflgp"),E(n,"class","hint-content svelte-1vzflgp")},m(u,d){C(u,n,d),y(n,t),y(t,e),y(e,i),y(e,s),y(e,r),y(t,o),y(t,a),y(a,c),y(n,f),y(n,h),y(n,m),y(n,p),y(p,g),y(p,b),y(p,v);for(let l=0;l<A.length;l+=1)A[l].m(v,null);y(n,w),y(n,x),y(x,k),y(x,$),y(x,N),y(x,P),y(x,B),y(n,L),y(n,O),_||(R=[T(k,"click",l[1]),T(N,"click",l[2]),T(B,"click",l[3])],_=!0)},p(l,n){if(1&n){let t;for(D=l[0].reasoning.split("\n"),t=0;t<D.length;t+=1){const e=du(l,D,t);A[t]?A[t].p(e,n):(A[t]=mu(e),A[t].c(),A[t].m(v,null))}for(;t<A.length;t+=1)A[t].d(1);A.length=D.length}},d(l){l&&S(n),M(A,l),_=!1,u(R)}}}function mu(n){let t,e=n[10].trim(),u=e&&function(n){let t,e,u=n[10]+"";return{c(){t=z("p"),e=H(u),E(t,"class","svelte-1vzflgp")},m(l,n){C(l,t,n),y(t,e)},p:l,d(l){l&&S(t)}}}(n);return{c(){u&&u.c(),t=P()},m(l,n){u&&u.m(l,n),C(l,t,n)},p(l,n){e&&u.p(l,n)},d(l){u&&u.d(l),l&&S(t)}}}function pu(n){let t,e,u,i,s,r,o,a;let c=function(l){return l[0]?hu:fu}(n),d=c(n);return{c(){t=z("div"),e=z("div"),u=z("h2"),u.textContent="下一步提示",i=j(),s=z("button"),s.textContent="×",r=j(),d.c(),E(u,"class","svelte-1vzflgp"),E(s,"class","close-btn svelte-1vzflgp"),E(e,"class","modal-header svelte-1vzflgp"),E(t,"class","hint-modal svelte-1vzflgp")},m(l,c){C(l,t,c),y(t,e),y(e,u),y(e,i),y(e,s),y(t,r),d.m(t,null),o||(a=T(s,"click",n[4]),o=!0)},p(l,[n]){d.p(l,n)},i:l,o:l,d(l){l&&S(t),d.d(),o=!1,a()}}}function gu(l,n,t){let{data:e={}}=n,{hideModal:u=()=>{}}=n;const{hint:i,onApply:s,onLocate:r,onShowCandidates:o}=e;return l.$$set=l=>{"data"in l&&t(5,e=l.data),"hideModal"in l&&t(6,u=l.hideModal)},[i,function(){s&&s(),u()},function(){r&&r()},function(){o&&o()},function(){u()},e,u]}var bu={share:class extends Ml{constructor(l){super(),Sl(this,l,ye,xe,s,{data:0,hideModal:1})}},qrcode:class extends Ml{constructor(l){super(),Sl(this,l,$e,ke,s,{data:0})}},settings:class extends Ml{constructor(l){super(),Sl(this,l,He,Ne,s,{data:4,hideModal:0})}},confirm:class extends Ml{constructor(l){super(),Sl(this,l,Te,Pe,s,{data:0,hideModal:1})}},prompt:class extends Ml{constructor(l){super(),Sl(this,l,Le,Ee,s,{data:0,hideModal:1})}},welcome:class extends Ml{constructor(l){super(),Sl(this,l,Ae,De,s,{data:0,hideModal:6})}},gameover:class extends Ml{constructor(l){super(),Sl(this,l,Ie,Ve,s,{})}},strategyLearning:class extends Ml{constructor(l){super(),Sl(this,l,We,Fe,s,{hideModal:0})}},puzzleLibrary:class extends Ml{constructor(l){super(),Sl(this,l,Ke,Ze,s,{data:6,hideModal:0})}},wikiStrategy:class extends Ml{constructor(l){super(),Sl(this,l,cu,au,s,{data:3,hideModal:4})}},hint:class extends Ml{constructor(l){super(),Sl(this,l,gu,pu,s,{data:5,hideModal:6})}}};function vu(l){let n,t,e,i,s,r,o,a,c,d,f;var h=bu[l[0]];function m(l){return{props:{data:l[1],hideModal:xn.hide}}}return h&&(o=new h(m(l))),{c(){n=z("div"),t=z("button"),i=j(),s=z("div"),r=z("div"),o&&yl(o.$$.fragment),E(t,"class","modal-overlay svelte-fmxwjm"),E(t,"tabindex","-1"),E(r,"class","modal-content svelte-fmxwjm"),E(s,"class","modal-container svelte-fmxwjm"),E(n,"class","modal svelte-fmxwjm")},m(e,u){C(e,n,u),y(n,t),y(n,i),y(n,s),y(s,r),o&&kl(o,r,null),c=!0,d||(f=[T(t,"click",l[2]),T(r,"scroll",xu)],d=!0)},p(n,t){l=n;const e={};if(2&t&&(e.data=l[1]),h!==(h=bu[l[0]])){if(o){ml();const l=o;bl(l.$$.fragment,1,0,()=>{$l(l,1)}),pl()}h?(o=new h(m(l)),yl(o.$$.fragment),gl(o.$$.fragment,1),kl(o,r,null)):o=null}else h&&o.$set(e)},i(l){c||(ul(()=>{e||(e=wl(t,Hn,{duration:_l},!0)),e.run(1)}),o&&gl(o.$$.fragment,l),ul(()=>{a||(a=wl(s,Pn,{duration:_l},!0)),a.run(1)}),c=!0)},o(l){e||(e=wl(t,Hn,{duration:_l},!1)),e.run(0),o&&bl(o.$$.fragment,l),a||(a=wl(s,Pn,{duration:_l},!1)),a.run(0),c=!1},d(l){l&&S(n),l&&e&&e.end(),o&&$l(o),l&&a&&a.end(),d=!1,u(f)}}}function wu(l){let n,t,e=l[0]!==Ol&&vu(l);return{c(){e&&e.c(),n=P()},m(l,u){e&&e.m(l,u),C(l,n,u),t=!0},p(l,[t]){l[0]!==Ol?e?(e.p(l,t),1&t&&gl(e,1)):(e=vu(l),e.c(),gl(e,1),e.m(n.parentNode,n)):e&&(ml(),bl(e,1,1,()=>{e=null}),pl())},i(l){t||(gl(e),t=!0)},o(l){bl(e),t=!1},d(l){e&&e.d(l),l&&S(n)}}}function xu(l){l.stopPropagation()}function yu(l,n,t){let e,u;c(l,xn,l=>t(0,e=l)),c(l,wn,l=>t(1,u=l));const i=["welcome","gameover"];return[e,u,function(){i.includes(e)||xn.hide()}]}class ku extends Ml{constructor(l){super(),Sl(this,l,yu,wu,s,{})}}function $u(l,n,t){const e=l.slice();return e[25]=n[t],e}function Cu(l){let n,t,e,i,s,r,o,a,c,d,f,h,m,p,g,b,v,w=l[6]&&Su(l);function x(l,n){return 0===l[7].length?zu:Mu}let k=x(l),$=k(l),M=l[3]&&Pu(l);return{c(){n=z("div"),t=z("div"),e=z("div"),i=z("div"),i.textContent="分支点管理",s=j(),r=z("button"),o=H("关闭"),a=j(),c=z("div"),d=z("input"),f=j(),h=z("button"),h.textContent="保存",m=j(),w&&w.c(),p=j(),$.c(),g=j(),M&&M.c(),E(i,"class","text-xl font-bold"),E(r,"class","btn btn-small"),r.disabled=l[3],E(e,"class","flex justify-between items-center mb-4"),E(d,"class","input flex-1"),E(d,"placeholder","新分支点名称（可选）"),E(d,"maxlength","20"),E(h,"class","btn btn-primary"),E(c,"class","flex mb-4 gap-2"),E(t,"class","bg-white p-6 rounded shadow-xl max-w-md w-full"),E(n,"class","fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-30")},m(u,x){C(u,n,x),y(n,t),y(t,e),y(e,i),y(e,s),y(e,r),y(r,o),y(t,a),y(t,c),y(c,d),_(d,l[5]),y(c,f),y(c,h),y(t,m),w&&w.m(t,null),y(t,p),$.m(t,null),y(t,g),M&&M.m(t,null),b||(v=[T(r,"click",l[18]),T(d,"input",l[19]),T(h,"click",l[15])],b=!0)},p(l,n){8&n&&(r.disabled=l[3]),32&n&&d.value!==l[5]&&_(d,l[5]),l[6]?w?w.p(l,n):(w=Su(l),w.c(),w.m(t,p)):w&&(w.d(1),w=null),k===(k=x(l))&&$?$.p(l,n):($.d(1),$=k(l),$&&($.c(),$.m(t,g))),l[3]?M?M.p(l,n):(M=Pu(l),M.c(),M.m(t,null)):M&&(M.d(1),M=null)},d(l){l&&S(n),w&&w.d(),$.d(),M&&M.d(),b=!1,u(v)}}}function Su(l){let n,t;return{c(){n=z("div"),t=H(l[6]),E(n,"class","text-red-500 mb-2")},m(l,e){C(l,n,e),y(n,t)},p(l,n){64&n&&O(t,l[6])},d(l){l&&S(n)}}}function Mu(l){let n,t=l[7],e=[];for(let n=0;n<t.length;n+=1)e[n]=ju($u(l,t,n));return{c(){n=z("div");for(let l=0;l<e.length;l+=1)e[l].c();E(n,"class","space-y-3 max-h-80 overflow-y-auto")},m(l,t){C(l,n,t);for(let l=0;l<e.length;l+=1)e[l].m(n,null)},p(l,u){if(8070&u){let i;for(t=l[7],i=0;i<t.length;i+=1){const s=$u(l,t,i);e[i]?e[i].p(s,u):(e[i]=ju(s),e[i].c(),e[i].m(n,null))}for(;i<e.length;i+=1)e[i].d(1);e.length=t.length}},d(l){l&&S(n),M(e,l)}}}function zu(n){let t;return{c(){t=z("div"),t.textContent="暂无分支点",E(t,"class","text-gray-500 text-center py-8")},m(l,n){C(l,t,n)},p:l,d(l){l&&S(t)}}}function Nu(l){let n,t,e,i,s,r,o,a,c,d,f,h,m,p,g,b,v=l[25].name+"",w=new Date(l[25].timestamp).toLocaleString()+"",x=l[25].steps+"";function k(){return l[21](l[25])}function $(){return l[22](l[25])}function M(){return l[23](l[25])}return{c(){n=z("div"),t=z("div"),e=H(v),i=j(),s=z("div"),r=H(w),o=H(" | 步数: "),a=H(x),c=j(),d=z("button"),d.textContent="恢复",f=j(),h=z("button"),h.textContent="重命名",m=j(),p=z("button"),p.textContent="删除",E(t,"class","font-semibold"),E(s,"class","text-xs text-gray-500"),E(n,"class","flex-1"),E(d,"class","btn btn-small mr-1"),E(h,"class","btn btn-small mr-1"),E(p,"class","btn btn-small btn-danger svelte-1cm4s82")},m(l,u){C(l,n,u),y(n,t),y(t,e),y(n,i),y(n,s),y(s,r),y(s,o),y(s,a),C(l,c,u),C(l,d,u),C(l,f,u),C(l,h,u),C(l,m,u),C(l,p,u),g||(b=[T(d,"click",k),T(h,"click",$),T(p,"click",M)],g=!0)},p(n,t){l=n,128&t&&v!==(v=l[25].name+"")&&O(e,v),128&t&&w!==(w=new Date(l[25].timestamp).toLocaleString()+"")&&O(r,w),128&t&&x!==(x=l[25].steps+"")&&O(a,x)},d(l){l&&S(n),l&&S(c),l&&S(d),l&&S(f),l&&S(h),l&&S(m),l&&S(p),g=!1,u(b)}}}function Hu(l){let n,t,e,i,s,r,o,a;return{c(){n=z("div"),t=z("input"),e=j(),i=z("button"),i.textContent="保存",s=j(),r=z("button"),r.textContent="取消",E(t,"class","input w-1/2 mr-2"),E(t,"maxlength","20"),E(i,"class","btn btn-small btn-primary mr-1 whitespace-nowrap flex items-center justify-center"),E(r,"class","btn btn-small whitespace-nowrap flex items-center justify-center"),E(n,"class","flex items-center w-full gap-2")},m(u,c){C(u,n,c),y(n,t),_(t,l[2]),y(n,e),y(n,i),y(n,s),y(n,r),o||(a=[T(t,"input",l[20]),T(i,"click",l[10]),T(r,"click",l[11])],o=!0)},p(l,n){4&n&&t.value!==l[2]&&_(t,l[2])},d(l){l&&S(n),o=!1,u(a)}}}function ju(l){let n,t;function e(l,n){return l[1]===l[25].id?Hu:Nu}let u=e(l),i=u(l);return{c(){n=z("div"),i.c(),t=j(),E(n,"class","flex items-center border rounded px-3 py-2")},m(l,e){C(l,n,e),i.m(n,null),y(n,t)},p(l,s){u===(u=e(l))&&i?i.p(l,s):(i.d(1),i=u(l),i&&(i.c(),i.m(n,t)))},d(l){l&&S(n),i.d()}}}function Pu(l){let n,t,e,i,s,r,o,a,c,d,f,h,m;return{c(){n=z("div"),t=z("div"),e=z("div"),i=H("确认删除分支点 "),s=z("span"),r=H(l[4]),o=H("？"),a=j(),c=z("button"),c.textContent="确认删除",d=j(),f=z("button"),f.textContent="取消",E(s,"class","font-bold"),E(e,"class","mb-2"),E(c,"class","btn btn-danger w-full mb-2 svelte-1cm4s82"),E(f,"class","btn w-full"),E(t,"class","bg-white p-6 rounded shadow-xl max-w-xs w-full"),E(n,"class","fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-40")},m(u,p){C(u,n,p),y(n,t),y(t,e),y(e,i),y(e,s),y(s,r),y(e,o),y(t,a),y(t,c),y(t,d),y(t,f),h||(m=[T(c,"click",l[13]),T(f,"click",l[14])],h=!0)},p(l,n){16&n&&O(r,l[4])},d(l){l&&S(n),h=!1,u(m)}}}function Tu(n){let t,e=n[0]&&Cu(n);return{c(){e&&e.c(),t=P()},m(l,n){e&&e.m(l,n),C(l,t,n)},p(l,[n]){l[0]?e?e.p(l,n):(e=Cu(l),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:l,o:l,d(l){e&&e.d(l),l&&S(t)}}}function Bu(l,n,t){const e=Y();let{show:u=!1}=n,{onClose:i=()=>{}}=n,{onRestore:s=l=>{}}=n,r=null,o="",a=null,c="",d="",f="",h=[];const m=st.subscribe(l=>{t(7,h=l)});function p(l,n){t(1,r=l),t(2,o=n)}function g(l,n){t(3,a=l),t(4,c=n)}G(()=>()=>m());return l.$$set=l=>{"show"in l&&t(0,u=l.show),"onClose"in l&&t(16,i=l.onClose),"onRestore"in l&&t(17,s=l.onRestore)},[u,r,o,a,c,d,f,h,e,p,function(){if(r&&o.trim()){const l=st.restore(r);l&&(l.name=o.trim(),l.save(),st.refresh())}t(1,r=null),t(2,o="")},function(){t(1,r=null),t(2,o="")},g,function(){st.remove(a),t(3,a=null),t(4,c="")},function(){t(3,a=null),t(4,c="")},function(){if(h.length>=10)return void t(6,f="最多保存10个分支点，请先删除部分分支点");const l=Date.now().toString(),n=d.trim()||`分支点 - ${(new Date).toLocaleTimeString()}`,e=Date.now(),u=rt(),i=new ut(l,n,e,u,0);st.add(i),t(5,d=""),t(6,f="")},i,s,()=>{a||(console.log("close click"),e("close"))},function(){d=this.value,t(5,d)},function(){o=this.value,t(2,o)},l=>e("restore",l.id),l=>p(l.id,l.name),l=>g(l.id,l.name)]}class Eu extends Ml{constructor(l){super(),Sl(this,l,Bu,Tu,s,{show:0,onClose:16,onRestore:17})}}function Lu(n){let t,e,u;return{c(){t=z("button"),t.innerHTML='<svg class="icon-outline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="width:1.5em;height:1.5em;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 10l5 5m0 0l5-5m-5 5V4"></path></svg> \n\t\t\t<span class="ml-1">导入</span>',E(t,"slot","import"),E(t,"class","btn btn-header bg-primary text-white flex items-center justify-center"),E(t,"title","导入SudokuWiki题目")},m(l,i){C(l,t,i),e||(u=T(t,"click",n[8]),e=!0)},p:l,d(l){l&&S(t),e=!1,u()}}}function Ou(l){let n,t,e,i,s,r,o,a,c,d,f,h,m,p,g,b,v,w,x,k,$,M,N,P,L,O,R,D,A,V,I,q=l[5]&&_u(l);return{c(){n=z("div"),t=z("div"),e=z("div"),e.textContent="导入SudokuWiki题目",i=j(),s=z("div"),r=z("label"),r.textContent="SudokuWiki题目URL：",o=j(),a=z("input"),c=j(),d=z("div"),f=H("支持格式："),h=z("br"),m=H("\n                • SudokuWiki URL（如：https://www.sudokuwiki.org/sudoku.htm?bd=...）"),p=z("br"),g=H("\n                • 81位数字字符串（用0表示空格，如：530070000600195000...）"),b=z("br"),v=H("\n                • 包含bd参数的URL"),w=z("br"),x=z("br"),k=H("\n                示例题目："),$=z("br"),M=j(),N=z("button"),N.textContent="简单题目（点击填入）",P=j(),q&&q.c(),L=j(),O=z("div"),R=z("button"),R.textContent="导入",D=j(),A=z("button"),A.textContent="取消",E(e,"class","mb-4 text-lg font-semibold"),E(r,"class","block text-sm font-medium text-gray-700 mb-2"),E(a,"class","input input-bordered w-full mb-2"),E(a,"placeholder","输入SudokuWiki URL或81位数字字符串"),E(a,"type","text"),E(N,"class","text-blue-600 hover:underline"),E(d,"class","text-xs text-gray-500 mb-2"),E(s,"class","mb-4"),E(R,"class","btn btn-primary flex-1"),E(A,"class","btn flex-1"),E(O,"class","flex gap-2"),E(t,"class","bg-white p-6 rounded shadow-xl max-w-md w-full"),E(n,"class","fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-30")},m(u,S){C(u,n,S),y(n,t),y(t,e),y(t,i),y(t,s),y(s,r),y(s,o),y(s,a),_(a,l[4]),y(s,c),y(s,d),y(d,f),y(d,h),y(d,m),y(d,p),y(d,g),y(d,b),y(d,v),y(d,w),y(d,x),y(d,k),y(d,$),y(d,M),y(d,N),y(s,P),q&&q.m(s,null),y(t,L),y(t,O),y(O,R),y(O,D),y(O,A),V||(I=[T(a,"input",l[12]),T(N,"click",l[13]),T(N,"click",B(l[10])),T(R,"click",l[9]),T(A,"click",l[14])],V=!0)},p(l,n){16&n[0]&&a.value!==l[4]&&_(a,l[4]),l[5]?q?q.p(l,n):(q=_u(l),q.c(),q.m(s,null)):q&&(q.d(1),q=null)},d(l){l&&S(n),q&&q.d(),V=!1,u(I)}}}function _u(l){let n,t;return{c(){n=z("div"),t=H(l[5]),E(n,"class","text-red-500 text-sm mb-2 whitespace-pre-line")},m(l,e){C(l,n,e),y(n,t)},p(l,n){32&n[0]&&O(t,l[5])},d(l){l&&S(n)}}}function Ru(l){let n,t,e,i,s,r,o,a,c,d,f,h,m=l[2]&&Du(l);return{c(){n=z("div"),t=z("div"),e=z("div"),e.textContent="保存分支点",i=j(),s=z("input"),r=j(),m&&m.c(),o=j(),a=z("button"),a.textContent="保存",c=j(),d=z("button"),d.textContent="取消",E(e,"class","mb-2 text-lg font-semibold"),E(s,"class","input input-bordered w-full mb-2"),E(s,"placeholder","分支点名称（可选）"),E(s,"maxlength","20"),E(a,"class","btn btn-primary w-full mb-2"),E(d,"class","btn w-full"),E(t,"class","bg-white p-6 rounded shadow-xl max-w-xs w-full"),E(n,"class","fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-30")},m(u,p){C(u,n,p),y(n,t),y(t,e),y(t,i),y(t,s),_(s,l[1]),y(t,r),m&&m.m(t,null),y(t,o),y(t,a),y(t,c),y(t,d),f||(h=[T(s,"input",l[15]),T(a,"click",l[7]),T(d,"click",l[16])],f=!0)},p(l,n){2&n[0]&&s.value!==l[1]&&_(s,l[1]),l[2]?m?m.p(l,n):(m=Du(l),m.c(),m.m(t,o)):m&&(m.d(1),m=null)},d(l){l&&S(n),m&&m.d(),f=!1,u(h)}}}function Du(l){let n,t;return{c(){n=z("div"),t=H(l[2]),E(n,"class","text-red-500 mb-2")},m(l,e){C(l,n,e),y(n,t)},p(l,n){4&n[0]&&O(t,l[2])},d(l){l&&S(n)}}}function Au(l){let n,t,e,u,i,s,r,o,a,c,d,f;t=new ge({props:{$$slots:{import:[Lu]},$$scope:{ctx:l}}}),i=new te({}),i.$on("openBranchManager",l[11]),r=new ku({});let h=l[3]&&Ou(l),m=l[0]&&Ru(l);return d=new Eu({props:{show:l[6]}}),d.$on("close",l[17]),d.$on("restore",l[18]),{c(){n=z("header"),yl(t.$$.fragment),e=j(),u=z("footer"),yl(i.$$.fragment),s=j(),yl(r.$$.fragment),o=j(),h&&h.c(),a=j(),m&&m.c(),c=j(),yl(d.$$.fragment)},m(l,p){C(l,n,p),kl(t,n,null),C(l,e,p),C(l,u,p),kl(i,u,null),C(l,s,p),kl(r,l,p),C(l,o,p),h&&h.m(l,p),C(l,a,p),m&&m.m(l,p),C(l,c,p),kl(d,l,p),f=!0},p(l,n){const e={};512&n[1]&&(e.$$scope={dirty:n,ctx:l}),t.$set(e),l[3]?h?h.p(l,n):(h=Ou(l),h.c(),h.m(a.parentNode,a)):h&&(h.d(1),h=null),l[0]?m?m.p(l,n):(m=Ru(l),m.c(),m.m(c.parentNode,c)):m&&(m.d(1),m=null);const u={};64&n[0]&&(u.show=l[6]),d.$set(u)},i(l){f||(gl(t.$$.fragment,l),gl(i.$$.fragment,l),gl(r.$$.fragment,l),gl(d.$$.fragment,l),f=!0)},o(l){bl(t.$$.fragment,l),bl(i.$$.fragment,l),bl(r.$$.fragment,l),bl(d.$$.fragment,l),f=!1},d(l){l&&S(n),$l(t),l&&S(e),l&&S(u),$l(i),l&&S(s),$l(r,l),l&&S(o),h&&h.d(l),l&&S(a),m&&m.d(l),l&&S(c),$l(d,l)}}}function Vu(l,n,t){let e;c(l,st,l=>t(26,e=l)),fn.subscribe(l=>{l&&(vn.pause(),xn.show("gameover"))});let u=0,i=null;un.subscribe(l=>{i=l}),an.subscribe(l=>{if(!i||!i.showErrors)return;const n=Date.now();if(n-u<1e3)return;let t=0;for(let n=0;n<9;n++)for(let e=0;e<9;e++)0!==l[n][e]&&t++;if(t>=17)try{u=n,kn.setSolution(l)}catch(l){console.error("计算正确答案时出错:",l)}});let s=!1,r="",o="",d=!1,f="",h="",m=!1;function p(l){const n=l.replace(/\./g,"0").split("").map(Number);for(let l=0;l<9;l++)for(let t=0;t<9;t++)an.set({x:t,y:l},n[9*l+t]);t(3,d=!1),alert("成功导入题目！")}G(()=>{let l,n=location.hash;n.startsWith("#")&&(n=n.slice(1)),Il(n)&&(l=n),xn.show("welcome",{onHide:vn.resume,sencode:l})});return[s,r,o,d,f,h,m,function(){if(st&&e.length>=10)return void t(2,o="最多保存10个分支点，请先删除部分分支点");const l=Date.now().toString(),n=r.trim()||`分支点 - ${(new Date).toLocaleTimeString()}`,u=Date.now(),i={grid:JSON.parse(JSON.stringify(a(an))),candidates:JSON.parse(JSON.stringify(a(yn)))},c=a(dt),d=new ut(l,n,u,i,c);st.add(d),t(1,r=""),t(2,o=""),t(0,s=!1)},function(){t(3,d=!0),t(4,f=""),t(5,h="")},async function(){if(t(5,h=""),f.trim())try{const l=f.match(/[?&]bd=([0-9.]{81})/i);if(l)return p(l[1]);const n=f.replace(/[^0-9.]/g,"");if(81===n.length)return p(n);if(f.includes("sudokuwiki.org/sudoku.htm")&&!f.includes("bd="))return void t(5,h='这是SudokuWiki主页，没有具体题目。请：\n1. 访问 https://www.sudokuwiki.org/sudoku.htm\n2. 点击"Load a Puzzle"选择题目\n3. 复制包含bd参数的URL\n4. 或者直接粘贴81位数字字符串');let e;try{const l=await fetch(f,{mode:"cors",headers:{Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"}});e=await l.text()}catch(l){return void t(5,h="无法直接访问该URL（CORS限制）。请手动复制题目数据或使用bd参数。")}const u=e.match(/var puzzle = "([0-9.]{81})"/);if(u)return p(u[1]);const i=e.match(/<table[^>]*id=["']?puzzle_grid["']?[^>]*>([\s\S]*?)<\/table>/i);if(i){const l=i[1].match(/<td[^>]*>([\s\S]*?)<\/td>/gi);if(l&&81===l.length){return function(l){for(let n=0;n<9;n++)for(let t=0;t<9;t++)an.set({x:t,y:n},l[9*n+t]);t(3,d=!1),alert("成功导入题目！")}(l.map(l=>{const n=l.replace(/<[^>]+>/g,"").trim();return""===n||"."===n?0:Number(n)}))}}let s="";const r=e.match(/<span[^>]*id=['\"]level['\"][^>]*>([^<]+)<\/span>/i);if(r)s=r[1].trim();else{const l=e.match(/Difficulty:\s*<\/b>\s*([A-Za-z]+)/i);l&&(s=l[1].trim())}t(5,h="未找到有效棋盘数据。请确保URL包含具体的题目数据。")}catch(l){t(5,h="URL解析失败或网络错误")}else t(5,h="请输入有效的URL或字符串")},function(n){Z.call(this,l,n)},()=>t(6,m=!0),function(){f=this.value,t(4,f)},()=>t(4,f="530070000600195000098000060800060003400803001700020006060000280000419005000080079"),()=>{t(3,d=!1),t(4,f=""),t(5,h="")},function(){r=this.value,t(1,r)},()=>{t(0,s=!1),t(1,r=""),t(2,o="")},()=>t(6,m=!1),l=>{const n=st.restore(l.detail);if(n&&n.boardData&&n.boardData.grid){for(let l=0;l<n.boardData.grid.length;l++)for(let t=0;t<n.boardData.grid[l].length;t++)an.set({x:t,y:l},n.boardData.grid[l][t]);if(n.boardData.candidates){for(let l=0;l<9;l++)for(let n=0;n<9;n++)yn.clear({x:n,y:l});for(const l in n.boardData.candidates){const[t,e]=l.split(",").map(Number);for(const u of n.boardData.candidates[l])yn.add({x:t,y:e},u)}}}t(6,m=!1)}]}return new class extends Ml{constructor(l){super(),Sl(this,l,Vu,Au,s,{},null,[-1,-1])}}({target:document.getElementById("app")})}();
